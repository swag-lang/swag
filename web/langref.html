<html lang="en">
<body>

    <style>
    .code {
        background-color: #333333;
        border: 1px solid LightGrey;
        margin: 20px;
        padding: 20px;
    }

    .blockquote {
        border-left: 2px solid Orange;
        margin-left: 10px;
        padding-left: 10px;
    }

    .incode {
        background-color: #eeeeee;
        padding: 2px;
        border: 1px dotted #cccc00;
    }

    .linecomment {
        color: Grey;
    }

    .container {
        display:        flex;
        flex-wrap:      nowrap;
        flex-direction: row;
        height:         100%;
        font-family:    arial;
        line-height:    1.3em;
    }

    .left {
        display:    block;
        overflow-y: scroll;
        width:      450;
        height:     100%;
    }

    .right {
        display:     block;
        overflow-y:  scroll;
        width:       100%;
        font-family: arial;
        line-height: 1.3em;
        height:      100%;
    }

    .page {
        width:       1000;
        margin:      0 auto;
    }

    </style>
<div class="container">
<div class="left">
<h1>Table of content</h1>
<ul>
<li><a href="#000_introduction">Introduction</a></li>
<ul>
</ul>
<li><a href="#001_source">Source</a></li>
<ul>
</ul>
<li><a href="#002_comments">Comments</a></li>
<ul>
</ul>
<li><a href="#003_identifiers">Identifiers</a></li>
<ul>
</ul>
<li><a href="#004_keywords">Keywords</a></li>
<ul>
<li><a href="#Basic types">Basic types</a></li>
<li><a href="#Language keywords">Language keywords</a></li>
<li><a href="#Compiler keywords">Compiler keywords</a></li>
<li><a href="#Intrinsics libc">Intrinsics libc</a></li>
<li><a href="#Other intrinsics">Other intrinsics</a></li>
<li><a href="#Modifiers">Modifiers</a></li>
</ul>
<li><a href="#005_semicolon">Semicolon</a></li>
<ul>
</ul>
<li><a href="#006_declaration_order">Declaration order</a></li>
<ul>
</ul>
<li><a href="#010_basic_types">Basic types</a></li>
<ul>
<li><a href="#Type reflection">Type reflection</a></li>
</ul>
<li><a href="#011_number_literals">Number literals</a></li>
<ul>
<li><a href="#Postfix">Postfix</a></li>
</ul>
<li><a href="#012_string">String</a></li>
<ul>
<li><a href="#Escape sequence">Escape sequence</a></li>
<li><a href="#Raw string">Raw string</a></li>
<li><a href="#Multiline string">Multiline string</a></li>
<li><a href="#Character">Character</a></li>
<li><a href="#@stringof and @nameof">@stringof and @nameof</a></li>
</ul>
<li><a href="#013_variables">Variables</a></li>
<ul>
</ul>
<li><a href="#014_const">Const</a></li>
<ul>
</ul>
<li><a href="#015_operators">Operators</a></li>
<ul>
<li><a href="#Binary operators">Binary operators</a></li>
<li><a href="#Affect operators">Affect operators</a></li>
<li><a href="#Unary operators">Unary operators</a></li>
<li><a href="#Comparison operators">Comparison operators</a></li>
<li><a href="#Logical operators">Logical operators</a></li>
<li><a href="#Ternary operator">Ternary operator</a></li>
<li><a href="#Spaceshift operator">Spaceshift operator</a></li>
<li><a href="#Null-coalescing operator">Null-coalescing operator</a></li>
<li><a href="#Type promotion">Type promotion</a></li>
</ul>
<li><a href="#016_cast">Cast</a></li>
<ul>
</ul>
<li><a href="#020_array">Array</a></li>
<ul>
</ul>
<li><a href="#021_slice">Slice</a></li>
<ul>
<li><a href="#The slicing operator">The slicing operator</a></li>
</ul>
<li><a href="#022_pointers">Pointers</a></li>
<ul>
<li><a href="#Single value pointers">Single value pointers</a></li>
<li><a href="#Multiple values pointers">Multiple values pointers</a></li>
</ul>
<li><a href="#023_references">References</a></li>
<ul>
</ul>
<li><a href="#024_any">Any</a></li>
<ul>
</ul>
<li><a href="#025_tuple">Tuple</a></li>
<ul>
<li><a href="#Tuple unpacking">Tuple unpacking</a></li>
</ul>
<li><a href="#030_enum">Enum</a></li>
<ul>
<li><a href="#Enum as flags">Enum as flags</a></li>
<li><a href="#Enum of arrays">Enum of arrays</a></li>
<li><a href="#Enum of slices">Enum of slices</a></li>
<li><a href="#Enum type inference">Enum type inference</a></li>
</ul>
<li><a href="#031_impl">Impl</a></li>
<ul>
</ul>
<li><a href="#035_namespace">Namespace</a></li>
<ul>
</ul>
<li><a href="#050_if">If</a></li>
<ul>
</ul>
<li><a href="#051_loop">Loop</a></li>
<ul>
</ul>
<li><a href="#052_visit">Visit</a></li>
<ul>
</ul>
<li><a href="#053_for">For</a></li>
<ul>
</ul>
<li><a href="#054_while">While</a></li>
<ul>
</ul>
<li><a href="#055_switch">Switch</a></li>
<ul>
</ul>
<li><a href="#056_break">Break</a></li>
<ul>
</ul>
<li><a href="#060_struct">Struct</a></li>
<ul>
</ul>
<ul>
<li><a href="#061__declaration">Declaration</a></li>
<ul>
</ul>
<li><a href="#062__impl">Impl</a></li>
<ul>
</ul>
<li><a href="#063__special_functions">Special functions</a></li>
<ul>
</ul>
<li><a href="#064__affectation">Affectation</a></li>
<ul>
</ul>
<li><a href="#064__count">Count</a></li>
<ul>
</ul>
<li><a href="#064__post_copy_and_post_move">Post copy and post move</a></li>
<ul>
</ul>
<li><a href="#064__visit">Visit</a></li>
<ul>
</ul>
<li><a href="#067__offset">Offset</a></li>
<ul>
</ul>
<li><a href="#068__packing">Packing</a></li>
<ul>
</ul>
</ul>
<li><a href="#070_union">Union</a></li>
<ul>
</ul>
<li><a href="#075_interface">Interface</a></li>
<ul>
</ul>
<li><a href="#100_function">Function</a></li>
<ul>
</ul>
<ul>
<li><a href="#101__declaration">Declaration</a></li>
<ul>
<li><a href="#Multiple return values">Multiple return values</a></li>
</ul>
<li><a href="#102__lambda">Lambda</a></li>
<ul>
<li><a href="#Anonymous functions">Anonymous functions</a></li>
</ul>
<li><a href="#103__closure">Closure</a></li>
<ul>
</ul>
<li><a href="#104__mixin">Mixin</a></li>
<ul>
</ul>
<li><a href="#105__macro">Macro</a></li>
<ul>
</ul>
<li><a href="#105__variadic_parameters">Variadic parameters</a></li>
<ul>
</ul>
<li><a href="#106__ufcs">Ufcs</a></li>
<ul>
</ul>
<li><a href="#107__constexpr">Constexpr</a></li>
<ul>
</ul>
<li><a href="#108__function_overloading">Function overloading</a></li>
<ul>
</ul>
<li><a href="#109__discard">Discard</a></li>
<ul>
</ul>
<li><a href="#110__retval">Retval</a></li>
<ul>
</ul>
<li><a href="#111__foreign">Foreign</a></li>
<ul>
</ul>
</ul>
<li><a href="#120_compiler_intrinsics">Compiler intrinsics</a></li>
<ul>
<li><a href="#Base">Base</a></li>
<li><a href="#Buildin">Buildin</a></li>
<li><a href="#Memory related">Memory related</a></li>
<li><a href="#Atomic operations">Atomic operations</a></li>
<li><a href="#Math">Math</a></li>
</ul>
<li><a href="#121_init">Init</a></li>
<ul>
<li><a href="#@init">@init</a></li>
<li><a href="#@drop">@drop</a></li>
</ul>
<li><a href="#130_generic">Generic</a></li>
<ul>
</ul>
<ul>
<li><a href="#131__declaration">Declaration</a></li>
<ul>
</ul>
<li><a href="#132__validif">Validif</a></li>
<ul>
<li><a href="#One time evaluation">One time evaluation</a></li>
<li><a href="#Multiple evaluations">Multiple evaluations</a></li>
</ul>
<li><a href="#133__constraint">Constraint</a></li>
<ul>
</ul>
</ul>
<li><a href="#160_scoping">Scoping</a></li>
<ul>
</ul>
<ul>
<li><a href="#161__defer">Defer</a></li>
<ul>
</ul>
<li><a href="#162__using">Using</a></li>
<ul>
<li><a href="#For a function parameter">For a function parameter</a></li>
<li><a href="#For a field">For a field</a></li>
</ul>
<li><a href="#163__with">With</a></li>
<ul>
</ul>
</ul>
<li><a href="#164_alias">Alias</a></li>
<ul>
</ul>
<li><a href="#170_error_management">Error management</a></li>
<ul>
<li><a href="#defer">defer</a></li>
</ul>
<li><a href="#175_safety">Safety</a></li>
<ul>
<li><a href="##[Swag.Safety("overflow", true)]">#[Swag.Safety("overflow", true)]</a></li>
<li><a href="##[Swag.Safety("any", true)]">#[Swag.Safety("any", true)]</a></li>
<li><a href="##[Swag.Safety("boundcheck", true)]">#[Swag.Safety("boundcheck", true)]</a></li>
<li><a href="##[Swag.Safety("math", true)]">#[Swag.Safety("math", true)]</a></li>
<li><a href="##[Swag.Safety("switch", true)]">#[Swag.Safety("switch", true)]</a></li>
<li><a href="##[Swag.Safety("bool", true)]">#[Swag.Safety("bool", true)]</a></li>
<li><a href="##[Swag.Safety("nan", true)]">#[Swag.Safety("nan", true)]</a></li>
</ul>
<li><a href="#180_compiler_declarations">Compiler declarations</a></li>
<ul>
</ul>
<ul>
<li><a href="#181__compile_time_evaluation">Compile time evaluation</a></li>
<ul>
</ul>
<li><a href="#182__special_functions">Special functions</a></li>
<ul>
<li><a href="##test">#test</a></li>
<li><a href="##main">#main</a></li>
<li><a href="##init">#init</a></li>
<li><a href="##drop">#drop</a></li>
<li><a href="##premain">#premain</a></li>
</ul>
<li><a href="#183__run">Run</a></li>
<ul>
</ul>
<li><a href="#184__global">Global</a></li>
<ul>
</ul>
<li><a href="#185__var">Var</a></li>
<ul>
</ul>
</ul>
<li><a href="#190_attributes">Attributes</a></li>
<ul>
</ul>
<ul>
<li><a href="#191__user_attributes">User attributes</a></li>
<ul>
</ul>
<li><a href="#192__predefined_attributes">Predefined attributes</a></li>
<ul>
</ul>
</ul>
<li><a href="#200_type_reflection">Type reflection</a></li>
<ul>
<li><a href="#@decltype">@decltype</a></li>
</ul>
<li><a href="#210_code_inspection">Code inspection</a></li>
<ul>
</ul>
<li><a href="#220_meta_programmation">Meta programmation</a></li>
<ul>
</ul>
<ul>
<li><a href="#221__ast">Ast</a></li>
<ul>
<li><a href="#Struct and enums">Struct and enums</a></li>
<li><a href="#For example">For example</a></li>
<li><a href="#At global scope">At global scope</a></li>
</ul>
<li><a href="#222__compiler_interface">Compiler interface</a></li>
<ul>
</ul>
</ul>
</div>
<div class="right">
<div class="page">
<h1>Swag language reference</h1>

<h2 id="000_introduction">Introduction</h2>
<div>This <code class="incode">swag-lang/swag/bin/reference/language</code> module provides a brief explanation of the language basic syntax and usage without the need of the <b>Swag standard libraries</b> (<code class="incode">Std</code>).</br>
</br>
More advanced features such as dynamic arrays, dynamic strings or hash maps can be found in the <code class="incode">Std.Core</code> module and will not be covered in the examples to come. For now we will focus on the language itself.</br>
</br>
As <code class="incode">reference/language</code> is written as a test module, you can run it with :</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">swag test --workspace:c:/swag-lang/swag/bin/reference
swag test -w:c:/swag-lang/swag/bin/reference</span></code></div><div>This will run all the test modules of the specified workspace (including this one). You can also omit the <code class="incode">--workspace</code> parameter (or <code class="incode">-w</code> in its short form) if you run Swag directly from the workspace folder.</br>
</br>
If you want to compile and run a single module in the workspace, you can specify it with the <code class="incode">--module</code> (<code class="incode">-m</code>) parameter.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">swag test -w:c:/swag-lang/swag/bin/reference -m:test_language</span></code></div><div>Note that as this is a test module, its name is prefixed with <code class="incode">test_</code>.</br>
</div>

<h2 id="001_source">Source</h2>
<div>All source files in Swag have the <code class="incode">.swg</code> extension, except if you write a simple script with the <code class="incode">.swgs</code> extension.</br>
They must be encoded in <b>UTF8</b>.</br>
</br>
In Swag you cannot compile a single file (with the exception of <code class="incode">.swgs</code> script files). The source code is organized in a <b>workspace</b> which contains one or multiple <b>modules</b>.</br>
</br>
For example, the Swag standard library is a collection of modules in the <code class="incode">Std</code> workspace.</br>
</br>
A module is a <code class="incode">dll</code> (under windows) or an executable, and a workspace can include many of them. So a workspace will contain the modules you write (like your main executable) but also all your dependencies (some external modules you use).Typically, the entire workspace is compiled.</br>
</div>

<h2 id="002_comments">Comments</h2>
<div>Let's start with the basics. Swag support classical single-line and multi-line comments.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// Single-line comment</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">/*</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">    Multi-line comment on...</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">    ... multiple lines</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">*/</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// This is a constant with the value '0' assigned to it</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> = </span><span style="color:#6A9955">/* false */</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">true</span></code></div><div>Nested comments are supported.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">/*</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">    /* You can also nest multi-line comments */</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">*/</span></code></div>
<h2 id="003_identifiers">Identifiers</h2>
<div>User identifiers (like variables, constants, function names...) must start with an underscore or an ascii letter. Those identifiers can then contain underscores, ascii letters and digit numbers.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> thisIsAValidIdentifier0   = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> this_is_also_valid        = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> this_1_is_2_also__3_valid = </span><span style="color:#B5CEA8">0</span></code></div><div>But your identifiers cannot start with two underscores. This is reserved by the compiler.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// const __this_is_invalid = 0</span></code></div><div>Note that some identifiers may start with <code class="incode">#</code>. This indicates a <b>compiler special keyword</b>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">#run</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">#main</span></code></div><div></br>
Some identifiers can also start with <code class="incode">@</code>. This indicates an <b>intrinsic</b> function.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">()
</span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">()
</span><span style="color:#F67F56">@sqrt</span><span style="color:#FFFFFF">()</span></code></div><div></div>

<h2 id="004_keywords">Keywords</h2>
<div>This is the list of all keywords in the language.</br>
</br>
<h3 id="Basic types">Basic types</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">typeinfo</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">cstring</span><span style="color:#FFFFFF">
</span><span style="color:#F6CC86">cvarargs</span></code></div><div><h3 id="Language keywords">Language keywords</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">else</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">elif</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">continue</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">fallthrough</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">unreachable</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">for</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">while</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">defer</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">undefined</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">retval</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">ref</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">acast</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">assume</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">try</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">catch</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">union</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">namespace</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">impl</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">private</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">public</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">interface</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">discard</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">dref</span></code></div><div><h3 id="Compiler keywords">Compiler keywords</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#D7BA7D">#arch</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#backend</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#callerfunction</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#callerlocation</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#cfg</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#code</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#file</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#line</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#location</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#module</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#os</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#self</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#swagbuildnum</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#swagos</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#swagrevision</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#swagversion</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#type</span><span style="color:#FFFFFF">
</span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF">

</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#elif</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#else</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#error</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#global</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#if</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#import</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#include</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#load</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#macro</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#placeholder</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#print</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#validifx</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#validif</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#warning</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#scope</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#scopefile</span><span style="color:#FFFFFF">

</span><span style="color:#FF7411">#ast</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">#drop</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">#init</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">#main</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">#message</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">#premain</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">#run</span></code></div><div><h3 id="Intrinsics libc">Intrinsics libc</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#F67F56">@abs</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@acos</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@alloc</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@asin</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@atan</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@atomadd</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@atomand</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@atomcmpxchg</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@atomor</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@atomxchg</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@atomxor</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@bitcountlz</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@bitcountnz</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@bitcounttz</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@byteswap</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@ceil</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@cos</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@cosh</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@cvaarg</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@cvaend</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@cvastart</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@exp</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@exp2</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@floor</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@free</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@log</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@log10</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@log2</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@memcmp</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@memcpy</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@memmove</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@memset</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@muladd</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@pow</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@realloc</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@round</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@sin</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@sinh</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@sqrt</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@strcmp</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@strlen</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@tan</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@tanh</span><span style="color:#FFFFFF">
</span><span style="color:#F67F56">@trunc</span></code></div><div><h3 id="Other intrinsics">Other intrinsics</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@err</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@alias1</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@alias2</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// and more generally @aliasN</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@alignof</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@args</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@breakpoint</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@compiler</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@dataof</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@dbgalloc</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@defined</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@drop</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@compilererror</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@compilerwarning</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@getcontext</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@getpinfos</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@gettag</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@hastag</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@init</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@isbytecode</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@isconstexpr</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@itftableof</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@location</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@mixin0</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@mixin1</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@mixin2</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// and more generally @mixinN</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@mkany</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@mkcallback</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@mkinterface</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@mkslice</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@mkstring</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@decltype</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@modules</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@nameof</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@panic</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@postcopy</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@postmove</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@print</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@rtflags</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@safety</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@setcontext</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@spread</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@stringcmp</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@stringof</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@sysalloc</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@typecmp</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@typeof</span></code></div><div><h3 id="Modifiers">Modifiers</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">,over
,nodrop
,bit
,move
,moveraw</span></code></div><div></div>

<h2 id="005_semicolon">Semicolon</h2>
<div>In Swag, there's no need to end a statement with <code class="incode">;</code> like in C/C++. Most of the time a <code class="incode">end of line</code> is enough.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// Declare two variables x and y of type s32 (signed 32 bits), and initialize them to 1.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// Increment x and y by 1.</span><span style="color:#FFFFFF">
x += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
y += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// When running the tests, @assert will verify that those values are correct.</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)     </span><span style="color:#6A9955">// Verify that x is equal to 2, and raise an error if not.</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == x)     </span><span style="color:#6A9955">// Verify that y is equal to x.</span></code></div><div>The semicolons are not mandatory, but it's possible to use them if you want.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// You can notice that the type of x and y is not specified here. This is due to type inference (we will see that later).</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x, y = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">;

</span><span style="color:#6A9955">// You can also notice the short syntax to do the same operation on multiple variables at once.</span><span style="color:#FFFFFF">
x, y += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">;</span></code></div><div>Semicolons can be usefull if you want to do multiple things on the same line.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> y = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
x += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">; y += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// Two instructions on the same line separated with ';'</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">); </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)</span></code></div>
<h2 id="006_declaration_order">Declaration order</h2>
<div>The order of all <b>top level</b> declarations does not matter.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// Here we declare a constant 'A' and initialize it with 'B', which is not yet known (neither its value or its type).</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> = </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// Declare a constant 'B' equals to 'C', still unknown at this point.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> = </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// Declare a constant C of type 'u64' (unsigned 64 bits integer) and assigned it to 1.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// At this point A and B are then also defined.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span></code></div><div>In this test, we call the function <code class="incode">functionDeclaredLater</code> before it is known. This is fine.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">functionDeclaredLater</span><span style="color:#FFFFFF">()</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">functionDeclaredLater</span><span style="color:#FFFFFF">()
{
}</span></code></div><div>Note that the order is not relevant in the same file, but it is also irrelevant across multiple files. You can for example call a function in one file and declare it in another one. Ordrer does not matter !</br>
</div>

<h2 id="010_basic_types">Basic types</h2>
<div>
</br>
 These are all signed integers types <code class="incode">s8</code>, <code class="incode">s16</code>, <code class="incode">s32</code> and <code class="incode">s64</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF"> = -</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">      </span><span style="color:#6A9955">// 8 bits signed integer</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF"> = -</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// 16 bits signed integer</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> c: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = -</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// 32 bits signed integer</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> d: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF"> = -</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// 64 bits signed integer</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Remember that the instrinsic '@assert' will raise an error at runtime if the enclosed expression is false.</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == -</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == -</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == -</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(d == -</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// The instrinsic '@sizeof' gives the size, in bytes, of a variable.</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)    </span><span style="color:#6A9955">// 'a' has type 's8', so this should be 1 byte.</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(b) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)    </span><span style="color:#6A9955">// 'b' has type 's16', so this should be 2 bytes.</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(c) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(d) == </span><span style="color:#B5CEA8">8</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 These are all unsigned integers types <code class="incode">u8</code>, <code class="incode">u16</code>, <code class="incode">u32</code> and <code class="incode">u64</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">       </span><span style="color:#6A9955">// 8 bits unsigned integer</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">      </span><span style="color:#6A9955">// 16 bits unsigned integer</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> c: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">      </span><span style="color:#6A9955">// 32 bits unsigned integer</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> d: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">      </span><span style="color:#6A9955">// 64 bits unsigned integer</span><span style="color:#FFFFFF">

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(d == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(b) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(c) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(d) == </span><span style="color:#B5CEA8">8</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 These are all floating point types <code class="incode">f32</code> and <code class="incode">f64</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">3.14</span><span style="color:#FFFFFF">       </span><span style="color:#6A9955">// 32 bits floating point value</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">3.14159</span><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// 64 bits floating point value</span><span style="color:#FFFFFF">

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">3.14</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">3.14159</span><span style="color:#FFFFFF">)

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(b) == </span><span style="color:#B5CEA8">8</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 The boolean type <code class="incode">bool</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">      </span><span style="color:#6A9955">// Stored in 1 byte</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// Stored in 1 byte</span><span style="color:#FFFFFF">

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(b) == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 The <code class="incode">string</code> type. Strings are <b>UTF8</b>, and are stored as two 64 bits (the pointer to the value and the string length in bytes). Note that a string literal ends with a null character like in C.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string 是"</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#CE9178">"string 是"</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> * </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(*</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">))
}</span></code></div><div>
</br>
 The <code class="incode">rune</code> type uses the string syntax, postfix with the type <code class="incode">rune</code>. It's a 32 bits unicode code point.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"是"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#CE9178">"是"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
}</span></code></div><div><h3 id="Type reflection">Type reflection</br>
</h3>Swag has <b>type reflection</b> at <b>compile time</b> and at <b>runtime</b>. We will see that later in more details.</br>
</div>
<div>
</br>
 You can use <code class="incode">@decltype</code> to create a type based on an expression.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">                   </span><span style="color:#6A9955">// 'a' is inferred to have the 's32' type</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b: </span><span style="color:#DCDCAA">@decltype</span><span style="color:#FFFFFF">(a) = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// 'b' will have the same type as 'a'</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// We can verify with '@typeof' that 'a' and 'b' have the same type.</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(b))
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// As the types of 'a' and 'b' are known by the compiler, we can use '#assert' instead of '@assert'.</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// The '#assert' will be done at compile time, and will not generate code (unlike '@assert').</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(b)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 Short notice that types are also values, at compile time and at runtime.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)   </span><span style="color:#6A9955">// 'x' is now a variable that contains a type</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)   </span><span style="color:#6A9955">// So it can be compared to a type</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// A type is a predefined struct, which contains some fields to inspect it.</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// You can for example get the name.</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x.name == </span><span style="color:#CE9178">"s32"</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// @typeof is not really necessary when there's no ambiguity about the expression.</span><span style="color:#FFFFFF">
    y := </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="011_number_literals">Number literals</h2>
<div>
</br>
 Integers in <i>decimal</i>, <i>hexadecimal</i> or <i>binary</i> forms.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">123456</span><span style="color:#FFFFFF">           </span><span style="color:#6A9955">// Decimal</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> b: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">x</span><span style="color:#4EC9B0">FFFF</span><span style="color:#FFFFFF">           </span><span style="color:#6A9955">// Hexadecimal, with '0x'</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> c: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">00001111</span><span style="color:#FFFFFF">       </span><span style="color:#6A9955">// Binary, with '0b'</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">123456</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">65535</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#B5CEA8">15</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can separate the digits with the <code class="incode">_</code> character.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">123</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">456</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> b: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">x</span><span style="color:#4EC9B0">F_F_F_F</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> c: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">0000</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">1111</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">123456</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">65</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">535</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#B5CEA8">15</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 The default type of an hexadecimal number or a binary number is <code class="incode">u32</code> or <code class="incode">u64</code> depending on its value.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#6A9955">// The compiler will deduce that the type of 'a' is 'u32'.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">x</span><span style="color:#4EC9B0">FF</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// The compiler will deduce that the type of 'b' is 'u64' because the constant is too big for 32 bits.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> b = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">x</span><span style="color:#4EC9B0">F_FFFFF_FFFFFF</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(b) == </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> c = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">00000001</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(c) == </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> d = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">00000001</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">00000001</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">00000001</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">00000001</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">00000001</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(d) == </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 A boolean is <code class="incode">true</code> or <code class="incode">false</code>. Note again that as constants are known at compile time, we can  use <code class="incode">#assert</code> to check the values.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> b, c = </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> b == </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> c == </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 A floating point value has the usual C/C++ form.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a = </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b = </span><span style="color:#B5CEA8">0.11</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">0.11</span><span style="color:#FFFFFF">)

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> c = </span><span style="color:#B5CEA8">15e2</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#B5CEA8">15e2</span><span style="color:#FFFFFF">)

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> d = </span><span style="color:#B5CEA8">15e</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(d == </span><span style="color:#B5CEA8">15e2</span><span style="color:#FFFFFF">)

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> e = -</span><span style="color:#B5CEA8">1E</span><span style="color:#FFFFFF">-</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(e == -</span><span style="color:#B5CEA8">0.1</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 By default, a floating point value is <code class="incode">f32</code>, not <code class="incode">f64</code> (aka <code class="incode">double</code>) like in C/C++.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a = </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) != </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
}</span></code></div><div><h3 id="Postfix">Postfix</br>
</h3>You can also <b>postfix</b> a literal number by a type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// Declare 'a' to be a 'f64' variable assigned to '1.5'</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a = </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// Here we have the first usage of the 'short declaration form' with ':='.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 'b' is a new variable of type 'u8' initialized with '10'.</span><span style="color:#FFFFFF">
b := </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(b) == </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">

c := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(c) == </span><span style="color:#F6CC86">u32</span></code></div>
<h2 id="012_string">String</h2>
<div>In Swag, strings are encoded in UTF8.</br>
</div>
<div>
</br>
 They also can be compared.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#CE9178">"this is a chinese character: 是"</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a == </span><span style="color:#CE9178">"this is a chinese character: 是"</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> b = </span><span style="color:#CE9178">"this are some cyrillic characters: ӜИ"</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> b == </span><span style="color:#CE9178">"this are some cyrillic characters: ӜИ"</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 A rune is an unicode codepoint, and is 32 bits.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#CE9178">"是"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a == </span><span style="color:#CE9178">"是"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)
}</span></code></div><div>You cannot index a string to get a rune, except in ascii strings. This is because we didn't want the runtime to come with the cost of UTF8 encoding/decoding. But note that the <code class="incode">Std.Core</code> module will have all you need to manipulate UTF8 strings.</br>
</div>
<div>
</br>
 So in that case you will retrieve a byte.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#CE9178">"this is a chinese character: 是"</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Get the first byte of the string</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> b = a[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">]
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> b == </span><span style="color:#CE9178">"t"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(b) == </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Here, the 'X' character in the middle does not have the index '1', because the chinese character before is</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// encoded in UTF8 with more than 1 byte.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> c = </span><span style="color:#CE9178">"是X是"</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> c[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] != </span><span style="color:#CE9178">"X"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// False because the byte number 1 is not the character 'X'</span><span style="color:#FFFFFF">
}</span></code></div><div>Multiple adjacent strings are compiled as one.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#CE9178">"this is "</span><span style="color:#FFFFFF">   </span><span style="color:#CE9178">"a"</span><span style="color:#FFFFFF">   </span><span style="color:#CE9178">" string"</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a == </span><span style="color:#CE9178">"this is a string"</span></code></div><div>You can concatenate some values if the values are known at compile time. Use the <code class="incode">++</code> operator for that.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#CE9178">"the devil number is "</span><span style="color:#FFFFFF"> ++ </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a == </span><span style="color:#CE9178">"the devil number is 666"</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> b = </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> c = </span><span style="color:#CE9178">"the devil number is not "</span><span style="color:#FFFFFF"> ++ (b + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">) ++ </span><span style="color:#CE9178">"!"</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#CE9178">"the devil number is not 667!"</span><span style="color:#FFFFFF">)

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> d = </span><span style="color:#CE9178">"they are "</span><span style="color:#FFFFFF"> ++ </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF"> ++ </span><span style="color:#CE9178">" apples in "</span><span style="color:#FFFFFF"> ++ (</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">*</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">) ++ </span><span style="color:#CE9178">" baskets"</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(d == </span><span style="color:#CE9178">"they are 4 apples in 4 baskets"</span><span style="color:#FFFFFF">)</span></code></div><div>A string can be <code class="incode">null</code> if not defined.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)
a = </span><span style="color:#CE9178">"null"</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a != </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)
a = </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)</span></code></div><div><h3 id="Escape sequence">Escape sequence</br>
</h3>A string and a rune can contain some <i>escape sequences</i> to specify special characters.</br>
</div>
<div>
</br>
 An escape sequence starts with <code class="incode">\</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#CE9178">"this is code ascii 0x00:   \0"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> b = </span><span style="color:#CE9178">"this is code ascii 0x07:   \a"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> c = </span><span style="color:#CE9178">"this is code ascii 0x08:   \b"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> d = </span><span style="color:#CE9178">"this is code ascii 0x09:   \t"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> e = </span><span style="color:#CE9178">"this is code ascii 0x0A:   \n"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> f = </span><span style="color:#CE9178">"this is code ascii 0x0B:   \v"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> g = </span><span style="color:#CE9178">"this is code ascii 0x0C:   \f"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> h = </span><span style="color:#CE9178">"this is code ascii 0x0D:   \r"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> i = </span><span style="color:#CE9178">"this is code ascii 0x22:   \""</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> j = </span><span style="color:#CE9178">"this is code ascii 0x27:   \'"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> k = </span><span style="color:#CE9178">"this is code ascii 0x5C:   \\"</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 An escape sequence can also be used to specify an ascii or a unicode value.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#CE9178">"\x26"</span><span style="color:#FFFFFF">        </span><span style="color:#6A9955">// 1 byte, hexadecimal, extended ascii</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> b = </span><span style="color:#CE9178">"\u2626"</span><span style="color:#FFFFFF">      </span><span style="color:#6A9955">// 2 bytes, hexadecimal, unicode 16 bits</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> c = </span><span style="color:#CE9178">"\U26262626"</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// 4 bytes, hexadecimal, unicode 32 bits</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> d = </span><span style="color:#CE9178">"\u2F46"</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> d == </span><span style="color:#CE9178">"⽆"</span><span style="color:#FFFFFF">
}</span></code></div><div><h3 id="Raw string">Raw string</br>
</h3>A <i>raw string</i> does not transform the escape sequences inside it.</br>
</div>
<div>
</br>
 A raw string starts and ends with the character <code class="incode">@</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#569CD6">@</span><span style="color:#CE9178">"\u2F46"</span><span style="color:#569CD6">@</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a != </span><span style="color:#CE9178">"⽆"</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a == </span><span style="color:#569CD6">@</span><span style="color:#CE9178">"\u2F46"</span><span style="color:#569CD6">@</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 A raw string can be declared on several lines because <code class="incode">eol</code> is now part of the string.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#569CD6">@</span><span style="color:#CE9178">"this is</span><span style="color:#FFFFFF">
</span><span style="color:#CE9178">                a</span><span style="color:#FFFFFF">
</span><span style="color:#CE9178">                string</span><span style="color:#FFFFFF">
</span><span style="color:#CE9178">                "</span><span style="color:#569CD6">@</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Every blanks before the ending mark `"@` will be removed from every other lines, so the string before is equivalent to :</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">//</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// this is</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// a</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// string</span><span style="color:#FFFFFF">
}</span></code></div><div><h3 id="Multiline string">Multiline string</br>
</h3>A multiline string starts and ends with <code class="incode">"""</code>. Unlike raw strings, they still evaluate escape sequences.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#CE9178">"""this is</span><span style="color:#FFFFFF">
</span><span style="color:#CE9178">                 a</span><span style="color:#FFFFFF">
</span><span style="color:#CE9178">                 string</span><span style="color:#FFFFFF">
</span><span style="color:#CE9178">                 """</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Equivalent to :</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// this is</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// a</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// string</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 In a multiline or a raw string, if you end a line with <code class="incode">\</code>, the following <eol> will <b>not</b> be part of the string.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#CE9178">"""\</span><span style="color:#FFFFFF">
</span><span style="color:#CE9178">                 this is</span><span style="color:#FFFFFF">
</span><span style="color:#CE9178">                 a</span><span style="color:#FFFFFF">
</span><span style="color:#CE9178">                 string</span><span style="color:#FFFFFF">
</span><span style="color:#CE9178">                 """</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Is equivalent to :</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// this is</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// a</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// string</span><span style="color:#FFFFFF">
}</span></code></div><div><h3 id="Character">Character</br>
</h3>A single <i>character</i> can be casted to every unsigned integer type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a = </span><span style="color:#CE9178">"0"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">48</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a)== </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">))

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b = </span><span style="color:#CE9178">"1"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">49</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(b)== </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">))

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> c = </span><span style="color:#CE9178">"2"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#B5CEA8">50</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(c)== </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">))

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> d = </span><span style="color:#CE9178">"3"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(d == </span><span style="color:#B5CEA8">51</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(d)== </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">))

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> e = </span><span style="color:#CE9178">"4"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(e == </span><span style="color:#B5CEA8">52</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(e)== </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF">))
}</span></code></div><div><h3 id="@stringof and @nameof">@stringof and @nameof</br>
</h3>You can use the instrinsic <code class="incode">@stringof</code> to return at compile time the result of a constant expression as a string.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">X</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@stringof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">X</span><span style="color:#FFFFFF">) == </span><span style="color:#CE9178">"1"</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@stringof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">X</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">) == </span><span style="color:#CE9178">"11"</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 You can also use <code class="incode">@nameof</code> to return the name of a variable, function etc.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">X</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@nameof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">X</span><span style="color:#FFFFFF">) == </span><span style="color:#CE9178">"X"</span><span style="color:#FFFFFF">
}</span></code></div>
<h2 id="013_variables">Variables</h2>
<div>To declare a variable, use the <code class="incode">var</code> keyword, followed by <code class="incode">:</code> and then the type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#6A9955">// Variable 'a' is of type 'u32' and its value is '1'.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 We have already seen that we can declare multiple variables on the same line.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a, b: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">123</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">123</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">123</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Or</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">12</span><span style="color:#FFFFFF">, b: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">12</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">)
}</span></code></div><div>If you don't assign a value, then the variable will be initialized with its default value (0). So a variable is <b>always</b> initialized.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> c: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)</span></code></div><div>But if you really do not want the variable to be initialized, you can assign it with <code class="incode">undefined</code>. To use with care, of course, but this is sometimes necessary to avoid the initialization cost.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">undefined</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">undefined</span></code></div><div>We have seen that the type is optional in the declaration if it can be deduced from the assignment.</br>
</div>
<div>
</br>
 These are a bunch of <b>type inferences</b>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a = </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(b) == </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> c = </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(c) == </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 The same goes for multiple variables.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a, b = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(b) == </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a)

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> c = </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">, d = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(d == </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(c) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(d) == </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
}</span></code></div><div>And in fact even <code class="incode">var</code> is optional if you use the short form with <code class="incode">:=</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">a := </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">)
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">

b := </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">)
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(b) == </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">

c := </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF">)
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(c) == </span><span style="color:#F6CC86">f64</span></code></div>
<h2 id="014_const">Const</h2>
<div>If you use <code class="incode">const</code> instead of <code class="incode">var</code>, the value must be known by the compiler. There's no memory footprint if the type is a value or a string.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// This are constants and not variables. So they cannot be changed after the declaration.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> b: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> b == </span><span style="color:#CE9178">"string"</span></code></div><div>Constants can have more than just simple types. In that case, there's a memory footprint, because those constants are stored in the data segment. But that means also you could take the address of such constants at runtime.</br>
</div>
<div>
</br>
 This is our first static array. It contains '3' elements, and the type of the elements is <code class="incode">s32</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a: [</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]

    ptr := &a[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] </span><span style="color:#6A9955">// Take the address of the first element</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// But as this is a constant, we can also test the values at compile time.</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> a[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 An example of a multidimensional array as a constant. We will detail arrays later.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">M4x4</span><span style="color:#FFFFFF">: [</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF"> = [
        [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">],
        [</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">],
        [</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">],
        [</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">]
    ]
}</span></code></div>
<h2 id="015_operators">Operators</h2>
<div>These are the basic operators that can be used to manipulate values.</br>
</div>
<div>
</br>
<h3 id="Binary operators">Binary operators</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">

    x = x + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    x = x - </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    x = x * </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    x = x / </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    x = x % </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Modulo</span><span style="color:#FFFFFF">
    x = x ^ </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Xor</span><span style="color:#FFFFFF">
    x = x & </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">0000</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">0001</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Bitmask and</span><span style="color:#FFFFFF">
    x = x | </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">0000</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">0001</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Bitmask or</span><span style="color:#FFFFFF">
    x = x << </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Shift bits left</span><span style="color:#FFFFFF">
    x = x >> </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Shift bits right</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
<h3 id="Affect operators">Affect operators</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">

    x += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    x -= </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    x *= </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    x /= </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    x %= </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    x ^= </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    x |= </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">0000</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">0001</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    x &= </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">0000</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">0001</span><span style="color:#FFFFFF">
    x <<= </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    x >>= </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
<h3 id="Unary operators">Unary operators</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
    x = !x      </span><span style="color:#6A9955">// Invert boolean</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)

    y := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">0000</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">0001</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
    y = ~y      </span><span style="color:#6A9955">// Invert bits</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">1111</span><span style="color:#FFFFFF">_</span><span style="color:#B5CEA8">1110</span><span style="color:#FFFFFF">)

    z := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    z = -z      </span><span style="color:#6A9955">// Negative</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(z == -</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
<h3 id="Comparison operators">Comparison operators</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    a := </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">

    a = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> ? </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF"> : </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    a = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> != </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> ? </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF"> : </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    a = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> <= </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> ? </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF"> : </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    a = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> >= </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> ? </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF"> : </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    a = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> < </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> ? </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF"> : </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    a = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> > </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> ? </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF"> : </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
}

{
    x := </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
    y := </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x != </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x <= </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x < </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x >= </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x > </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
}</span></code></div><div><h3 id="Logical operators">Logical operators</br>
</h3>This is <b>not</b> <code class="incode">&&</code> and <code class="incode">||</code> like in C/C++, but <code class="incode">and</code> and <code class="incode">or</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">a := </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
a = (</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> > </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">) </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> (</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> < </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
a = (</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> > </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">) </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> (</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> < </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)</span></code></div><div><h3 id="Ternary operator">Ternary operator</br>
</h3>The ternary operator will test an expression, and will return a value depending on the result of the test.</br>
<code class="incode">A = Expression ? B : C</code> will return <code class="incode">B</code> if the expression is true, and will return <code class="incode">C</code> if the expression is false.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// Returns 1 because the expression 'true' is... true.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF"> ? </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> : </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// Returns 666 because the expression 'x == 52' is false.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> y = (x == </span><span style="color:#B5CEA8">52</span><span style="color:#FFFFFF">) ? </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> : </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)</span></code></div><div><h3 id="Spaceshift operator">Spaceshift operator</br>
</h3>Operator <code class="incode"><=></code> will return -1, 0 or 1 if the expression on the left is lower, equal or greater than the expression on the right. The returned type is <code class="incode">s32</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> <=> </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == -</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> < </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">
</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> <=> </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">  </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> == </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">
</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> <=> </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">  </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> > </span><span style="color:#4EC9B0">B</span></code></div><div></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    a := -</span><span style="color:#B5CEA8">1.5</span><span style="color:#FFFFFF"> <=> </span><span style="color:#B5CEA8">2.31</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == -</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(-</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> <=>  </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> == -</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">( </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> <=> -</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">( </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> <=>  </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
}

{
    x1 := </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> <=> </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x1 == -</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    x2 := </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF"> <=> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x2 == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    x3 := </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF"> <=> </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x3 == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
}</span></code></div><div><h3 id="Null-coalescing operator">Null-coalescing operator</br>
</h3>The operator <code class="incode">orelse</code> will return the left expression if it is not zero, otherwise it will return the right expression.</br>
</div>
<div>
</br>
 Works with strings, pointers and structures with the <code class="incode">opData</code> special function (we'll see that later).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    a := </span><span style="color:#CE9178">"string1"</span><span style="color:#FFFFFF">
    b := </span><span style="color:#CE9178">"string2"</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// c = a if a is not null, else c = b.</span><span style="color:#FFFFFF">
    c := a </span><span style="color:#D8A0DF">orelse</span><span style="color:#FFFFFF"> b
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#CE9178">"string1"</span><span style="color:#FFFFFF">)

    a = </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">
    c = a </span><span style="color:#D8A0DF">orelse</span><span style="color:#FFFFFF"> b
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == </span><span style="color:#CE9178">"string2"</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Works also for basic types like integers.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    b := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    c := a </span><span style="color:#D8A0DF">orelse</span><span style="color:#FFFFFF"> b
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c == b)
}</span></code></div><div><h3 id="Type promotion">Type promotion</br>
</h3>Unlike C, types are not promoted to 32 bits when dealing with 8 or 16 bits types. But types will be promoted if the two sides of an operation do not have the same type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)  == </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// Priority to bigger type</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)  == </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// Priority to signed type</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">

</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// Priority to bigger type also</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// This means that a 8/16 bits operation (like an addition) can more easily overflow if you do not take care.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// In that case, you can use the ',up' modifier on the operation, which will promote the type to at least 32 bits. The operation will be done accordingly.</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> +,up </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> +,up </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">256</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// No overflow, because the operation is done in 32 bits.</span></code></div>
<h2 id="016_cast">Cast</h2>
<div>Sometimes it's necessary to change the type of a value.</br>
</div>
<div>
</br>
 Use <code class="incode">cast(type)</code> to cast from one type to another.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(x) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">

    y := </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) x
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(y) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Use <code class="incode">acast</code> to automatically cast to the expression on the left.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">acast</span><span style="color:#FFFFFF"> x    </span><span style="color:#6A9955">// cast 'x' to 's32'</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(y) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
}</span></code></div><div>Use <code class="incode">cast,bit</code> to convert a native type to another without converting the value. Works only if the two types are of the same size.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> y: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">,</span><span style="color:#FF7411">bit</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">) x
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">x</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">f</span><span style="color:#B5CEA8">800000</span><span style="color:#FFFFFF">)
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">,</span><span style="color:#FF7411">bit</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">) </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">x</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">f</span><span style="color:#B5CEA8">800000</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">,</span><span style="color:#FF7411">bit</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">) </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">x</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">f</span><span style="color:#B5CEA8">800000</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">1.0</span></code></div><div>Swag can sometimes cast from one type to another for you. This is an <i>implicit</i> cast.</br>
</div>
<div>
</br>
 An implicit cast is done if there's no loss of precision. In that case, you can affect different types.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// 8 bits to 16 bits, fine</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// 16 bits to 32 bits, fine</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// But the following would generate an error as you cannot affect 's16' to 's8' without an explicit cast(s16).</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">/*</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">    var z0: s16 = 1</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">    var z1: s8 = z0</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">    */</span><span style="color:#FFFFFF">
}</span></code></div>
<h2 id="020_array">Array</h2>
<div>Remember that dynamic arrays are part of the <code class="incode">Std.Core</code> module. Here we are only talking about native static arrays.</br>
</div>
<div>
</br>
 A static array is declared with <code class="incode">[N]</code> followed by the type, where <code class="incode">N</code> is the dimension.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// Static array of two s32</span><span style="color:#FFFFFF">
    array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    array[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 You can get the number of elements of an array with <code class="incode">@countof</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(array) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(array) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> * </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can get the address of the array with <code class="incode">@dataof</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    ptr0 := </span><span style="color:#DCDCAA">@dataof</span><span style="color:#FFFFFF">(array)
    ptr0[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// This is equivalent of taking the address of the first element</span><span style="color:#FFFFFF">
    ptr1 := &array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">]
    ptr1[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 An array literal has the form <code class="incode">[A, B, ...]</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    arr := [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">] </span><span style="color:#6A9955">// An array of four s32</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(arr) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(arr) == </span><span style="color:#D7BA7D">#type</span><span style="color:#FFFFFF"> [</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 The size of the array can be deduced from the initialisation expression.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(array) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">

    array1 := [</span><span style="color:#CE9178">"10"</span><span style="color:#FFFFFF">, </span><span style="color:#CE9178">"20"</span><span style="color:#FFFFFF">, </span><span style="color:#CE9178">"30"</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array1[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"10"</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array1[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"20"</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array1[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"30"</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(array1) == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 Like every other types, an array is initialized by default to 0</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 But for speed, you can force the array to be not initialized with <code class="incode">undefined</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [</span><span style="color:#B5CEA8">100</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">undefined</span><span style="color:#FFFFFF">
}</span></code></div><div>Of course an array can have multiple dimensions.</br>
</div>
<div>
</br>
 Syntax is <b>not</b> <code class="incode">[X][Y]</code> like in C/C++, but is <code class="incode">[X, Y]</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    array[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] = </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
    array[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] = </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 The sizes can be deduced from the initialization expression too.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    array  := [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">]
    array1 := [[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">], [</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">]]

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(array) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(array) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 A static array (with compile time values) can be stored as a constant.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> array = [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">]
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// Dereference is done at compile time</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> array[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 If the type of the array is not specified, the type of the first literal value will be used for all other members.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    arr := [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">]    </span><span style="color:#6A9955">// Every values are forced to be 'f64'</span><span style="color:#FFFFFF">

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(arr) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(arr) == </span><span style="color:#D7BA7D">#type</span><span style="color:#FFFFFF"> [</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(arr[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">4.0</span><span style="color:#FFFFFF">)
}</span></code></div><div>You can initialize a whole array variable (but not a constant) with one single value. Only basic types are accepted (integers, float, string, bool, rune).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// The whole array is initialized with 'true'</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> arr: [</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(arr[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(arr[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// The whole array is initialized with 'string'</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> arr1: [</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(arr1[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(arr1[</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">9</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">)</span></code></div>
<h2 id="021_slice">Slice</h2>
<div>A slice is a pointer on a buffer of datas, and a <code class="incode">u64</code> to count the number of elements. Unlike a static array, its value can be changed at runtime.</br>
</div>
<div>
</br>
 It is declared with <code class="incode">[..]</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: [..] </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(*</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">) + </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can initialize a slice like an array.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> [..] </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">50</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a[</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">50</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// But as this is a slice and not a static array, you can change the value at runtime.</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// So now 'a' is a slice of two s32 values.</span><span style="color:#FFFFFF">
    a = [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 At runtime, <code class="incode">@dataof</code> will return the address of the values, <code class="incode">@countof</code> the number of elements.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> [..] </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">50</span><span style="color:#FFFFFF">]
    count := </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(a)
    addr  := </span><span style="color:#DCDCAA">@dataof</span><span style="color:#FFFFFF">(a)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(count == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(addr[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(addr[</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">50</span><span style="color:#FFFFFF">)

    a = [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can create a slice with your own <code class="incode">pointer</code> and <code class="incode">count</code> using <code class="incode">@mkslice</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">]  </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">]

    </span><span style="color:#6A9955">// Creates a slice of 'array' (a view, or subpart) starting at index 2, with 2 elements.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> slice: [..] </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#DCDCAA">@mkslice</span><span style="color:#FFFFFF">(&array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] + </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(slice) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
    slice[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] = </span><span style="color:#B5CEA8">314</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">314</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 For a string, the slice must be <code class="incode">const</code> because a string is immutable.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> str = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> strSlice: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> [..] </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> = </span><span style="color:#DCDCAA">@mkslice</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@dataof</span><span style="color:#FFFFFF">(str), </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(strSlice[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"s"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(strSlice[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"t"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
}</span></code></div><div><h3 id="The slicing operator">The slicing operator</br>
</h3></div>
<div>
</br>
 Instead of <code class="incode">@mkslice</code>, you can slice something with the <code class="incode">..</code> operator. For example you can slice a string.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> str = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> slice = str[</span><span style="color:#B5CEA8">1.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice == </span><span style="color:#CE9178">"tri"</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 The upper limit is <b>included</b> by default. If you want to exclude it, use <code class="incode">..<</code> insteand of <code class="incode">..</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> str = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> slice = str[</span><span style="color:#B5CEA8">1.</span><span style="color:#FFFFFF">.<</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice == </span><span style="color:#CE9178">"tr"</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can omit the upper bound if you want to slice to the end.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> str = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> slice = str[</span><span style="color:#B5CEA8">2.</span><span style="color:#FFFFFF">.]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice == </span><span style="color:#CE9178">"ring"</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can omit the lower bound if you want to slice from the start (0).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> str = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> slice = str[..</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]        </span><span style="color:#6A9955">// Index 2 is included</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice == </span><span style="color:#CE9178">"str"</span><span style="color:#FFFFFF">)
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> slice1 = str[..<</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]      </span><span style="color:#6A9955">// Index 2 is excluded</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice1 == </span><span style="color:#CE9178">"st"</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can also slice an array.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    arr := [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">]
    slice := arr[</span><span style="color:#B5CEA8">2.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(slice) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)

    slice1 := arr[..]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(slice1) == </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(arr))
}</span></code></div><div>
</br>
 You can slice another slice.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    arr := [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">]
    slice1 := arr[</span><span style="color:#B5CEA8">1.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice1[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice1[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice1[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)

    slice2 := slice1[</span><span style="color:#B5CEA8">1.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice2[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice2[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can transform a pointer to a slice.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    arr := [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">]
    ptr := &arr[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
    slice := ptr[</span><span style="color:#B5CEA8">0.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(slice[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(slice) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="022_pointers">Pointers</h2>
<div><h3 id="Single value pointers">Single value pointers</br>
</h3></div>
<div>
</br>
 A pointer to a <b>single element</b> is declared with <code class="incode">*</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> ptr1: *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// This is a pointer to one single 'u8'</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> ptr2: **</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// This is a pointer to one other pointer to one single 'u8'</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 A pointer can be <code class="incode">null</code> (i know some of you will collapse here).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> ptr1: *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr1 == </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can take the address of something with <code class="incode">&</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    arr := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    ptr := &arr </span><span style="color:#6A9955">// Take the address of the variable 'arr'</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(ptr) == *</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can get the pointed value with <code class="incode">dref</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    arr := </span><span style="color:#B5CEA8">42</span><span style="color:#FFFFFF">
    ptr := &arr
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">dref</span><span style="color:#FFFFFF"> ptr == </span><span style="color:#B5CEA8">42</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Pointers can be <code class="incode">const</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    str := </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> ptr: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> = </span><span style="color:#DCDCAA">@dataof</span><span style="color:#FFFFFF">(str)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">dref</span><span style="color:#FFFFFF"> ptr == </span><span style="color:#CE9178">"s"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can be weird, but is this necessary ?</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> ptr:  *</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">        </span><span style="color:#6A9955">// Normal pointer to a const pointer</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> ptr1: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// Const pointer to a const pointer</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> ptr2: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> **</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">        </span><span style="color:#6A9955">// Const pointer to a normal pointer</span><span style="color:#FFFFFF">
}</span></code></div><div><h3 id="Multiple values pointers">Multiple values pointers</br>
</h3>If you want to enable <b>pointer arithmetic</b>, and make a pointer to <b>multiple values</b>, declare your pointer with <code class="incode">^</code> instead of <code class="incode">*</code>.</br>
</div>
<div>
</br>
 <code class="incode">ptr</code> is a pointer to a memory block of <code class="incode">u8</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> ptr: ^</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
    ptr = ptr - </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Pointer arithmetic is now possible</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 Taking the address of an array element enables pointer arithmetic.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: [</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    ptr := &x[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">]
    ptr = ptr - </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(ptr) == ^</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 As pointer arithmetic is enabled, you can dereference that kind of pointer by index.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    arr := [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">]
    ptr := &arr[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(ptr) == ^</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// The type of 'ptr' is ^s32, so it can be dereferenced by index</span><span style="color:#FFFFFF">
    value1 := ptr[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value1 == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(value1) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">

    value2 := ptr[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value2 == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(value2) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// But 'dref' still works for the first element</span><span style="color:#FFFFFF">
    value := </span><span style="color:#569CD6">dref</span><span style="color:#FFFFFF"> ptr
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(value) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
}</span></code></div>
<h2 id="023_references">References</h2>
<div>Swag has also <b>references</b>, which are pointers that behave like values.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := </span><span style="color:#B5CEA8">42</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// Use 'ref' to declare a reference.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// Here we declare a reference to the variable 'x'.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// Note that unlike C++, you have to take the address of 'x' to convert it to a reference.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> myRef: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">ref</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = &x

</span><span style="color:#6A9955">// This is a pointer that behaves like a value, so no explicit dereferencing is necessary.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// You can see this as a kind of an alias.</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myRef == </span><span style="color:#B5CEA8">42</span><span style="color:#FFFFFF">)</span></code></div><div>When an affectation is done outside of an initialization, you will change the pointed value, and not the reference itself.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := </span><span style="color:#B5CEA8">42</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> myRef: </span><span style="color:#569CD6">ref</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = &x </span><span style="color:#6A9955">// Note here that the reference is no more 'const'</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myRef == </span><span style="color:#B5CEA8">42</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// Here we will change the pointed value 'x'</span><span style="color:#FFFFFF">
myRef = </span><span style="color:#B5CEA8">66</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myRef == </span><span style="color:#B5CEA8">66</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// Remember that 'myRef' is an alias for 'x', so 'x' has also been changed.</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">66</span><span style="color:#FFFFFF">)</span></code></div><div>If you want to change the reference and not the pointed value, you can use <code class="incode">ref</code> in the affectation.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
y := </span><span style="color:#B5CEA8">1000</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> myRef: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">ref</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = &x
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myRef == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// Here we force 'myRef' to point to 'y' and not to 'x' anymore.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// We do *NOT* change the value of 'x'.</span><span style="color:#FFFFFF">
myRef = </span><span style="color:#569CD6">ref</span><span style="color:#FFFFFF"> &y
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myRef == </span><span style="color:#B5CEA8">1000</span><span style="color:#FFFFFF">)</span></code></div><div>Most of the time, you have to take the address of a variable to make a reference to it. The only exception are function parameters, if the reference is <code class="incode">const</code>. In that case, taking the address is not necessary</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// We can pass a literal because the parameter 'x' of 'toto' is 'const ref' and not just 'ref'.</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">(x: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">ref</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Under the hood, you will get a const address to an 's32'</span><span style="color:#FFFFFF">
    ptr := &x
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">dref</span><span style="color:#FFFFFF"> ptr == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
}</span></code></div><div>This is usefull for structs for examples, as you can directly pass a literal to a function.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF"> {x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">; y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">; }  </span><span style="color:#6A9955">// Our first little struct !</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">titi0</span><span style="color:#FFFFFF">({</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">})
</span><span style="color:#FF7411">titi1</span><span style="color:#FFFFFF">({</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">})
</span><span style="color:#FF7411">titi2</span><span style="color:#FFFFFF">({</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">})</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">titi0</span><span style="color:#FFFFFF">(param: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">ref</span><span style="color:#FFFFFF"> {</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">})
{
    </span><span style="color:#6A9955">// We'll see later about tuples and naming of fields.</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(param.item0 == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(param.item1 == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>Note that declaring a tuple type or a struct type is equivalent to a constant reference.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">titi1</span><span style="color:#FFFFFF">(param: {x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">})
{
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(param.x == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(param.y == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
}

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">titi2</span><span style="color:#FFFFFF">(param: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(param.x == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(param.y == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="024_any">Any</h2>
<div><code class="incode">any</code> is a specific type that can store every other types. <code class="incode">any</code> is <b>not a variant</b>. It's a dynamic typed reference to an existing value.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Store a s32</span><span style="color:#FFFFFF">
    a = </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Then store a string instead</span><span style="color:#FFFFFF">
    a = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Then store a bool instead</span><span style="color:#FFFFFF">
    a = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 <code class="incode">any</code> is in fact a pointer to the value, and a <code class="incode">typeinfo</code>. <code class="incode">@dataof</code> can be used to retrieve the pointer to the value.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    ptr := </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">@dataof</span><span style="color:#FFFFFF">(a)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">dref</span><span style="color:#FFFFFF"> ptr == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 <code class="incode">@typeof</code> will give you the type <code class="incode">any</code>, but <code class="incode">@kindof</code> will give you the real underlying type. In that case, <code class="incode">@kindof</code> is evaluted at runtime.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">)

    a = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(a) == </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can declare an array with multiple types, with <code class="incode">any</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [] </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF"> = [</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3.0</span><span style="color:#FFFFFF">, </span><span style="color:#CE9178">"4"</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">)

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">3.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"4"</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 An <code class="incode">any</code> can be set to null, and tested against null.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)
    x = </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x != </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">)
    x = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x != </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">)
    x = </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="025_tuple">Tuple</h2>
<div>
</br>
 A tuple is an anonymous structure, aka a struct literal. Syntax is <code class="incode">{}</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    tuple1 := {</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">}
    tuple2 := {</span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">}
}</span></code></div><div>
</br>
 Tuple values have default names to access them, in the form of <code class="incode">itemX</code> where <code class="incode">X</code> is the field rank.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    tuple := {</span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">}
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.item0 == </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.item1 == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.item2 == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 But you can specify your own names.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    tuple := {x: </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">, y: </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">}
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.x == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.item0 == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.y == </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.item1 == </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 A tuple is an expression, where names of fields can be omitted. But the automatic name <code class="incode">itemX</code> is always valid.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> tuple: {x: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">, </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">}
    tuple.x = </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.x == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.item0 == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.item1 == </span><span style="color:#B5CEA8">0.0</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 When creating a tuple literal with variables, the tuple fields will take the name of the variables (except if specified).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">
    y := </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
    t := {x, y}
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(t.x == </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(t.item0 == t.x)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(t.y == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(t.item1 == t.y)
}</span></code></div><div>
</br>
 Even if two tuples do not have the same field names, they can be assigned to each other if the field types are the same.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: {a: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, b: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">}
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> y: {c: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, d: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">}

    y = {</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">}
    x = y
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x.a == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x.b == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// But note that 'x' and 'y' to not have the same type</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(x) != </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(y)
}</span></code></div><div><h3 id="Tuple unpacking">Tuple unpacking</br>
</h3></div>
<div>
</br>
 You can unpack a tuple field by field.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    tuple1 := {x: </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">, y: </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">}

    </span><span style="color:#6A9955">// 'value0' will be assigned with 'x', and 'value1' will be assigned with 'y'.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> (value0, value1) = tuple1
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value0 == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value1 == </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">)

    tuple2 := {</span><span style="color:#CE9178">"name"</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">}
    (name, value) := tuple2
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(name == </span><span style="color:#CE9178">"name"</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can ignore a tuple field by naming the variable <code class="incode">?</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    tuple1 := {x: </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">, y: </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">}
    (x, ?) := tuple1
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
    (?, y) := tuple1
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="030_enum">Enum</h2>
<div>
</br>
 Enums values, unlike C/C++, must end with <code class="incode">;</code> or an <code class="incode">eol</code> (like a normal Swag declaration).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">
    }
}</span></code></div><div>
</br>
 By default, an enum is of type <code class="incode">s32</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }
    type := </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// 'type' here is a 'typeinfo' dedicated to the enum type.</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// In that case, 'type.rawType' is the enum underlying type.</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(type.rawType == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">) == </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 <code class="incode">@kindof</code> will return the underlying type of the enum.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">) == </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">) != </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 You can specify your own type after the enum name.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values1</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Forced to be 's64' instead of 's32'</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Values1</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Values1</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">) == </span><span style="color:#4EC9B0">Values1</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 Enum values, if not specified, start at 0 and are increased by 1 at each new value.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 You can specify your own values.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 If you omit one value, it will be assigned to the previous value + 1.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// 11</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// 12</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">11</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">12</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 For non integer types, you <b>must</b> specify the values as they cannot be deduced.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value1</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string 1"</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string 2"</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string 3"</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value1</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> == </span><span style="color:#CE9178">"string 1"</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value1</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#CE9178">"string 2"</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value1</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> == </span><span style="color:#CE9178">"string 3"</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value2</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">3.14</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value2</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value2</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">3.14</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value2</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 <code class="incode">@countof</code> returns the number of values of an enum.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string 1"</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string 2"</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string 3"</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 You can use the keyword <code class="incode">using</code> for an enum.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// No need to say 'Value.A' thanks to the 'using' above</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// But the normal form is still possible</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div><h3 id="Enum as flags">Enum as flags</br>
</h3>An enum can be a set of flags if you declare it with the <code class="incode">#[Swag.EnumFlags]</code> <b>attribute</b>. Its type should be <code class="incode">u8</code>, <code class="incode">u16</code>, <code class="incode">u32</code> or <code class="incode">u64</code>.</br>
</br>
That kind of enum starts by default at 1, and not 0, and each value should be a power of 2.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.EnumFlags]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
{
    </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// First value is 1 and *not* 0</span><span style="color:#FFFFFF">
    </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// Value is 2</span><span style="color:#FFFFFF">
    </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// Value is 4</span><span style="color:#FFFFFF">
    </span><span style="color:#4EC9B0">D</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// Value is 8</span><span style="color:#FFFFFF">
}

</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">00000001</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">00000010</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">00000100</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">D</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">00001000</span><span style="color:#FFFFFF">

value := </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> | </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">b</span><span style="color:#B5CEA8">00000110</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value & </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> == </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value & </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> == </span><span style="color:#4EC9B0">MyFlags</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF">)</span></code></div><div><h3 id="Enum of arrays">Enum of arrays</br>
</h3>You can have an enum of const static arrays.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> [</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
{
    </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
    </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">]
}

</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">20</span></code></div><div><h3 id="Enum of slices">Enum of slices</br>
</h3>You can have an enum of const slices.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> [..] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
{
    </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
    </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">]
}

</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">

x := </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
y := </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)</span></code></div><div><h3 id="Enum type inference">Enum type inference</br>
</h3></div>
<div>
</br>
 The type of the enum is not necessary in the assignement expression when declaring a variable.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }

    </span><span style="color:#6A9955">// The normal form</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF"> = </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// But in fact 'Values' is not necessary because it can be deduced</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> y: </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF"> = </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == y)
}</span></code></div><div>
</br>
 The enum type is not necessary in a <code class="incode">case</code> expression of a <code class="incode">switch</code> block (it is deduced from the switch expression).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }
    x := </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// The 'normal' form</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> x
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">: </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">: </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#6A9955">// The 'simplified' form</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> x
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">: </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">: </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    }
}</span></code></div><div>
</br>
 In an expression, and if the enum name can be deduced, you can omit it and use the <code class="incode">.Value</code> syntax.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }

    </span><span style="color:#6A9955">// The normal form</span><span style="color:#FFFFFF">
    x := </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// The simplified form, because 'Values' can be deduced from type of x</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == .</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x != .</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Works also for flags.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.EnumFlags]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }

    x := </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF"> | </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">((x & .</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">) </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> (x & .</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">))
}</span></code></div><div>
</br>
 Works also (most of the time), for functions.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">(v1, v2: </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">) {}
    </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">(.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">, .</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">)
}</span></code></div><div>By type reflection, you can loop/visit all values of an enum.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }

    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> idx: </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
        cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)

    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> val: </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> val
        {
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF">:     </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">:     </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">:     </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">:    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
        }
    }
}</span></code></div>
<h2 id="031_impl">Impl</h2>
<div><code class="incode">impl</code> can be used to declare some stuff in the scope of an enum. The keyword <code class="incode">self</code> represents the enum value.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }</span></code></div><div>Note the <code class="incode">impl enum</code> syntax. We'll see later that <code class="incode">impl</code> is also used for structs.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isRed</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">)       => </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF"> == </span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isRedOrBlue</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">) => </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF"> == </span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF"> == </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">isRed</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF">))
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">isRedOrBlue</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">))

</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">isRedOrBlue</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF">))
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">isRedOrBlue</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">))

</span><span style="color:#6A9955">// A first look at 'ufcs' (uniform function call syntax)</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">isRedOrBlue</span><span style="color:#FFFFFF">())
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(!</span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">isRedOrBlue</span><span style="color:#FFFFFF">())</span></code></div>
<h2 id="035_namespace">Namespace</h2>
<div>You can create a global scope with a namespace. All symbols inside the namespace will be in the corresponding global scope.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">namespace</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">a</span><span style="color:#FFFFFF">() => </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
}</span></code></div><div>You can also specify more than one name. Here <code class="incode">C</code> will be a namespace inside <code class="incode">B</code> which is itself inside <code class="incode">A</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">namespace</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">a</span><span style="color:#FFFFFF">() => </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">a</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">a</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)</span></code></div><div>You can also put <code class="incode">using</code> in front of the namespace to be able to access the content without scoping in the <b>current</b> file.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">namespace</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Private</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">FileSymbol</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF"> = </span><span style="color:#4EC9B0">Private</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">FileSymbol</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">C</span><span style="color:#FFFFFF"> = </span><span style="color:#4EC9B0">FileSymbol</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// No need to specify 'Private' because of the 'using'</span></code></div><div>This is equivalent to <code class="incode">#scopefile</code>, but you don't have to specify a name, the compiler will generate it for you.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#scopefile</span><span style="color:#FFFFFF"> {
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">OtherSymbol</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">D</span><span style="color:#FFFFFF"> = </span><span style="color:#4EC9B0">OtherSymbol</span></code></div><div>All symbols from a Swag source file are exported to other files of the same module. So using <code class="incode">#scopefile</code> can protect from name conflicts.</br>
</div>

<h2 id="050_if">If</h2>
<div>A basic test with <code class="incode">if</code>. Curlies are optional. The expression doesn't need to be enclosed with <code class="incode">()</code> unlike C/C++.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
</span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> (a == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)

</span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF"> {
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// 'else' is of course also a thing</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
        a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">else</span><span style="color:#FFFFFF">
        a += </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// 'elif' is equivalent to 'else if'</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">else</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">elif</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">elif</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Boolean expression with 'and' and 'or'</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
}</span></code></div><div>You can also at the same time declare and test one variable in an <code class="incode">if</code> expression. <code class="incode">var</code> or <code class="incode">const</code> is mandatory in that case.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// This will declare a variable 'a', and test if against 0.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 'a' is then only visible in the 'if' block, and not outside.</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
{
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
}

</span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> a = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
{
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
}
</span><span style="color:#D8A0DF">else</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)</span></code></div>
<h2 id="051_loop">Loop</h2>
<div><code class="incode">loop</code> are used to iterate a given amount of time.</br>
</div>
<div>
</br>
 The loop expression value is evaluated <b>once</b>, and must be a positive value.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Loops 10 times</span><span style="color:#FFFFFF">
        cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 The intrinsic <code class="incode">@index</code> returns the current index of the loop (starting at 0).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
    {
        cpt += </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can name that index if you want.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt  := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    cpt1 := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">

    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> i: </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// index is named 'i'</span><span style="color:#FFFFFF">
    {
        cpt  += i
        cpt1 += </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// @index is always available, even when named</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt  == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt1 == cpt)
}</span></code></div><div><code class="incode">loop</code> can be used on every types that accept the <code class="incode">@countof</code> intrinsic. So you can loop on a slice, an array, a string... and we'll see later, even on a struct.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">arr := [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">]
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(arr) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">

cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> arr    </span><span style="color:#6A9955">// The array contains 4 elements, so the loop count is 4</span><span style="color:#FFFFFF">
    cpt += arr[</span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">]
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)</span></code></div><div><b>Warning !</b></br>
On a string, it will loop for each byte, <b>not</b> runes (if a rune is encoded in more than one byte). If you want to iterate on all runes, you will have to use the <code class="incode">Std.Core</code> module.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"⻘"</span><span style="color:#FFFFFF">
    cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// cpt is equal to 3 because '⻘' is endoded with 3 bytes</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)</span></code></div><div><code class="incode">break</code> and <code class="incode">continue</code> can be used inside a loop.</br>
</div>
<div>
</br>
 You can exit a loop with <code class="incode">break</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> x: </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> x == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
        cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can force to return to the loop evaluation with <code class="incode">continue</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> x: </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> x == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">continue</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Do not count 5</span><span style="color:#FFFFFF">
        cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">9</span><span style="color:#FFFFFF">)
}</span></code></div><div>Loop can also be used to iterate on a range of signed values.</br>
</div>
<div>
</br>
 Syntax is <code class="incode">lower bound..upper bound</code></br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    count := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    sum   := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> i: -</span><span style="color:#B5CEA8">1.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// loop from -1 to 1, all included</span><span style="color:#FFFFFF">
    {
        count += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        sum += i
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(sum == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(count == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 With a range, you can loop in reverse order.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#6A9955">// Loop from 5 to 0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">5.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    {
    }

    </span><span style="color:#6A9955">// Loop from 1 to -1</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">1.</span><span style="color:#FFFFFF">.-</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    {
    }
}</span></code></div><div>
</br>
 You can exclude the last value with the <code class="incode">..<</code> syntax.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#6A9955">// Will loop from 1 to 2 and **not** 1 to 3</span><span style="color:#FFFFFF">
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> i: </span><span style="color:#B5CEA8">1.</span><span style="color:#FFFFFF">.<</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
    {
        cpt += i
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>A loop without an expression but with a block is infinite. This is equivalent to <code class="incode">while true {}</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF">
{
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// @index is still valid in that case (but cannot be renamed)</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
}</span></code></div>
<h2 id="052_visit">Visit</h2>
<div>
</br>
 <code class="incode">visit</code> is used to visit all the elements of a collection.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> value: </span><span style="color:#CE9178">"ABC"</span><span style="color:#FFFFFF">
    {
        a := </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> a
        {
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value == </span><span style="color:#CE9178">"A"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value == </span><span style="color:#CE9178">"B"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value == </span><span style="color:#CE9178">"C"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
        }
    }
}</span></code></div><div>
</br>
 You can name both the value and the loop index, in that order.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> value, index: </span><span style="color:#CE9178">"ABC"</span><span style="color:#FFFFFF">
    {
        a := index
        </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> a
        {
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value == </span><span style="color:#CE9178">"A"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value == </span><span style="color:#CE9178">"B"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value == </span><span style="color:#CE9178">"C"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
        }
    }
}</span></code></div><div>
</br>
 Both names are optional. In that case, you can use <code class="incode">@alias0</code> and <code class="incode">@alias1</code>. <code class="incode">@alias0</code> for the value, and <code class="incode">@alias1</code> for the index</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"ABC"</span><span style="color:#FFFFFF">
    {
        a := </span><span style="color:#DCDCAA">@alias1</span><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// This is the index</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> a
        {
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> == </span><span style="color:#CE9178">"A"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> == </span><span style="color:#CE9178">"B"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> == </span><span style="color:#CE9178">"C"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)
        }
    }
}</span></code></div><div>
</br>
 You can visit arrays or slices.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    array := [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">]

    result := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> it: array
        result += it

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(result == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Works also for multi dimensional arrays.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = [[</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">], [</span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">]]

    result := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> it: array
        result += it

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(result == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can visit with a pointer to the value, and not the value itself, by adding <code class="incode">&</code> before the value name.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> array: [</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = [[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">], [</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">]]

    result := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> &it: array
    {
        result += </span><span style="color:#569CD6">dref</span><span style="color:#FFFFFF"> it
        </span><span style="color:#569CD6">dref</span><span style="color:#FFFFFF"> it = </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(result == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(array[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="053_for">For</h2>
<div>
</br>
 <code class="incode">for</code> accepts a <i>start statement</i>, an <i>expression to test</i>, and an <i>ending statement</i>. This is in fact the same as the C/C++ <code class="incode">for</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">for</span><span style="color:#FFFFFF"> i := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; i < </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">; i += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// ';' can be replaced by a newline (like always)</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">for</span><span style="color:#FFFFFF"> i := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
        i < </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        i += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    {
        cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Instead of one single expression, you can use a statement</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">for</span><span style="color:#FFFFFF"> { i := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; cpt = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; }
        i < </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        i += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    {
        cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)

    </span><span style="color:#D8A0DF">for</span><span style="color:#FFFFFF"> { i := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; cpt = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; }
        i < </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        { i += </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">; i -= </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">; }
    {
        cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Like <code class="incode">loop</code> and <code class="incode">while</code>, you have access to <code class="incode">@index</code>, the <b>current loop index</b>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">for</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> i: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">; i < </span><span style="color:#B5CEA8">15</span><span style="color:#FFFFFF">; i += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        cpt += </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)

    cpt1 := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">for</span><span style="color:#FFFFFF"> i := </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">; i < </span><span style="color:#B5CEA8">15</span><span style="color:#FFFFFF">; i += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        cpt1 += </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt1 == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="054_while">While</h2>
<div>
</br>
 <code class="incode">while</code> is a loop that runs <b>until the expression is false</b>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    i := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">while</span><span style="color:#FFFFFF"> i < </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        i += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(i == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can also <code class="incode">break</code> and <code class="incode">continue</code> inside a <code class="incode">while</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    i := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">while</span><span style="color:#FFFFFF"> i < </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> i == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
        i += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(i == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="055_switch">Switch</h2>
<div>
</br>
 <code class="incode">switch</code> works like in C/C++, except that no <code class="incode">break</code> is necessary (except if the <code class="incode">case</code> is empty). That means that there's no automatic <code class="incode">fallthrough</code> from one case to another.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    value := </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> value
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">:  </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">:  </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">:  </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }

    ch := </span><span style="color:#CE9178">"A"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> ch
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"B"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"A"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">rune</span><span style="color:#FFFFFF">: </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    }
}</span></code></div><div>
</br>
 You can put multiple values on the same <code class="incode">case</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    value := </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> value
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">:   </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">:        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> value
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">,
         </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">,
         </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">:
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">:
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }
}

</span><span style="color:#6A9955">// `switch` works with every types that accept the `==` operator.</span></code></div><div>
</br>
 So you can switch on strings for example.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    value := </span><span style="color:#CE9178">"myString"</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> value
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"myString"</span><span style="color:#FFFFFF">:    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"otherString"</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">:            </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }
}</span></code></div><div>
</br>
 If you want to pass from one case to another like in C/C++, use <code class="incode">fallthrough</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    value := </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> value
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">:
        </span><span style="color:#D8A0DF">fallthrough</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">7</span><span style="color:#FFFFFF">:
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">:
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    }
}</span></code></div><div>
</br>
 <code class="incode">break</code> can be used to exit the current <code class="incode">case</code> statement.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    value := </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> value
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">:
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> value == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">:
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }
}</span></code></div><div>
</br>
 A <code class="incode">case</code> statement cannot be empty. Use <code class="incode">break</code> if you want to do nothing.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    value := </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> value
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">:     </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">:     </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">:    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }
}

</span><span style="color:#6A9955">// `switch` can be marked with `Swag.Complete` to force all the cases to be covered.</span></code></div><div>
</br>
 If one or more values are missing, an error will be raised by the compiler.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Color</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">Red</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">Green</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">Blue</span><span style="color:#FFFFFF">; }
    color := </span><span style="color:#4EC9B0">Color</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">Red</span><span style="color:#FFFFFF">

    </span><span style="color:#AAAAAA">#[Swag.Complete]</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> color
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Color</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">Red</span><span style="color:#FFFFFF">:     </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Color</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">Green</span><span style="color:#FFFFFF">:   </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Color</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">Blue</span><span style="color:#FFFFFF">:    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }
}</span></code></div><div>
</br>
 If the switch expression is omitted, then it will behave like a serie of if/else, resolved in order.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    value  := </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    value1 := </span><span style="color:#CE9178">"true"</span><span style="color:#FFFFFF">

    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF">
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> value == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> value == </span><span style="color:#B5CEA8">7</span><span style="color:#FFFFFF">:
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">fallthrough</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> value1 == </span><span style="color:#CE9178">"true"</span><span style="color:#FFFFFF">:
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">:
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }
}</span></code></div><div>
</br>
 When used on an <code class="incode">any</code> variable, switch is done on the underlying variable type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"value"</span><span style="color:#FFFFFF">

    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> x
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">: </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">default</span><span style="color:#FFFFFF">:     </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }
}</span></code></div><div>
</br>
 A <code class="incode">switch</code> can also be used with a (constant) range of values.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    success := </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    x := </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> x
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">:  </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">6.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">15</span><span style="color:#FFFFFF">: success = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(success)
}</span></code></div><div>
</br>
 If they overlap, the first valid range will be used.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    success := </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    x := </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> x
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">:  success = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">5.</span><span style="color:#FFFFFF">.<</span><span style="color:#B5CEA8">15</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(success)
}</span></code></div><div>
</br>
 A <code class="incode">case</code> expression doesn't need to be constant, except if the switch is marked with <code class="incode">Swag.Complete</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    test := </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    b := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> test
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> a:     </span><span style="color:#6A9955">// Test with a variable</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> b:     </span><span style="color:#6A9955">// Test with a variable</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> b + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">: </span><span style="color:#6A9955">// Test with an expression</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    }
}</span></code></div>
<h2 id="056_break">Break</h2>
<div>
</br>
 <code class="incode">break</code> is used to exit a loop, while, for, switch.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">for</span><span style="color:#FFFFFF"> i := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; i < </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">; i += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">while</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 By default, <code class="incode">break</code> will exit the parent scope only.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        {
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// Exit the inner loop...</span><span style="color:#FFFFFF">
        }

        </span><span style="color:#6A9955">// ...and continue execution here</span><span style="color:#FFFFFF">
        cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 But you can name a scope with the <code class="incode">scope</code> keyword, and exit to the end of it with a <code class="incode">break</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#scope</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">BigScope</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        {
            cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">BigScope</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// Break to the outer scope...</span><span style="color:#FFFFFF">
        }

        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#6A9955">// ...and continue execution here</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 When used with a scope, a continue is a way to go back to the start of the scope.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#scope</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Loop</span><span style="color:#FFFFFF">
    {
        cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> cpt == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">continue</span><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// Loop</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You are not obliged to name the scope, so this can also be used (for example) as an alternative of a bunch of if/else.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#scope</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> cpt == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        {
            </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
        }

        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> cpt == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
        {
            </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
        }

        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> cpt == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
        {
            </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
        }
    }
}</span></code></div><div>
</br>
 Note that a scope can be followed by a simple statement, not always a block.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#scope</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Up</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        {
            </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
                </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Up</span><span style="color:#FFFFFF">
        }

        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
    }
}</span></code></div>
<h2 id="060_struct">Struct</h2>

<h3 id="061__declaration">Declaration</h3>
<div>
</br>
 This is a <code class="incode">struct</code> declaration. <code class="incode">var</code> is not necessary for the fields.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    {
        name: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">
    {
        x:      </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
        y, z:   </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
        val:    </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
        myS:    </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    }
}</span></code></div><div>
</br>
 A struct can be anonymous when declared as a variable type. Unlike tuples, syntax should be the same as for named structs.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> tuple: </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    }
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> tuple1: </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF">{x, y: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">; }

    tuple.x = </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
    tuple.y = </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.x == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(tuple.y == </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">)
}

{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    {
        rgb: </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> {x, y, z: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">; }
        hsl: </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> {h, s, l: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">; }
    }
}</span></code></div><div>
</br>
 You can initialize a struct variable in different ways.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    {
        x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#6A9955">// Default values</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v0: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v0.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v0.y == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Init in the order of the fields</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v1: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">{</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">}
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v1.x == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v1.y == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Named field</span><span style="color:#FFFFFF">
    v2 := </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">{y: </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">}
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v2.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v2.y == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// With a tuple</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v3: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF"> = {</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">}
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v3.x == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v3.y == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 The fields of a struct can be initialized at the declaration.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">    = </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"454"</span><span style="color:#FFFFFF">
    }

    v := </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">{}
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.x == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#CE9178">"454"</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 A struct can be affected to a constant, as long as it can be evaluated at compile time.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">    = </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"454"</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">X</span><span style="color:#FFFFFF">: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">{</span><span style="color:#B5CEA8">50</span><span style="color:#FFFFFF">, </span><span style="color:#CE9178">"value"</span><span style="color:#FFFFFF">}
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">X</span><span style="color:#FFFFFF">.x == </span><span style="color:#B5CEA8">50</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">X</span><span style="color:#FFFFFF">.y == </span><span style="color:#CE9178">"value"</span><span style="color:#FFFFFF">
}</span></code></div><div>A function can take an argument of type <code class="incode">struct</code>. No copy is done (this is equivalent to a const reference in C++).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Struct3</span><span style="color:#FFFFFF">
{
    x, y, z: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">(v: </span><span style="color:#4EC9B0">Struct3</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.x == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.z == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
}

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">titi</span><span style="color:#FFFFFF">(v: </span><span style="color:#4EC9B0">Struct3</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// Call with a struct literal</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Struct3</span><span style="color:#FFFFFF">{</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">})

</span><span style="color:#6A9955">// Type can be deduced from the argument</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">({</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">})

</span><span style="color:#6A9955">// You can also just specify some parts of the struct, in the declaration order of the fields</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">titi</span><span style="color:#FFFFFF">({</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">})      </span><span style="color:#6A9955">// Initialize x, which is the first field</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">titi</span><span style="color:#FFFFFF">({</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">}) </span><span style="color:#6A9955">// Initialize x and y</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// You can also name the fields, and omit some of them</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">titi</span><span style="color:#FFFFFF">({x: </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, z: </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">}) </span><span style="color:#6A9955">// Here y will stay to the default value, which is 666</span></code></div>
<h3 id="062__impl">Impl</h3>
<div>Like for an enum, <code class="incode">impl</code> is used to declare some stuff in the scope of a struct.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.ExportType("methods")]</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// See later, used to export 'methods' in type reflection</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
    x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
    y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    z: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyConst</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">returnTrue</span><span style="color:#FFFFFF">() => </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">returnTrue</span><span style="color:#FFFFFF">())
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">MyConst</span><span style="color:#FFFFFF">)</span></code></div><div>You can have multiple <code class="incode">impl</code> blocks. The difference with a namespace is that <code class="incode">self</code> and <code class="incode">Self</code> are defined inside an impl block. They refere to the corresponding type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#6A9955">// 'self' is an alias for 'var self: Self'</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">returnX</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">) => x
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">returnY</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">)       => </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">.y
    </span><span style="color:#6A9955">// 'Self' is the corresponding type, in that case 'MyStruct'</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">returnZ</span><span style="color:#FFFFFF">(me: </span><span style="color:#F6CC86">Self</span><span style="color:#FFFFFF">)   => me.z
}</span></code></div><div>If you declare your function with <code class="incode">mtd</code> (method) instead of <code class="incode">func</code>, then the first parameter is forced to be <code class="incode">using self</code>.</br>
If you declare your function with <code class="incode">mtdc</code> (method const) instead of <code class="incode">func</code>, then the first parameter is forced to be <code class="incode">const using self</code>.</br>
Other than that, it's exactly the same. So this is just <b>syntaxic sugar</b> to avoid repeating the <code class="incode">using self</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF">  </span><span style="color:#FF7411">methodReturnX</span><span style="color:#FFFFFF">()          => x
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">funcReturnX</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">)  => x
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> c: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c.</span><span style="color:#FF7411">returnX</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c.</span><span style="color:#FF7411">methodReturnX</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c.</span><span style="color:#FF7411">funcReturnX</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c.</span><span style="color:#FF7411">returnY</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(c.</span><span style="color:#FF7411">returnZ</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)</span></code></div><div>All functions in an impl block can be retrieved by reflection, as long as the struct is declared with <code class="incode">#[Swag.ExportType("methods")]</code> (by default, methods are not exported).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// Creates a type alias named 'Lambda'</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Lambda</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> fnX: </span><span style="color:#4EC9B0">Lambda</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> fnY: </span><span style="color:#4EC9B0">Lambda</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> fnZ: </span><span style="color:#4EC9B0">Lambda</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// The 'typeinfo' of a struct contains a field 'methods' which is a slice</span><span style="color:#FFFFFF">
t := </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">)
</span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> p: t.methods
{
    </span><span style="color:#6A9955">// When visiting 'methods', the 'value' field contains the function pointer,</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// which can be casted to the correct type</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> p.name
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"returnX"</span><span style="color:#FFFFFF">: fnX = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Lambda</span><span style="color:#FFFFFF">) p.value
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"returnY"</span><span style="color:#FFFFFF">: fnY = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Lambda</span><span style="color:#FFFFFF">) p.value
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"returnZ"</span><span style="color:#FFFFFF">: fnZ = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Lambda</span><span style="color:#FFFFFF">) p.value
    }
}

</span><span style="color:#6A9955">// This are now valid functions, which can be called</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">fnX</span><span style="color:#FFFFFF">(v) == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">fnY</span><span style="color:#FFFFFF">(v) == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">fnZ</span><span style="color:#FFFFFF">(v) == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)</span></code></div>
<h3 id="063__special_functions">Special functions</h3>
<div>A struct can have special operations in the <code class="incode">impl</code> block. This operations are predefined, and known by the compiler.This is the way to go to <b>overload operators</b> for example.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">
{
    x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">OneType</span><span style="color:#FFFFFF">      = </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">AnotherType</span><span style="color:#FFFFFF">  = </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">WhateverType</span><span style="color:#FFFFFF"> = </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#6A9955">// Called each time a variable needs to be dropped</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// This is the destructor in C++</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opDrop</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">) {}

    </span><span style="color:#6A9955">// Called after a raw copy operation from one value to another</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opPostCopy</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">) {}

    </span><span style="color:#6A9955">// Called after a move semantic operation from one value to another. We'll see that later.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opPostMove</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">) {}

    </span><span style="color:#6A9955">// Get value by slice [low..up]</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Must return a string or a slice</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opSlice</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, low, up: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"true"</span><span style="color:#FFFFFF">; }

    </span><span style="color:#6A9955">// Get value by index</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opIndex</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, index: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#4EC9B0">WhateverType</span><span style="color:#FFFFFF"> { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">; }

    </span><span style="color:#6A9955">// Called by @countof</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Use in a 'loop' block for example</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opCount</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">          { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; }
    </span><span style="color:#6A9955">// Called by @dataof</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opData</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">)->*</span><span style="color:#4EC9B0">WhateverType</span><span style="color:#FFFFFF">  { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">; }

    </span><span style="color:#6A9955">// Called for explicit/implicit casting between struct value and return type</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Can be overloaded by a different return type</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Example: x := cast(OneType) v</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opCast</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">)-></span><span style="color:#4EC9B0">OneType</span><span style="color:#FFFFFF">      { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">; }
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opCast</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">)-></span><span style="color:#4EC9B0">AnotherType</span><span style="color:#FFFFFF">  { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; }

    </span><span style="color:#6A9955">// Called to compare the struct value with something else</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Can be overloaded</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Returns true if they are equal, otherwise returns false</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Called by '==', '!='</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opEquals</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, other: </span><span style="color:#4EC9B0">OneType</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">      { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">; }
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opEquals</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, other: </span><span style="color:#4EC9B0">AnotherType</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">  { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">; }

    </span><span style="color:#6A9955">// Called to compare the struct value with something else</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Can be overloaded</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Returns -1, 0 or 1</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Called by '<', '>', '<=', '>=', '<=>'</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opCmp</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, other: </span><span style="color:#4EC9B0">OneType</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">      { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; }
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opCmp</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, other: </span><span style="color:#4EC9B0">AnotherType</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">  { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; }

    </span><span style="color:#6A9955">// Affect struct with another value</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Can be overloaded</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Called by '='</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opAffect</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, other: </span><span style="color:#4EC9B0">OneType</span><span style="color:#FFFFFF">) {}
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opAffect</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, other: </span><span style="color:#4EC9B0">AnotherType</span><span style="color:#FFFFFF">) {}

    </span><span style="color:#6A9955">// Affect struct with a literal value with a specified suffix</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Generic function, can be overloaded</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Called by '='</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(suffix: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opAffectSuffix</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, value: </span><span style="color:#4EC9B0">OneType</span><span style="color:#FFFFFF">) {}
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(suffix: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opAffectSuffix</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, value: </span><span style="color:#4EC9B0">AnotherType</span><span style="color:#FFFFFF">) {}

    </span><span style="color:#6A9955">// Affect struct with another value at a given index</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Can be overloaded</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Called by '[] ='</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opIndexAffect</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, index: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">, value: </span><span style="color:#4EC9B0">OneType</span><span style="color:#FFFFFF">) {}
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opIndexAffect</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, index: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">, value: </span><span style="color:#4EC9B0">AnotherType</span><span style="color:#FFFFFF">) {}

    </span><span style="color:#6A9955">// Binary operator. 'op' generic argument contains the operator string</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Generic function, can be overloaded</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Called by '+', '-', '*', '/', '%', '|', '&', '^', '<<', '>>'</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(op: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opBinary</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, other: </span><span style="color:#4EC9B0">OneType</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">Self</span><span style="color:#FFFFFF">     { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> {</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">}; }
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(op: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opBinary</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, other: </span><span style="color:#4EC9B0">AnotherType</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">Self</span><span style="color:#FFFFFF"> { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> {</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">}; }

    </span><span style="color:#6A9955">// Unary operator. 'op' generic argument contains the operator string (see below)</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Generic function</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Called by '!', '-', '~'</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(op: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opUnary</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">Self</span><span style="color:#FFFFFF"> { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> {</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">}; }

    </span><span style="color:#6A9955">// Affect operator. 'op' generic argument contains the operator string (see below)</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Generic function, can be overloaded</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Called by '+=', '-=', '*=', '/=', '%=', '|=', '&=', '^=', '<<=', '>>='</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(op: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opAssign</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, other: </span><span style="color:#4EC9B0">OneType</span><span style="color:#FFFFFF">) {}
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(op: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opAssign</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, other: </span><span style="color:#4EC9B0">AnotherType</span><span style="color:#FFFFFF">)  {}

    </span><span style="color:#6A9955">// Affect operator. 'op' generic argument contains the operator string (see below)</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Generic function, can be overloaded</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Called by '+=', '-=', '*=', '/=', '%=', '|=', '&=', '^=', '<<=', '>>='</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(op: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opIndexAssign</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, index: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">, value: </span><span style="color:#4EC9B0">OneType</span><span style="color:#FFFFFF">) {}
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(op: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opIndexAssign</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, index: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">, value: </span><span style="color:#4EC9B0">AnotherType</span><span style="color:#FFFFFF">) {}

    </span><span style="color:#6A9955">// Called by a 'visit' block</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Can have multiple versions, by adding a name after 'opVisit'</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// This is the way to go for iterators</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(ptr: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opVisit</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, stmt: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">) {}
        </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(ptr: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">opVisitWhatever</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, stmt: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">) {}
        </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(ptr: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">opVisitAnother</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, stmt: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">) {}
    }
}</span></code></div>
<h3 id="064__affectation">Affectation</h3>
<div><code class="incode">opAffect</code> is a way of assigning to a struct with <code class="incode">=</code>.</br>
You can have more the one opAffect with different types.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">
{
    x, y, z: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opAffect</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)  { x, y = value; }
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opAffect</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) { x, y = value ? </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> : </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">; }
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// This will initialize v and then call opAffect(s32) with '4'</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v: </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.x == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
</span><span style="color:#6A9955">// Note that variable 'v' is also initiliazed with the default values.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// So here 'z' is still 666.</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.z == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// This will call opAffect(bool) with 'true'</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v1: </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v1.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v1.y == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// This will call opAffect(bool) with 'false'</span><span style="color:#FFFFFF">
v1 = </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v1.x == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v1.y == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)</span></code></div><div>If <code class="incode">opAffect</code> is supposed to initialize the full content of the struct, you can add <code class="incode">#[Swag.Complete]</code>. This will avoid every variables to be initialized to the default values, then changed later with the <code class="incode">opAffect</code> call.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#AAAAAA">#[Swag.Complete]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opAffect</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)  { x, y, z = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) value; }

    </span><span style="color:#6A9955">// For later</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#[Swag.Implicit]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opAffect</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)  { x, y = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) value; }
}</span></code></div><div>Here the variable <code class="incode">v</code> will not be initialized prior to the affectation. This is more optimal, as there's only one initialization.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v: </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.x == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.z == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">(v: </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.x == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.z == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
}

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">titi</span><span style="color:#FFFFFF">(v: </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
}

</span><span style="color:#6A9955">// By default, there's no automatic conversion for a function argument, so you must cast.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// Here, this will create a 'Struct' on the stack, initialized with a call to 'opAffect(s32)'</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">) </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// But if opAffect is marked with #[Swag.Implicit], automatic conversion can occur.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// No need for an explicit cast.</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)</span></code></div><div>A structure can be converted to a constant by a call to opAffect if the function is marked with <code class="incode">Swag.ConstExpr</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Vector2</span><span style="color:#FFFFFF">
{
    x, y: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Vector2</span><span style="color:#FFFFFF">
{
    </span><span style="color:#AAAAAA">#[Swag.ConstExpr]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opAffect</span><span style="color:#FFFFFF">(one: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)
    {
        x, y = one
    }
}

</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">One</span><span style="color:#FFFFFF">: </span><span style="color:#4EC9B0">Vector2</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// This will call opAffect(1.0) at compile time</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">One</span><span style="color:#FFFFFF">.x == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">One</span><span style="color:#FFFFFF">.y == </span><span style="color:#B5CEA8">1.0</span></code></div>
<h3 id="064__count">Count</h3>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
}

</span><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opCount</span><span style="color:#FFFFFF">() => </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">v := </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">{}

</span><span style="color:#6A9955">// '@countof' will call 'opCount'</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(v) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// You can then loop on a struct value if 'opCount' has been defined</span><span style="color:#FFFFFF">
cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> v
    cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">

</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)</span></code></div>
<h3 id="064__post_copy_and_post_move">Post copy and post move</h3>
<div>Swag accepts copy and move semantics for structures. In this examples, we use a <code class="incode">Vector3</code> to illustrate, even if of course that kind of struct does not need a move semantic, as there's no heap involved.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">
{
    x, y, z: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">
{
    </span><span style="color:#6A9955">// This is used for 'copy semantic'.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opPostCopy</span><span style="color:#FFFFFF">()
    {
        x, y, z += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#6A9955">// This is used for 'move semantic'.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opPostMove</span><span style="color:#FFFFFF">()
    {
        x, y, z += </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#6A9955">// Just imagine that we have something to drop. Like a memory allocated buffer.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">opDrop</span><span style="color:#FFFFFF">()
    {
    }
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">a := </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">{}
b := </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">{</span><span style="color:#B5CEA8">100</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">200</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">300</span><span style="color:#FFFFFF">}

</span><span style="color:#6A9955">// "copy semantic". The default behaviour.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 1. This will call 'opDrop' on 'a' if the function exists because 'a' could be already assigned.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 2. This will raw copy 'b' to 'a'.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 3. This will call 'opPostCopy' on 'a' if it exists.</span><span style="color:#FFFFFF">
a = b
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a.x == </span><span style="color:#B5CEA8">101</span><span style="color:#FFFFFF">)     </span><span style="color:#6A9955">// +1 because of the call to opPostCopy</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a.y == </span><span style="color:#B5CEA8">201</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a.z == </span><span style="color:#B5CEA8">301</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// "move semantic"</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 1. This will call 'opDrop' on 'a' if it exists</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 2. This will raw copy 'b' to 'a'</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 3. This will call 'opPostMove' on 'a' if it exists</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 4. This will reinitialize 'b' to its default values if 'opDrop' exists</span><span style="color:#FFFFFF">
a =,move b
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a.x == </span><span style="color:#B5CEA8">102</span><span style="color:#FFFFFF">)     </span><span style="color:#6A9955">// +2 because of the call to opPostMove</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a.y == </span><span style="color:#B5CEA8">202</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a.z == </span><span style="color:#B5CEA8">302</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// 'Vector3' contains an 'opDrop' special function, so 'b' will be reinitialized to</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// the default values after the 'move'. Default values are 666.</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b.x == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// If you know what you're doing, you can avoid the first call to 'opDrop' with '=,nodrop'</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// Do it when you know the state of 'a' and do not want an extra unnecessary call</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// (for example if 'a' is in an undetermined state).</span><span style="color:#FFFFFF">

a =,nodrop b            </span><span style="color:#6A9955">// Copy b to a without dropping 'a' first</span><span style="color:#FFFFFF">
a =,nodrop,move b       </span><span style="color:#6A9955">// Move b to a without dropping 'a' first</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// For the 'move semantic', you can avoid the last reinitialization by using '=,moveraw'. Of source, do this at your own risk, if you know that 'b' will never by dropped by the compiler or if you reinitialize its state yourself.</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// instead of '=,move'</span><span style="color:#FFFFFF">
a =,moveraw b
a =,nodrop,moveraw b</span></code></div><div><code class="incode">moveref</code> can be used instead of <code class="incode">ref</code> in a function parameter to declare a move semantic intention.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// This is the 'move' version of 'assign'. With 'moveref', we tell the compiler that this version will take the owership on 'from'.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">assign</span><span style="color:#FFFFFF">(to: </span><span style="color:#569CD6">ref</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">, from: </span><span style="color:#569CD6">moveref</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">)
{
    to =,move from
}

</span><span style="color:#6A9955">// This is the normal 'copy' version. In this version, 'from' will not be changed, that's why it's constant (not a ref).</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">assign</span><span style="color:#FFFFFF">(to: </span><span style="color:#569CD6">ref</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">, from: </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">)
{
    to = from
}

a := </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">{</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">}
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> b: </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// Call the 'copy' version of 'assign'.</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">assign</span><span style="color:#FFFFFF">(&b, a)
</span><span style="color:#6A9955">// As this will call 'opPostCopy', we have +1 on each field.</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b.x == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> b.y == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> b.z == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
</span><span style="color:#6A9955">// 'a' remains unchanged</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> a.y == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> a.z == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// Now we tell the compiler to use the 'moveref' version of 'assign'.</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">assign</span><span style="color:#FFFFFF">(&b, </span><span style="color:#569CD6">moveref</span><span style="color:#FFFFFF"> &a)
</span><span style="color:#6A9955">// As 'opPostMove' has been called, we have +2 on each field.</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b.x == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> b.y == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> b.z == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
</span><span style="color:#6A9955">// And as this is a move, then 'a' is now reinitialized to its default values.</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a.x == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> a.y == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> a.z == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)</span></code></div>
<h3 id="064__visit">Visit</h3>
<div>You can visit a struct value if a macro <code class="incode">opVisit</code> has been defined. This is the equivalent of an <b>iterator</b>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
    x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">
    z: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(ptr: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">opVisit</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">, stmt: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#6A9955">// 'ptr' is a generic parameter that tells if we want to visit by pointer.</span><span style="color:#FFFFFF">
        </span><span style="color:#6A9955">// We do not use it in this example.</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#if</span><span style="color:#FFFFFF"> ptr </span><span style="color:#AAAAAA">#error</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"visiting myStruct by pointer is not supported"</span><span style="color:#FFFFFF">

        </span><span style="color:#6A9955">// Loop on the 3 fields</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> idx: </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
        {
            </span><span style="color:#6A9955">// The '#macro' force its body to be in the scope of the caller</span><span style="color:#FFFFFF">
            </span><span style="color:#AAAAAA">#macro</span><span style="color:#FFFFFF">
            {
                </span><span style="color:#6A9955">// @alias0 will be the value</span><span style="color:#FFFFFF">
                </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">undefined</span><span style="color:#FFFFFF">

                </span><span style="color:#6A9955">// As this code is in the caller scope, with need to add a #up before 'idx' to reference the</span><span style="color:#FFFFFF">
                </span><span style="color:#6A9955">// variable of this function (and not a potential variable in the caller scope)</span><span style="color:#FFFFFF">
                </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> idx
                {
                </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> = </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">.x   </span><span style="color:#6A9955">// Same for function parameter 'self'</span><span style="color:#FFFFFF">
                </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> = </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">.y
                </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> = </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">.z
                }

                </span><span style="color:#6A9955">// @alias1 will be the index</span><span style="color:#FFFFFF">
                </span><span style="color:#DCDCAA">@alias1</span><span style="color:#FFFFFF"> := </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">

                </span><span style="color:#6A9955">// include user code</span><span style="color:#FFFFFF">
                </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> stmt
            }
        }
    }
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">myStruct := </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">{}
cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// Visiting each field in declaration order</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 'v' is an alias for @alias0 (value)</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// 'i' is an alias for @alias1 (index)</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> v, i: myStruct
{
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> i
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
    }

    cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
}

</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)</span></code></div><div>You can have variants of <code class="incode">opVisit</code> by specifying an <b>additional name</b>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF">(ptr: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">opVisitReverse</span><span style="color:#FFFFFF">(stmt: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">)   </span><span style="color:#6A9955">// We add 'Reverse' in the name</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#6A9955">// Visit fields in reverse order (z, y then x)</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> idx: </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
        {
            </span><span style="color:#AAAAAA">#macro</span><span style="color:#FFFFFF">
            {
                </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">undefined</span><span style="color:#FFFFFF">
                </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> idx
                {
                </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> = </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">.z
                </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> = </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">.y
                </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> = </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">self</span><span style="color:#FFFFFF">.x
                }

                </span><span style="color:#DCDCAA">@alias1</span><span style="color:#FFFFFF"> := </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">
                </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> stmt
            }
        }
    }
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">myStruct := </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">{}
cpt := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// To call a variant, add the extra name between parenthesis.</span><span style="color:#FFFFFF">
</span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Reverse</span><span style="color:#FFFFFF">) v, i: myStruct
{
    </span><span style="color:#D8A0DF">switch</span><span style="color:#FFFFFF"> i
    {
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
    </span><span style="color:#D8A0DF">case</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">: </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    }

    cpt += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
}

</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)</span></code></div>
<h3 id="067__offset">Offset</h3>
<div>
</br>
 You can force the layout of a field with the <code class="incode">Swag.Offset</code> attribute.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">

        </span><span style="color:#6A9955">// 'y' is located at the same offset as 'x', so they share the same space</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#[Swag.Offset("x")]</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">
    v := </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">{}
    v.x = </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// As 'y' and 'x' are sharing the same space, affecting to 'x' also affects to 'y'.</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 An example to reference a field by index.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    {
        x, y, z:    </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">

        </span><span style="color:#AAAAAA">#[Swag.Offset("x")]</span><span style="color:#FFFFFF">
        idx:        [</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    v.x = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">; v.y = </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">; v.z = </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.idx[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == v.x)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.idx[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == v.y)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.idx[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] == v.z)
}</span></code></div>
<h3 id="068__packing">Packing</h3>
<div>You can also control the struct layout with two attributes: <code class="incode">#[Swag.Pack]</code> and <code class="incode">#[Swag.Align]</code>.</br>
</div>
<div>
</br>
 The default struct packing is the same as in C: each field is aligned to the size of the type. This is the equivalent of <code class="incode">#[Swag.Pack(0)]</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// offset 0: aligned to 1 byte</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">      </span><span style="color:#6A9955">// offset 4: s32 is aligned to 4 bytes (so here there's 3 bytes of padding before)</span><span style="color:#FFFFFF">
        z: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">      </span><span style="color:#6A9955">// offset 8: aligned to 8 bytes</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#6A9955">// '@offsetof' can be used to retrieve the offset of a field</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">.x) == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">.y) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">.z) == </span><span style="color:#B5CEA8">8</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">)     == </span><span style="color:#B5CEA8">16</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 You can <i>reduce</i> the packing of the fields with <code class="incode">#[Swag.Pack]</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Pack(1)]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// offset 0: 1 byte</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// offset 1: 4 bytes (no padding)</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">.x) == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">.y) == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">)     == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">

    </span><span style="color:#AAAAAA">#[Swag.Pack(2)]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct2</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// offset 0: 1 byte</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// offset 2: 4 bytes (1 byte of padding before)</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct2</span><span style="color:#FFFFFF">.x) == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct2</span><span style="color:#FFFFFF">.y) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct2</span><span style="color:#FFFFFF">)     == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">

    </span><span style="color:#AAAAAA">#[Swag.Pack(4)]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct3</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// offset 0: 1 byte</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// offset 4: 8 bytes (3 bytes of padding before)</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct3</span><span style="color:#FFFFFF">.x) == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct3</span><span style="color:#FFFFFF">.y) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct3</span><span style="color:#FFFFFF">)     == </span><span style="color:#B5CEA8">12</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 The total struct size is always a multiple of the biggest alignement of the fields.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// 4 bytes</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// 1 byte</span><span style="color:#FFFFFF">
        </span><span style="color:#6A9955">// 3 bytes of padding because of 'x', to aligned on 's32'</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">8</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 You can force the struct alignement with <code class="incode">#[Swag.Align]</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// 1 byte</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// 1 byte</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">.x) == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">.y) == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">)     == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">

    </span><span style="color:#AAAAAA">#[Swag.Align(8)]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct2</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// 1 byte</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// 1 byte</span><span style="color:#FFFFFF">
        </span><span style="color:#6A9955">// 6 bytes of padding to be a multiple of '8'</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct2</span><span style="color:#FFFFFF">.x) == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct2</span><span style="color:#FFFFFF">.y) == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct2</span><span style="color:#FFFFFF">)     == </span><span style="color:#B5CEA8">8</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 You can also force each field to be aligned on a specific value.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// offset 0: 1 byte</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#[Swag.Align(8)]</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// offset 8: aligned to 8 (7 bytes of padding before)</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct1</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">9</span><span style="color:#FFFFFF">

    </span><span style="color:#AAAAAA">#[Swag.Align(8)]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct2</span><span style="color:#FFFFFF">
    {
        x: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// offset 0: 1 byte</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#[Swag.Align(4)]</span><span style="color:#FFFFFF">
        y: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// offset 4: aligned to 4 (3 bytes of padding before)</span><span style="color:#FFFFFF">
        </span><span style="color:#6A9955">// 3 bytes of padding to be a multiple of 8</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyStruct2</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">8</span><span style="color:#FFFFFF">
}</span></code></div>
<h2 id="070_union">Union</h2>
<div>An union is just a struct where all fields are located at offset 0.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">union</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyUnion</span><span style="color:#FFFFFF">
    {
        x, y, z: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    }

    v := </span><span style="color:#4EC9B0">MyUnion</span><span style="color:#FFFFFF">{x: </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">}
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.z == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="075_interface">Interface</h2>
<div>Interfaces are <b>virtual tables</b> (a list of function pointers) that can be associated to a struct.</br>
</br>
Unlike c++, the virtual table is not embedded with the struct. It is a separate object.</br>
You can then <i>implement</i> an interface for a given struct without changing the struct definition.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point2</span><span style="color:#FFFFFF">
{
    x, y: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point3</span><span style="color:#FFFFFF">
{
    x, y, z: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
}</span></code></div><div>Here we declare an interface, with two functions <code class="incode">set</code> and <code class="incode">reset</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">interface</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">
{
    </span><span style="color:#6A9955">// You must declare a lambda variable for each "virtual" function.</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// As the first parameter is always 'self', you can either declare it</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// yourself or use 'mtd/mtdc'</span><span style="color:#FFFFFF">
    set: </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// You can also use the normal "func/mtd/mtdc" declaration.</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// The compiler will then create the table entry for you.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">reset</span><span style="color:#FFFFFF">()
}</span></code></div><div>You can implement an interface for any given struct with <code class="incode">impl</code> and <code class="incode">for</code>.</br>
For example here, we implement interface <code class="incode">IReset</code> for struct <code class="incode">Point2</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">for</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point2</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">set</span><span style="color:#FFFFFF">(val: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)
    {
        x = val
        y = val+</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">reset</span><span style="color:#FFFFFF">()
    {
        x, y = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    }
}</span></code></div><div>And we implement interface <code class="incode">IReset</code> also for struct <code class="incode">Point3</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">for</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point3</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">set</span><span style="color:#FFFFFF">(val: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)
    {
        x = val
        y = val+</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        z = val+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">reset</span><span style="color:#FFFFFF">()
    {
        x, y, z = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    }
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt2: </span><span style="color:#4EC9B0">Point2</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt3: </span><span style="color:#4EC9B0">Point3</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// To get the interface associated to a given struct, use the 'cast' operator.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// If the compiler does not find the corresponding implementation, it will raise an error.</span><span style="color:#FFFFFF">
itf := </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">) pt2
itf.</span><span style="color:#FF7411">set</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt2.x == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt2.y == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

itf = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">) pt3
itf.</span><span style="color:#FF7411">set</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt3.x == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt3.y == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt3.z == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
itf.</span><span style="color:#FF7411">reset</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt3.x == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> pt3.y == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// You can also access, with a normal call, all functions declared in an interface</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// implementation block for a given struct.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// They are located in a dedicated scope.</span><span style="color:#FFFFFF">
pt2.</span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">set</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
pt2.</span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">reset</span><span style="color:#FFFFFF">()
pt3.</span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">set</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
pt3.</span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">reset</span><span style="color:#FFFFFF">()

</span><span style="color:#6A9955">// An interface is a real type, with a size equivalent to 2 pointers</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(itf) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> * </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(*</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// You can retrieve the concrete type associated with an interface instance with '@kindof'</span><span style="color:#FFFFFF">
itf = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">) pt2
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(itf) == </span><span style="color:#4EC9B0">Point2</span><span style="color:#FFFFFF">)
itf = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">) pt3
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(itf) == </span><span style="color:#4EC9B0">Point3</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// You can retrieve the concrete data associated with an interface instance with '@dataof'</span><span style="color:#FFFFFF">
itf = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">) pt2
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@dataof</span><span style="color:#FFFFFF">(itf) == &pt2)
itf = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">IReset</span><span style="color:#FFFFFF">) pt3
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@dataof</span><span style="color:#FFFFFF">(itf) == &pt3)</span></code></div>
<h2 id="100_function">Function</h2>

<h3 id="101__declaration">Declaration</h3>
<div>A function declaration usually starts with the <code class="incode">func</code> keyword followed by the function name.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">()
{
}</span></code></div><div>If the function needs to return a value, you must add <code class="incode">-></code> followed by the type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toto1</span><span style="color:#FFFFFF">()-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
{
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
}</span></code></div><div>The return type can be deduced in case of a simple expression, by using <code class="incode">=></code> instead of <code class="incode">-></code>.</br>
Here the return type will be deduced to be <code class="incode">s32</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x + y</span></code></div><div>A short version exists, in case of a function returning nothing.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">print</span><span style="color:#FFFFFF">(val: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) = </span><span style="color:#DCDCAA">@print</span><span style="color:#FFFFFF">(val)</span></code></div><div>Parameters are specified after the function name, between parenthesis.</br>
Here we declare two parameters <code class="incode">x</code> and <code class="incode">y</code> of type <code class="incode">s32</code>, and one last parameter of type <code class="incode">f32</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum1</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, unused: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
{
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> x + y
}</span></code></div><div>Parameters can have default values.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum2</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, unused: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
{
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> x + y
}</span></code></div><div>The type of the parameters can be deduced if you specify a default value.</br>
Here <code class="incode">x</code> and <code class="incode">y</code> have the type <code class="incode">f32</code> because <code class="incode">0.0</code> is a 32 bits floating point literal.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum3</span><span style="color:#FFFFFF">(x, y = </span><span style="color:#B5CEA8">0.0</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(x) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(y) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, y = </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(y) == </span><span style="color:#4EC9B0">Values</span><span style="color:#FFFFFF">
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// Functions can be nested inside other functions. This are not closure but just functions in a sub scope.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sub</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x - y</span></code></div><div>
</br>
 Simple call.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := </span><span style="color:#FF7411">sub</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div><div>You can name parameters, and don't have to respect parameters order in that case.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sub</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x - y

{
    x1 := </span><span style="color:#FF7411">sub</span><span style="color:#FFFFFF">(x: </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, y: </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x1 == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
    x2 := </span><span style="color:#FF7411">sub</span><span style="color:#FFFFFF">(y: </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, x: </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x2 == -</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}

{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">returnMe</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">) => x + y * </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">returnMe</span><span style="color:#FFFFFF">(x: </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">returnMe</span><span style="color:#FFFFFF">(y: </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
}</span></code></div><div><h4 id="Multiple return values">Multiple return values</br>
</h4></div>
<div>
</br>
 A <b>tuple</b> can be used to return multiple values in a function.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunction</span><span style="color:#FFFFFF">() -> {</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">, </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">}
    {
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> {</span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">}
    }

    result := </span><span style="color:#FF7411">myFunction</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(result.item0 == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(result.item1 == </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">)

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> (x, y) = </span><span style="color:#FF7411">myFunction</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">)

    (z, w) := </span><span style="color:#FF7411">myFunction</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(z == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(w == </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">)
}

</span><span style="color:#6A9955">// You can name the fields of the function result too</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">returns2</span><span style="color:#FFFFFF">() -> {x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">}
{
    </span><span style="color:#6A9955">// You can return a tuple literal as long as the types match</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> {</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">}

    </span><span style="color:#6A9955">// Or use the specifal type 'retval' which is an alias to the</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// function return type (but not only, we'll see later)</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> result: </span><span style="color:#569CD6">retval</span><span style="color:#FFFFFF">
    x = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    y = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> result
}

</span><span style="color:#6A9955">// You can access the tuple fields with the names (if specified), or with 'item?'</span><span style="color:#FFFFFF">
result := </span><span style="color:#FF7411">returns2</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(result.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(result.item0 == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(result.y == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(result.item1 == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// You can deconstruct the returned tuple</span><span style="color:#FFFFFF">
(x, y) := </span><span style="color:#FF7411">returns2</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)</span></code></div>
<h3 id="102__lambda">Lambda</h3>
<div>A lambda is just a <b>pointer to a function</b>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunction0</span><span style="color:#FFFFFF">() {}
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunction1</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x * x

</span><span style="color:#6A9955">// 'ptr0' is declared as a pointer to a function that takes no parameter, and returns nothing</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> ptr0: </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">() = &myFunction0
</span><span style="color:#FF7411">ptr0</span><span style="color:#FFFFFF">()

</span><span style="color:#6A9955">// Here type of 'ptr1' is deduced from 'myFunction1'</span><span style="color:#FFFFFF">
ptr1 := &myFunction1
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunction1</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">ptr1</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)</span></code></div><div>A lambda can be null.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> lambda: </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">()-></span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(lambda == </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)</span></code></div><div>You can use a lambda as a function parameter type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> callback = </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toDo</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, ptr: callback)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> => </span><span style="color:#FF7411">ptr</span><span style="color:#FFFFFF">(value)

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">square</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x * x
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toDo</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, &square) == </span><span style="color:#B5CEA8">16</span><span style="color:#FFFFFF">)</span></code></div><div><h4 id="Anonymous functions">Anonymous functions</br>
</h4>You can also create <i>anonymous functions</i> (aka functions as literals).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">cb := </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> => x * x
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">cb</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">16</span><span style="color:#FFFFFF">)
cb = </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> => x * x * x
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">cb</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">64</span><span style="color:#FFFFFF">)</span></code></div><div>Anonymous functions can be passed as parameters to another function.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> callback = </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toDo</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, ptr: callback)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> => </span><span style="color:#FF7411">ptr</span><span style="color:#FFFFFF">(value)

</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toDo</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x * x) == </span><span style="color:#B5CEA8">16</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toDo</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x + x) == </span><span style="color:#B5CEA8">8</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toDo</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> x - x; }) == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)</span></code></div><div>The types of the parameters can be deduced.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> callback = </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toDo</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, ptr: callback)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> => </span><span style="color:#FF7411">ptr</span><span style="color:#FFFFFF">(value)

</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toDo</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x) => x * x) == </span><span style="color:#B5CEA8">16</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toDo</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x) => x + x) == </span><span style="color:#B5CEA8">8</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toDo</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x) { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> x - x; }) == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)</span></code></div><div>When you affect a lambda to a variable, the type of parameters and the return type can also be omitted, as they will be deduced from the variable type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> fct: </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">

fct = </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x, y) => x == y
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">))

fct = </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x, y) { </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> x != y; }
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">120</span><span style="color:#FFFFFF">))</span></code></div><div>Lambdas can have default parameters values.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(val = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">) {
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(val == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#FF7411">x</span><span style="color:#FFFFFF">()</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">    {
        </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(val: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)

        x = </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(val) {
            </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(val == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
        }

        </span><span style="color:#FF7411">x</span><span style="color:#FFFFFF">()
        </span><span style="color:#FF7411">x</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    }
}</span></code></div>
<h3 id="103__closure">Closure</h3>
<div>Swag supports a limited set of the <code class="incode">closure</code> concept.</br>
</br>
Only a given amount of bytes of capture are possible (for now 48 bytes). That way there's never an hidden allocation.</br>
Another limitation is that you can only capture 'simple' variables (no struct with <code class="incode">opDrop</code>, <code class="incode">opPostCopy</code>, <code class="incode">opPostMove</code> for example).</br>
</div>
<div>
</br>
 A closure is declared like a lambda, with the captured variables between <code class="incode">|...|</code> before the function parameters.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    a := </span><span style="color:#B5CEA8">125</span><span style="color:#FFFFFF">
    b := </span><span style="color:#B5CEA8">521</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Capture 'a' and 'b'</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> fct: </span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">() = </span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">|a, b|()
    {
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">125</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">521</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">()
}</span></code></div><div>
</br>
 You can also capture by pointer with <code class="incode">&</code> (otherwise it's a copy).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    a := </span><span style="color:#B5CEA8">125</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Capture 'a' by pointer</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> fct: </span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">() = </span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">|&a|()
    {
        </span><span style="color:#6A9955">// We can change the value of the local variable 'a'</span><span style="color:#FFFFFF">
        </span><span style="color:#569CD6">dref</span><span style="color:#FFFFFF"> a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">126</span><span style="color:#FFFFFF">)
    </span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">127</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can also capture by reference with <code class="incode">ref</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    a := </span><span style="color:#B5CEA8">125</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Capture 'a' by reference</span><span style="color:#FFFFFF">
    fct := </span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">|</span><span style="color:#569CD6">ref</span><span style="color:#FFFFFF"> a|()
    {
        </span><span style="color:#6A9955">// We can change the value of the local variable 'a'</span><span style="color:#FFFFFF">
        a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">126</span><span style="color:#FFFFFF">)
    </span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">127</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can assign a normal lambda (no capture) to a closure variable.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> fct: </span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">

    fct = </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(x, y) => x + y
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can capture arrays, structs, slices etc... as long as it fits in the maximum storage of 'n' bytes (and as long as the struct is a pod).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">]

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> fct: </span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Capture the array 'x' by making a copy</span><span style="color:#FFFFFF">
    fct = </span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">|x|(toAdd)
    {
        res := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> v: x
            res += v
        res += toAdd
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> res
    }

    result := </span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(result == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF"> + </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Captured variables are mutable, and part of the closure. So you can modify them.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">getInc</span><span style="color:#FFFFFF">()-></span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">()-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    {
        x := </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">

        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">closure</span><span style="color:#FFFFFF">|x|()-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> {
            x += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> x
        }
    }

    fct := </span><span style="color:#FF7411">getInc</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">11</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">12</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">fct</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">13</span><span style="color:#FFFFFF">)</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">}</span></code></div>
<h3 id="104__mixin">Mixin</h3>
<div>
</br>
 A mixin is declared like a function, with the attribute <code class="incode">#[Swag.Mixin]</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Mixin]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myMixin</span><span style="color:#FFFFFF">()
    {
    }
}</span></code></div><div>
</br>
 A mixin function is inserted in the scope of the caller.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Mixin]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myMixin</span><span style="color:#FFFFFF">()
    {
        a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">myMixin</span><span style="color:#FFFFFF">()   </span><span style="color:#6A9955">// Equivalent to 'a += 1'</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">myMixin</span><span style="color:#FFFFFF">()   </span><span style="color:#6A9955">// Equivalent to 'a += 1'</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 This behaves like a function, so you can add parameters.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Mixin]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myMixin</span><span style="color:#FFFFFF">(increment: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    {
        a += increment
    }

    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">myMixin</span><span style="color:#FFFFFF">()   </span><span style="color:#6A9955">// Equivalent to 'a += 1'</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">myMixin</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)  </span><span style="color:#6A9955">// Equivalent to 'a += 2'</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 A mixin accepts parameters of type <code class="incode">code</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Mixin]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">doItTwice</span><span style="color:#FFFFFF">(what: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#6A9955">// You can then insert the code with '#mixin'</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> what
        </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> what
    }

    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">doItTwice</span><span style="color:#FFFFFF">(</span><span style="color:#D7BA7D">#code</span><span style="color:#FFFFFF"> {a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">;})
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 When the last parameter of a mixin is of type <code class="incode">code</code>, the caller can declare that code in a statement just after the call.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Mixin]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">doItTwice</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, what: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> what
        </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> what
    }

    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">doItTwice</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
    {
        a += value
    }

    </span><span style="color:#FF7411">doItTwice</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    {
        a += value
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">12</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can use the special name <code class="incode">@alias</code> to create a named alias for an identifier.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Mixin]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">inc10</span><span style="color:#FFFFFF">()
    {
        </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> += </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    }

    a, b := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">inc10</span><span style="color:#FFFFFF">(|a|)  </span><span style="color:#6A9955">// Passing alias name 'a'</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">inc10</span><span style="color:#FFFFFF">(|b|)  </span><span style="color:#6A9955">// Passing alias name 'b'</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == b </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> b == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
}

{
    </span><span style="color:#AAAAAA">#[Swag.Mixin]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">setVar</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> = value
    }

    </span><span style="color:#FF7411">setVar</span><span style="color:#FFFFFF">(|a| </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)  </span><span style="color:#6A9955">// Passing alias name 'a'</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">setVar</span><span style="color:#FFFFFF">(|b| </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)  </span><span style="color:#6A9955">// Passing alias name 'b'</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
    </span><span style="color:#FF7411">setVar</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)      </span><span style="color:#6A9955">// No alias, so name is @alias0</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can declare special variables named <code class="incode">@mixin?</code>. Those variables will have a unique name each time the mixin is used. So the same mixin, even if it declares local variables, can be used multiple time in the same scope.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> total: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">

    </span><span style="color:#AAAAAA">#[Swag.Mixin]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toScope</span><span style="color:#FFFFFF">()
    {
        </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@mixin0</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        total += </span><span style="color:#DCDCAA">@mixin0</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#FF7411">toScope</span><span style="color:#FFFFFF">()
    </span><span style="color:#FF7411">toScope</span><span style="color:#FFFFFF">()
    </span><span style="color:#FF7411">toScope</span><span style="color:#FFFFFF">()

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(total == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div>
<h3 id="105__macro">Macro</h3>
<div>
</br>
 A macro, like a mixin, is declared like a function, but with the attribute <code class="incode">Swag.Macro</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">()
    {
    }
}</span></code></div><div>
</br>
 Unlike a mixin, a macro has its own scope, and cannot conflict with the function it is inserted inside.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">()
    {
        a := </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// 'a' is declared in the scope of 'myMacro'</span><span style="color:#FFFFFF">
    }

    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">()   </span><span style="color:#6A9955">// no conflict with the 'a' declared above</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 But you can force an identifier to be found outside of the scope of the macro with <code class="incode">#up</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">()
    {
        </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Add '#up' before the identifier to reference the 'a' of the caller</span><span style="color:#FFFFFF">
    }

    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">()
    </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Like a mixin, macro accepts <code class="incode">code</code> parameters.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">(what: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> what
    }

    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">

    </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">(</span><span style="color:#D7BA7D">#code</span><span style="color:#FFFFFF"> { </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">; } )

    </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">()
    {
        </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can use <code class="incode">#macro</code> inside a macro to force the code after to be in the same scope of the caller. That is, no <code class="incode">#up</code> is necessary to reference variables of the caller.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">(what: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#6A9955">// No conflict, in its own scope</span><span style="color:#FFFFFF">
        a := </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">

        </span><span style="color:#AAAAAA">#macro</span><span style="color:#FFFFFF">
        {
            </span><span style="color:#6A9955">// In the scope of the caller</span><span style="color:#FFFFFF">
            </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> what
        }
    }

    a := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">myMacro</span><span style="color:#FFFFFF">()
    {
        a += </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">  </span><span style="color:#6A9955">// will reference the 'a' above because this code has been inserted inside '#macro'</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can extend the language with macros, without using pointers to functions (no lambda call cost).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">repeat</span><span style="color:#FFFFFF">(count: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, what: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">)
    {
        a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">while</span><span style="color:#FFFFFF"> a < count
        {
            </span><span style="color:#AAAAAA">#macro</span><span style="color:#FFFFFF">
            {
                index := </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> a
                </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> what
            }

            a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        }
    }

    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">repeat</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">) { a += index; }
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
    </span><span style="color:#FF7411">repeat</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">) { a += index; }
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 When you need <code class="incode">break</code> in the user code to break outside of a multi loop.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">repeatSquare</span><span style="color:#FFFFFF">(count: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">, what: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#AAAAAA">#scope</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Up</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> count
        {
            </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> count
            {
                </span><span style="color:#AAAAAA">#macro</span><span style="color:#FFFFFF">
                {
                    </span><span style="color:#6A9955">// 'break' in the user code will be replaced by 'break Up'</span><span style="color:#FFFFFF">
                    </span><span style="color:#6A9955">// So it will break outside the outer loop</span><span style="color:#FFFFFF">
                    </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> </span><span style="color:#D7BA7D">#up</span><span style="color:#FFFFFF"> what { </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF"> = </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Up</span><span style="color:#FFFFFF">; }
                }
            }
        }
    }

    a := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">repeatSquare</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    {
        a += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> a == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(a == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 In a macro, you can use special variables named <code class="incode">@alias<num></code>. Note that this is also valid for mixins.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Macro]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">call</span><span style="color:#FFFFFF">(v: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, stmt: </span><span style="color:#F6CC86">code</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> := v
        </span><span style="color:#DCDCAA">@alias1</span><span style="color:#FFFFFF"> := v * </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#mixin</span><span style="color:#FFFFFF"> stmt
    }

    </span><span style="color:#FF7411">call</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@alias0</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@alias1</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#6A9955">// The caller can then name those special variables</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// Use |name0, name1, ...| before the function call parameters</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">call</span><span style="color:#FFFFFF">(|x| </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)        </span><span style="color:#6A9955">// x is @alias0</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@alias1</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)  </span><span style="color:#6A9955">// @alias1 is not renamed</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#FF7411">call</span><span style="color:#FFFFFF">(|x, y| </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)   </span><span style="color:#6A9955">// x is @alias0</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y == </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)   </span><span style="color:#6A9955">// y is @alias1</span><span style="color:#FFFFFF">
    }
}</span></code></div>
<h3 id="105__variadic_parameters">Variadic parameters</h3>
<div>
</br>
 A function can take a variable number of arguments with <code class="incode">...</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunction</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">, parameters: ...)
    {
    }

    </span><span style="color:#FF7411">myFunction</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#CE9178">"true"</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">5.6</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 In that case, <code class="incode">parameters</code> is a slice of <code class="incode">any</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunction</span><span style="color:#FFFFFF">(parameters: ...)
    {
        </span><span style="color:#6A9955">// We can know the number of parameters at runtime with '@countof'</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(parameters) == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)

        </span><span style="color:#6A9955">// Each parameter is a type 'any'</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF">

        </span><span style="color:#6A9955">// But you can use '@kindof' to get the real type (at runtime) of the parameter</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#FF7411">myFunction</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">, </span><span style="color:#CE9178">"true"</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">5.6</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 If all variadic parameters are of the same type, you can force it. Parameters then won't be of type <code class="incode">any</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunction</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">, parameters: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">...)
    {
        </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">]).name == </span><span style="color:#CE9178">"s32"</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">]).name == </span><span style="color:#CE9178">"s32"</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">

        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(parameters[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#FF7411">myFunction</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">40</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Variadic parameters can be passed from function to function.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">(params: ...)
    {
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(params) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(params[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">(params[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">]) == </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) params[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"value"</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) params[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">(params: ...)
    {
        </span><span style="color:#4EC9B0">A</span><span style="color:#FFFFFF">(params)
    }

    </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"value"</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
}</span></code></div><div>You can spread the content of an array or a slice to variadic parameters with <code class="incode">@spread</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(params: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">...)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#6A9955">// Note that variadic parameters can be visited, as this is a slice</span><span style="color:#FFFFFF">
        total := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> v: params
            total += v
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> total
    }

    arr := [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">]
    res := </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@spread</span><span style="color:#FFFFFF">(arr)) </span><span style="color:#6A9955">// is equivalent to sum(1, 2, 3, 4)</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(res == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)

    res1 := </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@spread</span><span style="color:#FFFFFF">(arr[</span><span style="color:#B5CEA8">1.</span><span style="color:#FFFFFF">.</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">])) </span><span style="color:#6A9955">// is equivalent to sum(2, 3)</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(res1 == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">+</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div>
<h3 id="106__ufcs">Ufcs</h3>
<div><i>ufcs</i> stands for <i>uniform function call syntax</i>. It allows every functions to be called with a <code class="incode">param.func()</code> form when the first parameter of <code class="incode">func()</code> is of the same type as <code class="incode">param</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(param: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) => param

    b := </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(b) == b.</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">())
}</span></code></div><div>
</br>
 This means that in Swag, there are only <i>static</i> functions, but which can be called like <i>methods</i>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF"> { x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">; }
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">set</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> pt: *</span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) { x, y = value; }

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt: </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Ufcs call</span><span style="color:#FFFFFF">
    pt.</span><span style="color:#FF7411">set</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> pt.y == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Normal call</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">set</span><span style="color:#FFFFFF">(&pt, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> pt.y == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
}</span></code></div>
<h3 id="107__constexpr">Constexpr</h3>
<div>A function marked with <code class="incode">Swag.ConstExpr</code> can be executed by the compiler if it can.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.ConstExpr]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">) => x + y</span></code></div><div>Here <code class="incode">G</code> will be baked to 3 by the compiler.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> = </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">3</span></code></div><div>If a function is not <code class="incode">ConstExpr</code>, you can force the compile time call with <code class="incode">#run</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">mul</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">) => x * y
</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G1</span><span style="color:#FFFFFF"> = </span><span style="color:#FF7411">#run</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">mul</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">)
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G1</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">18</span></code></div>
<h3 id="108__function_overloading">Function overloading</h3>
<div>Functions can have the same names as long as their parameters are different.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.ConstExpr]</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x + y
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(x, y, z: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x + y + z
}

</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">6</span></code></div><div>Note that in Swag, there is no implicit cast for function parameters. So you must always specify the right type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">over</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x + y
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">over</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">) => x * y

</span><span style="color:#6A9955">// This would generate an error because it's ambiguous, as 1 and 2 are not strong types</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// res0 := over(1, 2)</span><span style="color:#FFFFFF">

res0 := </span><span style="color:#FF7411">over</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(res0 == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
res1 := </span><span style="color:#FF7411">over</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(res1 == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)</span></code></div>
<h3 id="109__discard">Discard</h3>
<div>By default, you must always use the returned value of a function, otherwise the compiler will generate an error.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x + y

</span><span style="color:#6A9955">// This would generated an error, because the return value of 'sum' is not used</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// sum(2, 3)</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// To force the return value to be ignored, you can use 'discard' at the call site</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">discard</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)</span></code></div><div>If a function authorizes the caller to not use its return value, because it's not that important, it can be marked with <code class="incode">Swag.Discardable</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.Discardable]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">mul</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> => x * y

</span><span style="color:#6A9955">// This is fine to ignore the return value of 'mul' (even if strange)</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">mul</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)</span></code></div>
<h3 id="110__retval">Retval</h3>
<div>Inside a function, you can use the <code class="incode">retval</code> type which is an alias to the function return type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">()-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> result: </span><span style="color:#569CD6">retval</span><span style="color:#FFFFFF">
        result = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> result
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
}</span></code></div><div>But <code class="incode">retval</code> will also make a direct reference to the caller storage, to avoid an unnecessary copy (if possible). So this is mostly a hint for the compiler, and usefull when the function returns a complexe type like a struct, a tuple or an array.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF"> { x, y, z: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">; }

    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">getWhite</span><span style="color:#FFFFFF">()-></span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#6A9955">// To avoid the clear of the returned struct, we use = undefined</span><span style="color:#FFFFFF">
        </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> result: </span><span style="color:#569CD6">retval</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">undefined</span><span style="color:#FFFFFF">
        result.x = </span><span style="color:#B5CEA8">0.5</span><span style="color:#FFFFFF">
        result.y = </span><span style="color:#B5CEA8">0.1</span><span style="color:#FFFFFF">
        result.z = </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> result
    }

    </span><span style="color:#6A9955">// Here the 'getWhite' function can directly modify r, g and b without storing</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// a temporary value on the stack.</span><span style="color:#FFFFFF">
    (r, g, b) := </span><span style="color:#FF7411">getWhite</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(r == </span><span style="color:#B5CEA8">0.5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(g == </span><span style="color:#B5CEA8">0.1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(b == </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 This is the preferred way (because optimal) to return a struct, a tuple or an array.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">()->[</span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#6A9955">// To avoid the clear of the array, we use = undefined</span><span style="color:#FFFFFF">
        </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> result: </span><span style="color:#569CD6">retval</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">undefined</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> i: </span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">
            result[i] = i
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> result
    }

    arr := </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">()
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(arr[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(arr[</span><span style="color:#B5CEA8">100</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">100</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(arr[</span><span style="color:#B5CEA8">254</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">254</span><span style="color:#FFFFFF">)
}</span></code></div>
<h3 id="111__foreign">Foreign</h3>
<div>Swag can interop with external "modules" (dlls under windows), which contain exported C functions.</br>
</br>
Put a special attribute <code class="incode">Swag.Foreign</code> before the function prototype, and specify the module name where the function is located.</br>
</br>
The module name can be a swag compiled module, or an external system module (where the location depends on the OS).</br>
</div>
<div>In the case below, the function is located in <code class="incode">kernel32.dll</code> (under windows)</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.Foreign("kernel32")]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">ExitProcess</span><span style="color:#FFFFFF">(uExitCode: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">);

</span><span style="color:#6A9955">// Like for other attributes, you can use a block.</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#[Swag.Foreign("kernel32")]</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">ExitProcess</span><span style="color:#FFFFFF">(uExitCode: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">);
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Sleep</span><span style="color:#FFFFFF">(dwMilliseconds: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">);
}</span></code></div><div>Note that in the case of a system module, you will have to declare somewhere the imported library too.</br>
</br>
<code class="incode">#foreignlib</code> is here to force a link to the given library (when generating executables).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#foreignlib</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"kernel32"</span></code></div>
<h2 id="120_compiler_intrinsics">Compiler intrinsics</h2>
<div>This is the list of all compiler intrinsics.</br>
All intrinsics start with <code class="incode">@</code>, which is reserved for them.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#global</span><span style="color:#FFFFFF"> skip</span></code></div><div><h3 id="Base">Base</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">);
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@breakpoint</span><span style="color:#FFFFFF">();
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@getcontext</span><span style="color:#FFFFFF">()->*</span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">Context</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@setcontext</span><span style="color:#FFFFFF">(context: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">Context</span><span style="color:#FFFFFF">);
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@isbytecode</span><span style="color:#FFFFFF">()-></span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@compiler</span><span style="color:#FFFFFF">()-></span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">ICompiler</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@args</span><span style="color:#FFFFFF">()-></span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> [..] </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">;
</span><span style="color:#DCDCAA">@panic</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@compilererror</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@compilerwarning</span><span style="color:#FFFFFF">()</span></code></div><div><h3 id="Buildin">Buildin</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#DCDCAA">@spread</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@init</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@drop</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@postmove</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@postcopy</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@alignof</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@offsetof</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@kindof</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@stringof</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@dataof</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@mkslice</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@mkstring</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@mkany</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@mkinterface</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@mkcallback</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@getpinfos</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@isconstexpr</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@itftableof</span><span style="color:#FFFFFF">()

</span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@err</span></code></div><div><h3 id="Memory related">Memory related</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@alloc</span><span style="color:#FFFFFF">(size: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)->*</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@realloc</span><span style="color:#FFFFFF">(ptr: *</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">, size: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)->*</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@free</span><span style="color:#FFFFFF">(ptr: *</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">);
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@memset</span><span style="color:#FFFFFF">(dst: *</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">, size: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">);
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@memcpy</span><span style="color:#FFFFFF">(dst: *</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">, src: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">, size: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">);
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@memmove</span><span style="color:#FFFFFF">(dst: *</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">, src: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">, size: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">);
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@memcmp</span><span style="color:#FFFFFF">(dst, src: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">, size: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@strlen</span><span style="color:#FFFFFF">(value: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;</span></code></div><div><h3 id="Atomic operations">Atomic operations</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomadd</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomadd</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomadd</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomadd</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomadd</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomadd</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomadd</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomadd</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomand</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomand</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomand</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomand</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomand</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomand</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomand</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomand</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxor</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">,  exchangeWith: </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">, exchangeWith: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, exchangeWith: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">, exchangeWith: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">,  exchangeWith: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">, exchangeWith: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">, exchangeWith: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">, exchangeWith: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomcmpxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">,  compareTo, exchangeWith: </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomcmpxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">, compareTo, exchangeWith: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomcmpxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, compareTo, exchangeWith: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomcmpxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">, compareTo, exchangeWith: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomcmpxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">,  compareTo, exchangeWith: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomcmpxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">, compareTo, exchangeWith: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomcmpxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">, compareTo, exchangeWith: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atomcmpxchg</span><span style="color:#FFFFFF">(addr: *</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">, compareTo, exchangeWith: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;</span></code></div><div><h3 id="Math">Math</br>
</h3></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@sqrt</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@sqrt</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@sin</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@sin</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@cos</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@cos</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@tan</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@tan</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@sinh</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@sinh</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@cosh</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@cosh</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@tanh</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@tanh</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@asin</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@asin</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@acos</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@acos</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atan</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@atan</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@log</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@log</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@log2</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@log2</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@log10</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@log10</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@floor</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@floor</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@ceil</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@ceil</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@trunc</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@trunc</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@round</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@round</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@abs</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@abs</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@abs</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@abs</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@abs</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@abs</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@exp</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@exp</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@exp2</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@exp2</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@pow</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@pow</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@min</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@max</span><span style="color:#FFFFFF">(value1, value2: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcountnz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcountnz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcountnz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcountnz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcounttz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcounttz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcounttz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcounttz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcountlz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcountlz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcountlz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@bitcountlz</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@byteswap</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u16</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@byteswap</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@byteswap</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">;

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@muladd</span><span style="color:#FFFFFF">(val1, val2, val3: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">;
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@muladd</span><span style="color:#FFFFFF">(val1, val2, val3: </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">;</span></code></div>
<h2 id="121_init">Init</h2>
<div><h3 id="@init">@init</br>
</h3><code class="incode">@init</code> can be used to reinitialize a variable/array to the default value.</br>
</div>
<div>
</br>
 For a simple variable, default value is 0.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@init</span><span style="color:#FFFFFF">(&x)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Work also for an array, as you can specify the number of elements you want to initialize.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@init</span><span style="color:#FFFFFF">(&x, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)    </span><span style="color:#6A9955">// Initialize 2 elements</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can also specify a <i>value</i> to initialize, instead of the default one.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@init</span><span style="color:#FFFFFF">(&x)(</span><span style="color:#B5CEA8">3.14</span><span style="color:#FFFFFF">)  </span><span style="color:#6A9955">// Initialize to 3.14 instead of zero</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">3.14</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Same for an array.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := [</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
    </span><span style="color:#DCDCAA">@init</span><span style="color:#FFFFFF">(&x, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)(</span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">)
}</span></code></div><div>When called on a struct, the struct will be restored to the values defined in it.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
{
    r = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    g = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    b = </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
}

{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> rgb: </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">{</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">}
    </span><span style="color:#DCDCAA">@init</span><span style="color:#FFFFFF">(&rgb)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb.r == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb.g == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb.b == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 But you can also specified the values.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> rgb: </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">{</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">}
    </span><span style="color:#DCDCAA">@init</span><span style="color:#FFFFFF">(&rgb)(</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">7</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb.r == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb.g == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb.b == </span><span style="color:#B5CEA8">7</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 And this works also for array.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> rgb: [</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">] </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@init</span><span style="color:#FFFFFF">(&rgb, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)(</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">7</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">].r == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">].g == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">].b == </span><span style="color:#B5CEA8">7</span><span style="color:#FFFFFF">)
}</span></code></div><div><h3 id="@drop">@drop</br>
</h3>Note that for a struct, this will <b>not</b> call <code class="incode">opDrop</code>, so this is mostly useful to initialize a plain old data.</br>
</br>
But there is also <code class="incode">@drop</code>, which works the same, except that it will <code class="incode">drop</code> all the content by calling <code class="incode">opDrop</code> if it is defined.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
{
    r = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    g = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    b = </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">
}

{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> rgb: [</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">] </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// In fact this is a no op, as struct RGB is plain old data, without a defined 'opDrop'</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@drop</span><span style="color:#FFFFFF">(&rgb, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)

    </span><span style="color:#DCDCAA">@init</span><span style="color:#FFFFFF">(&rgb, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)(</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">7</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">].r == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">].g == </span><span style="color:#B5CEA8">6</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(rgb[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">].b == </span><span style="color:#B5CEA8">7</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="130_generic">Generic</h2>

<h3 id="131__declaration">Declaration</h3>
<div>A function can be generic by specifying some parameters after <code class="incode">func</code>.</br>
At the call site, you specify the generic parameters with <code class="incode">funcCall'(type1, type2, ...)(parameters)</code>.</br>
Note that parenthesis can be ommited if there's only one generic parameter.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#6A9955">// Here 'T' is a generic type.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(val: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) => </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> * val

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myFunc'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myFunc'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4.0</span><span style="color:#FFFFFF">)
}

{
    </span><span style="color:#6A9955">// You can omit 'var' to declare the generic type, because a single identifier is considered to be a type.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(val: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) => </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> * val

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myFunc'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myFunc'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4.0</span><span style="color:#FFFFFF">)
}

{
    </span><span style="color:#6A9955">// You can set a default value to the type.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF"> = </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(val: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) => </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> * val

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myFunc'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4.0</span><span style="color:#FFFFFF">)
}

{
    </span><span style="color:#6A9955">// Of course you can specify more than one generic parameter</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">K</span><span style="color:#FFFFFF">, </span><span style="color:#4EC9B0">V</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(key: </span><span style="color:#4EC9B0">K</span><span style="color:#FFFFFF">, value: </span><span style="color:#4EC9B0">V</span><span style="color:#FFFFFF">) => value

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#CE9178">"value"</span><span style="color:#FFFFFF">) == </span><span style="color:#CE9178">"value"</span><span style="color:#FFFFFF">)              </span><span style="color:#6A9955">// K and V are deduced</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myFunc'(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">)(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#CE9178">"value"</span><span style="color:#FFFFFF">) == </span><span style="color:#CE9178">"value"</span><span style="color:#FFFFFF">)    </span><span style="color:#6A9955">// K and V are explicit</span><span style="color:#FFFFFF">

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">) == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myFunc'(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">)(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">) == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
}</span></code></div><div>Generic types can be deduced from parameters, so <code class="incode">func'type()</code> is not always necessary.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(val: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) => </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> * val

</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)         </span><span style="color:#6A9955">// T is deduced to be s32</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">4.0</span><span style="color:#FFFFFF">)     </span><span style="color:#6A9955">// T is deduced to be f32</span></code></div><div>You can also specify constants as generic parameters.</br>
</div>
<div>
</br>
 <code class="incode">N</code> is a constant a type <code class="incode">s32</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">() = </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    myFunc'</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">()
}</span></code></div><div>
</br>
 <code class="incode">const</code> can also be omitted, as an identifier followed by a type definition is considered to be a constant and not a type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">() = </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    myFunc'</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">()
}</span></code></div><div>
</br>
 You can also assign a default value to the constant.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">() = </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">()
}</span></code></div><div>
</br>
 You can ommit the type if you declare the constant with <code class="incode">const</code>. It will be deduced from the assignment expression.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">() = </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">()
}</span></code></div><div>You can mix types and constants.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#6A9955">// `T` is a type, `N` is a constant of type `s32`, because remember that an identifier alone is considered to be a generic type.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">, </span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(x: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) => x * </span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> call = myFunc'(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">call</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">call</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">100</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">1000</span><span style="color:#FFFFFF">)
}

{
    </span><span style="color:#6A9955">// So if you want to declare multiple constants, specify the type (or 'const') for each.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">() => </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF"> * </span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF">

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myFunc'(</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)() == </span><span style="color:#B5CEA8">50</span><span style="color:#FFFFFF">)
}

{
    </span><span style="color:#6A9955">// And if you want to declare multiple types with default values, specify the value for each.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF"> = </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#4EC9B0">V</span><span style="color:#FFFFFF"> = </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(x: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">, y: </span><span style="color:#4EC9B0">V</span><span style="color:#FFFFFF">) => x * y

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">2.0</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>Like functions, a struct can also be generic.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">
    {
        val: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(x.val) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x1: </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(x1.val) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">)
}

{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">, </span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF">: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">
    {
        val: [</span><span style="color:#4EC9B0">N</span><span style="color:#FFFFFF">] </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#4EC9B0">Struct</span><span style="color:#FFFFFF">'(</span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(x.val) == </span><span style="color:#D7BA7D">#type</span><span style="color:#FFFFFF"> [</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">)
}</span></code></div>
<h3 id="132__validif">Validif</h3>
<div><h4 id="One time evaluation">One time evaluation</br>
</h4>On a function, you can use <code class="incode">#validif</code> to check if the usage of the function is correct.</br>
</br>
If the <code class="incode">#validif</code> expression returns false, then the function will not be considered for the call. If there's no other overload to match, then the compiler will raise an error.</br>
</br>
The <code class="incode">#validif</code> expression is evaluated <b>only once</b>, whatever the call, so it is typically used to check generic parameters.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// Here we validate the function only if the generic type is `s32` or `s64`.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(x: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">...)-></span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#validif</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">
{
    total := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> it: x
        total += it
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> total
}

</span><span style="color:#6A9955">// This is ok.</span><span style="color:#FFFFFF">
res1 := sum'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(res1 == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
res2 := sum'</span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(res2 == </span><span style="color:#B5CEA8">30</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// But the following would generate an error because the type is `f32`. So there's no match possible for that type.</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// res1 := sum'f32(1, 2)</span></code></div><div>You can use <code class="incode">#validif</code> to make a kind of a generic specialisation.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// s32 version</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">isNull</span><span style="color:#FFFFFF">(x: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#validif</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
{
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> x == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
}

</span><span style="color:#6A9955">// f32/f64 version</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">isNull</span><span style="color:#FFFFFF">(x: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#validif</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
{
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#F67F56">@abs</span><span style="color:#FFFFFF">(x) < </span><span style="color:#B5CEA8">0.01</span><span style="color:#FFFFFF">
}

</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">isNull</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">))
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">isNull</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0.001</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">))</span></code></div><div>Instead of a single expression, <code class="incode">#validif</code> can be followed by a block that returns a <code class="incode">bool</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(x: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">...)-></span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#validif</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    }
{
    total := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> it: x
        total += it
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> total
}</span></code></div><div>By using <code class="incode">@compilererror</code>, you can then trigger your own errors at compile time if the type is incorrect.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">)-></span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#validif</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@compilererror</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"invalid type "</span><span style="color:#FFFFFF"> ++ </span><span style="color:#DCDCAA">@stringof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">), </span><span style="color:#DCDCAA">@location</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">))
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    }
{
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> x + y
}

</span><span style="color:#6A9955">// This will trigger an error</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// x := sum'f32(1, 2)</span></code></div><div><code class="incode">#validif</code> can also be used on a generic struct. Unlike functions, if the expression failed, then you will have an error right away because there's no overload in the case of structures.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#validif</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF"> == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF"> == </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
{
    x, y: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
}

</span><span style="color:#6A9955">// Fine.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v: </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// Error.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//var v: Point's32</span></code></div><div><h4 id="Multiple evaluations">Multiple evaluations</br>
</h4>Instead of <code class="incode">#validif</code>, you can use <code class="incode">#validifx</code>. <code class="incode">#validifx</code> is evaluated for <b>each</b> call, so it can be used to check parameters, as long as they can be <b>evaluated at compile time</b>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">div</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#validifx</span><span style="color:#FFFFFF">
        {
            </span><span style="color:#6A9955">// Here we use '@isconstexpr'.</span><span style="color:#FFFFFF">
            </span><span style="color:#6A9955">// If 'y' cannot be evaluated at compile time, then we can do nothing about it.</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> !</span><span style="color:#DCDCAA">@isconstexpr</span><span style="color:#FFFFFF">(y)
                </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> y == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
                </span><span style="color:#DCDCAA">@compilererror</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"division by zero"</span><span style="color:#FFFFFF">, </span><span style="color:#DCDCAA">@location</span><span style="color:#FFFFFF">(y))
            </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
        }
    {
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> x / y
    }

    </span><span style="color:#6A9955">// Fine</span><span style="color:#FFFFFF">
    x1 := </span><span style="color:#FF7411">div</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Error at compile time, division by zero.</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// x2 := div(1, 0)</span><span style="color:#FFFFFF">
}

{
    </span><span style="color:#6A9955">// A version of 'first' where 'x' is known at compile time.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">first</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#validifx</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@isconstexpr</span><span style="color:#FFFFFF">(x)
    {
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#6A9955">// A version of 'first' where 'x' is **not** known at compile time.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">first</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
        </span><span style="color:#AAAAAA">#validifx</span><span style="color:#FFFFFF"> !</span><span style="color:#DCDCAA">@isconstexpr</span><span style="color:#FFFFFF">(x)
    {
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#6A9955">// Will call version 1 because parameter is a literal.</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">first</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">555</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// Will call version 2 because parameter is a variable.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> a: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">first</span><span style="color:#FFFFFF">(a) == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
}</span></code></div>
<h3 id="133__constraint">Constraint</h3>
<div>Swag provides also a simple way of checking generic parameters, without the need of <code class="incode">#validif</code>.</br>
A type constraint can be added when declaring a generic type. If a function or a struct is instantiated with a type that does not conform to the constraint, then an error will be raised.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// The type constraint is a compile time function (with #[Swag.ConstExpr]) that should return a bool.</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#[Swag.ConstExpr]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isS32</span><span style="color:#FFFFFF">(t: </span><span style="color:#F6CC86">typeinfo</span><span style="color:#FFFFFF">) => t == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// Here we check that the function generic type is 's32' by calling 'isS32'.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">: </span><span style="color:#FF7411">isS32</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">)) </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(x: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">...)-></span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
{
    total := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> it: x
        total += it
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> total
}

</span><span style="color:#6A9955">// This is ok.</span><span style="color:#FFFFFF">
res1 := sum'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(res1 == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// But the following would generate an error because the type is 'f32'.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// res1 := sum'f32(1, 2)</span></code></div><div>The type constraint can be any compile time expression, as long as the resulting type is <code class="incode">bool</code>.</br>
So you could do something like this.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.ConstExpr]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isS32</span><span style="color:#FFFFFF">(t: </span><span style="color:#F6CC86">typeinfo</span><span style="color:#FFFFFF">)  => t == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#[Swag.ConstExpr]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isBool</span><span style="color:#FFFFFF">(t: </span><span style="color:#F6CC86">typeinfo</span><span style="color:#FFFFFF">) => t == </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// Here we check that the function generic type is 's32' or 'bool'.</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">: </span><span style="color:#FF7411">isS32</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isBool</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">)) </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(x: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) => x

</span><span style="color:#6A9955">// This is ok.</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)  == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">) == </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)</span></code></div><div>Works also for structs.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.ConstExpr]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isFloat</span><span style="color:#FFFFFF">(t: </span><span style="color:#F6CC86">typeinfo</span><span style="color:#FFFFFF">) => t == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">or</span><span style="color:#FFFFFF"> t == </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">: </span><span style="color:#FF7411">isFloat</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">)) </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">
{
    x, y: </span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt:  </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt1: </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// This will generate a type constraint error.</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//var pt: Point's32</span></code></div>
<h2 id="160_scoping">Scoping</h2>

<h3 id="161__defer">Defer</h3>
<div><code class="incode">defer</code> is used to call an expression when the current scope is left. It's purely compile time, so it does not evaluate until the block is left.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    v := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">defer</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    v += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// defer expression will be executed here</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 <code class="incode">defer</code> can also be used with a block.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    v := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">defer</span><span style="color:#FFFFFF">
    {
        v += </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v == </span><span style="color:#B5CEA8">15</span><span style="color:#FFFFFF">)
    }

    v += </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// defer block will be executed here</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 <code class="incode">defer</code> expressions are called when leaving the corresponding scope, even with <code class="incode">return</code>, <code class="incode">break</code>, <code class="incode">continue</code> etc., and even inside a <code class="incode">loop/while/for</code> etc.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">defer</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// will be called here, before breaking the loop</span><span style="color:#FFFFFF">
        </span><span style="color:#6A9955">// will be called here also</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 <code class="incode">defer</code> are executed in reverse order of their declaration.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    x := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">defer</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)   </span><span style="color:#6A9955">// Will be executed second</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">defer</span><span style="color:#FFFFFF"> x *= </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">            </span><span style="color:#6A9955">// Will be executed first</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 It's typically used to unregister/destroy a resource, by putting the release code just after the creation one.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">createResource</span><span style="color:#FFFFFF">() => </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">releaseResource</span><span style="color:#FFFFFF">(resource: *</span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) = </span><span style="color:#569CD6">dref</span><span style="color:#FFFFFF"> resource = </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isResourceCreated</span><span style="color:#FFFFFF">(b: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) => b

    resource := </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
    {
        resource = </span><span style="color:#FF7411">createResource</span><span style="color:#FFFFFF">()
        </span><span style="color:#D8A0DF">defer</span><span style="color:#FFFFFF">
        {
            </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(resource.</span><span style="color:#FF7411">isResourceCreated</span><span style="color:#FFFFFF">())
            </span><span style="color:#FF7411">releaseResource</span><span style="color:#FFFFFF">(&resource)
        }

        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@index</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">break</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(!resource.</span><span style="color:#FF7411">isResourceCreated</span><span style="color:#FFFFFF">())
}</span></code></div>
<h3 id="162__using">Using</h3>
<div>
</br>
 <code class="incode">using</code> brings the scope of a namespace, a struct or an enum in the current one.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)

    </span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 <code class="incode">using</code> can also be used with a variable</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF"> { x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">; y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">; }

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt: </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> pt
    x = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// no need to specify 'pt'</span><span style="color:#FFFFFF">
    y = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// no need to specify 'pt'</span><span style="color:#FFFFFF">

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.y == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can declare a variable with <code class="incode">using</code> just before.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF"> { x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">; y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">; }

    </span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt: </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">
    x = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// no need to specify 'pt'</span><span style="color:#FFFFFF">
    y = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// no need to specify 'pt'</span><span style="color:#FFFFFF">

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.y == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div><h4 id="For a function parameter">For a function parameter</br>
</h4><code class="incode">using</code> applied to a function parameter can be seen as the equivalent of the hidden <code class="incode">this</code> in C++.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF"> { x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">; y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">; }

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">setOne</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> point: *</span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#6A9955">// Here there's no need to specify 'point'</span><span style="color:#FFFFFF">
    x, y = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt: </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">
</span><span style="color:#FF7411">setOne</span><span style="color:#FFFFFF">(&pt)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.y == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// ufcs</span><span style="color:#FFFFFF">
pt.</span><span style="color:#FF7411">setOne</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.y == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)</span></code></div><div><h4 id="For a field">For a field</br>
</h4><code class="incode">using</code> can also be used with a field inside a struct.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point2</span><span style="color:#FFFFFF">
{
    x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point3</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> base: </span><span style="color:#4EC9B0">Point2</span><span style="color:#FFFFFF">
    z: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
}

</span><span style="color:#6A9955">// That way the content of the field can be referenced directly</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> value: </span><span style="color:#4EC9B0">Point3</span><span style="color:#FFFFFF">
value.x = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Equivalent to value.base.x = 0</span><span style="color:#FFFFFF">
value.y = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Equivalent to value.base.y = 0</span><span style="color:#FFFFFF">
value.z = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(&value.x == &value.base.x)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(&value.y == &value.base.y)

</span><span style="color:#6A9955">// The compiler can then cast automatically 'Point3' to 'Point2'</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">set1</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> ptr: *</span><span style="color:#4EC9B0">Point2</span><span style="color:#FFFFFF">)
{
    x, y = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
}

</span><span style="color:#FF7411">set1</span><span style="color:#FFFFFF">(&value) </span><span style="color:#6A9955">// Here the cast is automatic thanks to the using</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value.y == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value.base.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(value.base.y == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)</span></code></div>
<h3 id="163__with">With</h3>
<div>You can use <code class="incode">with</code> to avoid repeating the same variable again and again. You can then access fields with a simple <code class="incode">.</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF"> { x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">; }

</span><span style="color:#569CD6">impl</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">mtd</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">setOne</span><span style="color:#FFFFFF">()
    {
        x, y = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    }
}</span></code></div><div>
</br>
 <code class="incode">with</code> on a variable.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt: </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">with</span><span style="color:#FFFFFF"> pt
    {
        .x = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// equivalent to pt.x</span><span style="color:#FFFFFF">
        .y = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// equivalent to pt.y</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.y == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Works for function calls to.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt: </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">with</span><span style="color:#FFFFFF"> pt
    {
        .</span><span style="color:#FF7411">setOne</span><span style="color:#FFFFFF">()           </span><span style="color:#6A9955">// equivalent to pt.setOne() or setOne(pt)</span><span style="color:#FFFFFF">
        .y = </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">              </span><span style="color:#6A9955">// equivalent to pt.y</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)    </span><span style="color:#6A9955">// equivalent to pt.x</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(.y == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)    </span><span style="color:#6A9955">// equivalent to pt.y</span><span style="color:#FFFFFF">
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.y == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    }
}</span></code></div><div>
</br>
 Works also with a namespace.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">with</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">NameSpace</span><span style="color:#FFFFFF">
    {
        .</span><span style="color:#FF7411">inside0</span><span style="color:#FFFFFF">()
        .</span><span style="color:#FF7411">inside1</span><span style="color:#FFFFFF">()
    }
}</span></code></div><div>
</br>
 Instead of an identifier name, <code class="incode">with</code> also accepts a variable declaration.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">with</span><span style="color:#FFFFFF"> pt := </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">{</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">}
    {
        .x = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        .y = </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> pt.y == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
}

{
    </span><span style="color:#569CD6">with</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt: </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">
    {
        .x = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        .y = </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> pt.y == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Or an affectation statement.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> pt: </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">with</span><span style="color:#FFFFFF"> pt = </span><span style="color:#4EC9B0">Point</span><span style="color:#FFFFFF">{</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">}
    {
        .x = </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        .y = </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(pt.x == </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> pt.y == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">)
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">namespace</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">NameSpace</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">inside0</span><span style="color:#FFFFFF">() {}
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">inside1</span><span style="color:#FFFFFF">() {}
}</span></code></div>
<h2 id="164_alias">Alias</h2>
<div>
</br>
 <code class="incode">alias</code> is used to make a shortcut to another name or type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">enum</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF"> { </span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">; </span><span style="color:#4EC9B0">B</span><span style="color:#FFFFFF">; }
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">R</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)

    </span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Color</span><span style="color:#FFFFFF"> = </span><span style="color:#4EC9B0">RGB</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Color</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Types alias</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Float32</span><span style="color:#FFFFFF"> = </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Float64</span><span style="color:#FFFFFF"> = </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#4EC9B0">Float32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> y: </span><span style="color:#4EC9B0">Float64</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1.0</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Float32</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Float64</span><span style="color:#FFFFFF">) == </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 A type alias can be marked with the <code class="incode">Swag.Strict</code> attribute. In that case, implicit cast is not done, but explicit cast is still possible.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.Strict]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyType</span><span style="color:#FFFFFF"> = </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyType</span><span style="color:#FFFFFF">) != </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#4EC9B0">MyType</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">MyType</span><span style="color:#FFFFFF">) </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 You can also alias a function.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">thisIsABigFunctionName</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">) => x * x
    </span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> myFunc = thisIsABigFunctionName
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">16</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 You can also alias a variable.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> myLongVariableName: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">alias</span><span style="color:#FFFFFF"> short = myLongVariableName
    short += </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(myLongVariableName == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
}</span></code></div>
<h2 id="170_error_management">Error management</h2>
<div>Swag contains a <b>very</b> simple error system used to deal with function returning errors.</br>
It will probably be changed/improved at some point.</br>
</br>
</div>
<div class="blockquote">These are <b>not</b> exceptions !</br>
</div>
<div></br>
A function that can return an error must be marked with <code class="incode">throw</code>. It can then raise an error with the <code class="incode">throw</code> keyword, passing an error message.</br>
</br>
</div>
<div class="blockquote">When an error is raised by a function, the return value is always equal to the <b>default value</b>, depending on the return type.</br>
</div>
<div></div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(name: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF">
{
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> name == </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#6A9955">// This function will return 0 in case of an error, because this is the default</span><span style="color:#FFFFFF">
        </span><span style="color:#6A9955">// value for 'u64'.</span><span style="color:#FFFFFF">
        </span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"null pointer"</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(name)
}</span></code></div><div>The caller will then have to deal with the error in some way. It can <code class="incode">catch</code> it, and test (or not) its value with the <code class="incode">@err</code> intrinsic. The execution will continue at the call site.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunc</span><span style="color:#FFFFFF">()
{
    </span><span style="color:#6A9955">// Dismiss the eventual error with 'catch' and continue execution</span><span style="color:#FFFFFF">
    cpt := </span><span style="color:#569CD6">catch</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"fileName"</span><span style="color:#FFFFFF">)

    </span><span style="color:#6A9955">// And test it with @err, which returns the 'throw' corresponding string</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@err</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)
        </span><span style="color:#DCDCAA">@print</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@err</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#6A9955">// You can also use 'trycatch', which will exit the current function in case</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// an error has been raised (returning the default value if necessary)</span><span style="color:#FFFFFF">
    cpt1 := </span><span style="color:#569CD6">trycatch</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"fileName"</span><span style="color:#FFFFFF">)
}</span></code></div><div>The caller can stop the execution with <code class="incode">try</code>, and return to its own caller with the same error raised. The function must then also be marked with <code class="incode">throw</code>.</br>
</br>
Here, the caller of <code class="incode">myFunc1</code> will have to deal with the error at its turn.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunc1</span><span style="color:#FFFFFF">() </span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF">
{
    </span><span style="color:#6A9955">// If 'count()' raises an error, 'myFunc1' will return with the same error</span><span style="color:#FFFFFF">
    cpt := </span><span style="color:#569CD6">try</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"filename"</span><span style="color:#FFFFFF">)
}</span></code></div><div>The caller can also panic if an error is raised, with <code class="incode">assume</code>.</br>
</br>
</div>
<div class="blockquote">This can be disabled in release builds (in that case the behaviour is undefined).</br>
</div>
<div></br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunc2</span><span style="color:#FFFFFF">()
{
    </span><span style="color:#6A9955">// Here the program will stop with a panic message if 'count()' throws an error</span><span style="color:#FFFFFF">
    cpt := </span><span style="color:#569CD6">assume</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"filename"</span><span style="color:#FFFFFF">)
}</span></code></div><div>Note that you can use a block instead of one single statement (this does not create a scope).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">myFunc3</span><span style="color:#FFFFFF">() </span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF">
{
    </span><span style="color:#6A9955">// This is not really necessary, see below, but this is just to show 'try' with a block</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// instead of one single call</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">try</span><span style="color:#FFFFFF">
    {
        cpt0 := </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"filename"</span><span style="color:#FFFFFF">)
        cpt1 := </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"other filename"</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#569CD6">assume</span><span style="color:#FFFFFF">
    {
        cpt2 := </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"filename"</span><span style="color:#FFFFFF">)
        cpt3 := </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"other filename"</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#6A9955">// Works also for 'catch' if you do not want to deal with the error message.</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// '@err' in that case is not really relevant.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">catch</span><span style="color:#FFFFFF">
    {
        cpt4 := </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"filename"</span><span style="color:#FFFFFF">)
        cpt5 := </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"other filename"</span><span style="color:#FFFFFF">)
    }

    </span><span style="color:#6A9955">// Works also for 'trycatch' if you do not want to deal with the error message</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// and you want to return as soon as an error is raised.</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">trycatch</span><span style="color:#FFFFFF">
    {
        cpt6 := </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"filename"</span><span style="color:#FFFFFF">)
        cpt7 := </span><span style="color:#FF7411">count</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"other filename"</span><span style="color:#FFFFFF">)
    }
}</span></code></div><div>When a function is marked with <code class="incode">throw</code>, the <code class="incode">try</code> for a function call is automatic if not specified. That means that most of the time it's not necessary to specify it.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">mySubFunc2</span><span style="color:#FFFFFF">() </span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"error"</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">mySubFunc1</span><span style="color:#FFFFFF">() </span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF">
{
    </span><span style="color:#6A9955">// In fact there's no need to add a 'try' before the call because 'mySubFunc1' is</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// marked with 'throw'</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// This is less verbose when you do not want to do something special in case</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// of errors (with 'assume', 'catch' or 'trycatch')</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">mySubFunc2</span><span style="color:#FFFFFF">()
}

</span><span style="color:#569CD6">catch</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">mySubFunc1</span><span style="color:#FFFFFF">()
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@err</span><span style="color:#FFFFFF"> == </span><span style="color:#CE9178">"error"</span><span style="color:#FFFFFF">)</span></code></div><div><h3 id="defer">defer</br>
</h3><code class="incode">defer</code> can have parameters like <code class="incode">defer(err)</code> or <code class="incode">defer(noerr)</code> to control if it should be executed depending on the error status.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> g_Defer = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">raiseError</span><span style="color:#FFFFFF">() </span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"error"</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">testDefer</span><span style="color:#FFFFFF">(err: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">) </span><span style="color:#569CD6">throw</span><span style="color:#FFFFFF">
{
    </span><span style="color:#D8A0DF">defer</span><span style="color:#FFFFFF">(err)      g_Defer += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// This will be called in case an error is raised, before exiting</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">defer</span><span style="color:#FFFFFF">(noerr)    g_Defer += </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// This will only be called in case an error is not raised</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">defer</span><span style="color:#FFFFFF">           g_Defer += </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// This will be called in both cases</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> err
        </span><span style="color:#FF7411">raiseError</span><span style="color:#FFFFFF">()
}</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">g_Defer = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">catch</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">testDefer</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(g_Defer == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)   </span><span style="color:#6A9955">// Will call only defer(err) and the normal defer</span><span style="color:#FFFFFF">

g_Defer = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">catch</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">testDefer</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(g_Defer == </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">)   </span><span style="color:#6A9955">// Will call only defer(noerr) and the normal defer</span></code></div>
<h2 id="175_safety">Safety</h2>
<div>Swag comes with a bunch of safety checks which can be activated by module/function/instruction with the <code class="incode">#[Swag.Safety]</code> attribute.</br>
</br>
Safety checks can also be changed for a specific build configuration (<code class="incode">--cfg:<config></code>) with <code class="incode">buildCfg.safetyGuards</code>.</br>
</br>
</div>
<div class="blockquote">Swag comes with four predefined configurations : <code class="incode">debug</code>, <code class="incode">fast-debug</code>, <code class="incode">fast-compile</code> and <code class="incode">release</code>. Safety checks are disabled in <code class="incode">fast-compile</code> and <code class="incode">release</code>.</br>
</div>
<div></div>
<div><h3 id="#[Swag.Safety("overflow", true)]">#[Swag.Safety("overflow", true)]</br>
</h3>Swag will panic if some operators overflow and if we lose some bits during an integer conversion.</br>
</br>
Operators that can overflow are : <code class="incode">+ - * << >></code> and their equivalent <code class="incode">+= -= *= <<= >>=</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := </span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// x += 1      // This would overflow, and panic, because we lose informations</span></code></div><div>But if you know what your are doing, you can use a special version of those operators, which will not panic. Add the <code class="incode">,over</code> modifier after the operation. This will disable safety checks.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := </span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
x +=,over </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// Overflow is expected, so this will wrap around</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)</span></code></div><div>You can also use <code class="incode">#[Swag.Overflow(true)]</code> to authorize overflow on a more global scale.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.Overflow(true)]</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := </span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
x += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// No need for operator modifier ',over'</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">)</span></code></div><div>For 8 or 16 bits, you can promote an operation to 32 bits by using ',up'.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := </span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> +,up </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">256</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(x) == </span><span style="color:#F6CC86">u32</span><span style="color:#FFFFFF">)</span></code></div><div>Swag will also check that a cast does not lose information.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x1 := </span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">//y0 := cast(s8) x1     // This would lose information and panic, as 255 cannot be encoded in 's8'</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@print(y0)</span><span style="color:#FFFFFF">

y1 := </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">,</span><span style="color:#FF7411">over</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">) x1  </span><span style="color:#6A9955">// But ',over' can be used on the cast operation too</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y1 == -</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)

x2 := -</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//y2 := cast(u8) x2     // This cast also is not possible, because 'x2' is negative and 'y' is 'u8'</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@print(y)</span><span style="color:#FFFFFF">
y2 := </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">,</span><span style="color:#FF7411">over</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">) x2
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(y2 == </span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">)</span></code></div><div>Rember that you can disable these safety checks with the corresponding attribute.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.Overflow(true)]</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := </span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
x += </span><span style="color:#B5CEA8">255</span><span style="color:#FFFFFF">    </span><span style="color:#6A9955">// 254</span><span style="color:#FFFFFF">
x += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">      </span><span style="color:#6A9955">// 255</span><span style="color:#FFFFFF">
x >>= </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">     </span><span style="color:#6A9955">// 127</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">127</span><span style="color:#FFFFFF">)</span></code></div><div><h3 id="#[Swag.Safety("any", true)]">#[Swag.Safety("any", true)]</br>
</h3>Swag will panic if a bad cast from 'any' is performed.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#F6CC86">any</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"1"</span><span style="color:#FFFFFF">
y := </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) x     </span><span style="color:#6A9955">// This is valid, because this is the correct underlying type</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//z := cast(s32) x      // This is not valid, and will panic</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@assert(z == 0)</span></code></div><div><h3 id="#[Swag.Safety("boundcheck", true)]">#[Swag.Safety("boundcheck", true)]</br>
</h3>Swag will panic if an index is out of range when dereferencing a sized value like an array, a slice, a string...</br>
</div>
<div>Safety for fixed size arrays.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := [</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
idx := </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@assert(x[idx] == 1)     // '10' is out of range, will panic</span></code></div><div>Safety when indexing a slice.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> [..] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
idx := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x[idx] == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)        </span><span style="color:#6A9955">// '1' is in range, ok</span><span style="color:#FFFFFF">
idx += </span><span style="color:#B5CEA8">9</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@assert(x[idx] == 1)      // '10' is out of range, will panic</span></code></div><div>Safety when slicing a sized value.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> [..] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF"> = [</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">]
</span><span style="color:#6A9955">//slice := x[1..4]              // '4' is out of range, will panic</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@assert(slice[0] == 1)</span></code></div><div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">
idx := </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//slice := x[0..idx]            // '10' is out of range, will panic</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@assert(slice[0] == "s"'u8)</span></code></div><div><h3 id="#[Swag.Safety("math", true)]">#[Swag.Safety("math", true)]</br>
</h3>Swag will panic if some math operations are invalid.</br>
</div>
<div>Division by zero.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">x := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
y := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//z := x / y        // Division by zero, panic</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@print(z)</span></code></div><div>Swag will also check for invalid arguments on some math intrinsics.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// All of this will panic, because arguments are incorrect.</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">//@abs(-128)</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@log(-2'f32)</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@log2(-2'f32)</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@log10(2'f64)</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@sqrt(-2'f32)</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@asin(-2'f32)</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">//@acos(2'f32)</span></code></div><div><h3 id="#[Swag.Safety("switch", true)]">#[Swag.Safety("switch", true)]</br>
</h3>Swag will panic if a switch is marked with #[Swag.Complete], but the value is not covered by a 'case'.</br>
</div>
<div><h3 id="#[Swag.Safety("bool", true)]">#[Swag.Safety("bool", true)]</br>
</h3>Swag will panic if a boolean value is not 'true' (1) or 'false' (0).</br>
</div>
<div><h3 id="#[Swag.Safety("nan", true)]">#[Swag.Safety("nan", true)]</br>
</h3>Swag will panic if a floating point 'NaN' is used.</br>
</div>

<h2 id="180_compiler_declarations">Compiler declarations</h2>

<h3 id="181__compile_time_evaluation">Compile time evaluation</h3>
<div><code class="incode">#assert</code> is a static assert (at compile time).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">true</span></code></div><div><code class="incode">@defined(SYMBOL)</code> returns true, at compile time, if the given symbol exists in the current context.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> !</span><span style="color:#DCDCAA">@defined</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">DOES_NOT_EXISTS</span><span style="color:#FFFFFF">)
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@defined</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Global</span><span style="color:#FFFFFF">)
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Global</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span></code></div><div>A static <code class="incode">#if/#elif/#else</code>, with an expression that can be evaluated at compile time.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">DEBUG</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RELEASE</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#if</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">DEBUG</span><span style="color:#FFFFFF">
{
}
</span><span style="color:#AAAAAA">#elif</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">RELEASE</span><span style="color:#FFFFFF">
{
}
</span><span style="color:#AAAAAA">#else</span><span style="color:#FFFFFF">
{
}</span></code></div><div><code class="incode">#error</code> to raise a compile time error, and <code class="incode">#warning</code> to raise a compile time warning.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#if</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
{
    </span><span style="color:#AAAAAA">#error</span><span style="color:#FFFFFF">   </span><span style="color:#CE9178">"this is an error"</span><span style="color:#FFFFFF">
    </span><span style="color:#AAAAAA">#warning</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"this is a warning"</span><span style="color:#FFFFFF">
}

</span><span style="color:#6A9955">// 'isThisDebug' is marked with 'Swag.ConstExpr', so it can be automatically evaluated</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// at compile time</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#[Swag.ConstExpr]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isThisDebug</span><span style="color:#FFFFFF">() => </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// This call is valid</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#if</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isThisDebug</span><span style="color:#FFFFFF">() == </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
{
    </span><span style="color:#AAAAAA">#error</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"this should not be called !"</span><span style="color:#FFFFFF">
}

</span><span style="color:#6A9955">// This time 'isThisRelease' is not marked with 'Swag.ConstExpr'</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isThisRelease</span><span style="color:#FFFFFF">() => </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// But this call is still valid because we force the compile time execution with '#run'</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#if</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">#run</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">isThisRelease</span><span style="color:#FFFFFF">() == </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">
{
    </span><span style="color:#AAAAAA">#error</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"this should not be called !"</span><span style="color:#FFFFFF">
}</span></code></div><div>A more complicated <code class="incode">#assert</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.ConstExpr]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">factorial</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
{
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> x * </span><span style="color:#FF7411">factorial</span><span style="color:#FFFFFF">(x - </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
}

</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">factorial</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">) == </span><span style="color:#B5CEA8">24</span><span style="color:#FFFFFF"> </span><span style="color:#6A9955">// Evaluated at compile time</span></code></div>
<h3 id="182__special_functions">Special functions</h3>
<div><h4 id="#test">#test</br>
</h4><code class="incode">#test</code> is a special function than can be used in the 'tests/' folder of the workspace.</br>
They will be executed only if swag is running in test mode.</br>
</div>
<div><h4 id="#main">#main</br>
</h4><code class="incode">#main</code> is the program entry point.</br>
Can only be defined once per module.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#main</span><span style="color:#FFFFFF">
{
}</span></code></div><div><h4 id="#init">#init</br>
</h4><code class="incode">#init</code> will be called at runtime, during the module initialization.</br>
You can have as many #init as you want.</br>
Order of #init in the same module is undefined.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#init</span><span style="color:#FFFFFF">
{
}</span></code></div><div><h4 id="#drop">#drop</br>
</h4><code class="incode">#drop</code> will be called at runtime, when module is unloaded.</br>
You can have as many #drop as you want.</br>
Order of #drop in the same module is undefined (but is always the inverse order of #init).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#drop</span><span style="color:#FFFFFF">
{
}</span></code></div><div><h4 id="#premain">#premain</br>
</h4><code class="incode">#premain</code> will be called after all modules have done their #init code, but before the #main function is called.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#premain</span><span style="color:#FFFFFF">
{
}</span></code></div>
<h3 id="183__run">Run</h3>
<div><code class="incode">#run</code> is a special function that will be called at compile time.</br>
It can be used to precompute some global values for example.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">: [</span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">undefined</span></code></div><div>Initialize <code class="incode">G</code> with <code class="incode">[1,2,4,8,16]</code> at compile time.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#run</span><span style="color:#FFFFFF">
{
    value := </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> i: </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">)
    {
        </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">[i] = value
        value *= </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    }
}</span></code></div><div><code class="incode">#test</code> are executed after #run, even at compile time (during testing).</br>
So we can test the values of G here.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">[</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">[</span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">8</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF">[</span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">] == </span><span style="color:#B5CEA8">16</span><span style="color:#FFFFFF">)</span></code></div><div><code class="incode">#run</code> can also be used as an expression, to call for example a function not marked with <code class="incode">#[Swag.ConstExpr]</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">SumValue</span><span style="color:#FFFFFF"> = </span><span style="color:#FF7411">#run</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">, </span><span style="color:#B5CEA8">4</span><span style="color:#FFFFFF">) + </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">SumValue</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">20</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">sum</span><span style="color:#FFFFFF">(values: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">...)-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
{
    result := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> v: values
        result += v
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> result
}</span></code></div><div><code class="incode">#run</code> can also be used as an expression block.</br>
The return type is deduced from the <code class="incode">return</code> statement.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF"> = </span><span style="color:#FF7411">#run</span><span style="color:#FFFFFF"> {
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> result: </span><span style="color:#F6CC86">f32</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">loop</span><span style="color:#FFFFFF"> </span><span style="color:#B5CEA8">10</span><span style="color:#FFFFFF">
        result += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> result   </span><span style="color:#6A9955">// 'Value' will be of type 'f32'</span><span style="color:#FFFFFF">
}
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Value</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">10.0</span></code></div>
<h3 id="184__global">Global</h3>
<div>A bunch of <code class="incode">#global</code> can start a source file.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#6A9955">// Skip the content of the file, like this one (but must be a valid swag file)</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#global</span><span style="color:#FFFFFF"> skip

</span><span style="color:#6A9955">// All symbols in the file will be public/private</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#global</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">public</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#global</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">private</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// All symbols in the file will go in the namespace 'Toto'</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#global</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">namespace</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Toto</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// A #if for the whole file</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#global</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">DEBUG</span><span style="color:#FFFFFF"> == </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// Some attributes can be assigned to the full file</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#global</span><span style="color:#FFFFFF"> </span><span style="color:#AAAAAA">#[Swag.Safety("", true)]</span><span style="color:#FFFFFF">

</span><span style="color:#6A9955">// The file will be exported for external usage</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// It's like putting everything in public, except that the file will</span><span style="color:#FFFFFF">
</span><span style="color:#6A9955">// be copied in its totality in the public folder</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#global</span><span style="color:#FFFFFF"> export

</span><span style="color:#6A9955">// Link with a given external library</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#foreignlib</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"windows.lib"</span></code></div>
<h3 id="185__var">Var</h3>
<div>A global variable can be tagged with <code class="incode">#[Swag.Tls]</code> to store it in the thread local storage (one copy per thread).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.Tls]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span></code></div><div>
</br>
 A local variable can be tagged with <code class="incode">#[Swag.Global]</code> to make it global (aka <code class="incode">static</code> in C/C++).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">()-></span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#AAAAAA">#[Swag.Global]</span><span style="color:#FFFFFF">
        </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G1</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">

        </span><span style="color:#4EC9B0">G1</span><span style="color:#FFFFFF"> += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G1</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">toto</span><span style="color:#FFFFFF">() == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div><div>A global variable can also be marked as <code class="incode">#[Swag.Compiler]</code>. That kind of variable will not be exported to the runtime and can only be used in compile time code.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.Compiler]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G2</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">

</span><span style="color:#FF7411">#run</span><span style="color:#FFFFFF">
{
    </span><span style="color:#4EC9B0">G2</span><span style="color:#FFFFFF"> += </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
}</span></code></div>
<h2 id="190_attributes">Attributes</h2>
<div>Attributes are tags associated with functions, structures etc...</br>
</div>

<h3 id="191__user_attributes">User attributes</h3>
<div>User attributes are declared like functions, but with the <code class="incode">attr</code> keyword before instead of <code class="incode">func</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">using</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">AttributeA</span><span style="color:#FFFFFF">()</span></code></div><div>Like functions, attributes can have parameters.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">AttributeB</span><span style="color:#FFFFFF">(x, y: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, z: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">)</span></code></div><div>So attributes can also have default values.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">AttributeBA</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">, y: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">"string"</span><span style="color:#FFFFFF">)</span></code></div><div>You can define a usage before the attribute definition to restrict its usage.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">AttributeC</span><span style="color:#FFFFFF">()</span></code></div><div>To use an attribute, the syntax is <code class="incode">#[attribute, attribute...]</code>. It should be placed <b>before</b> the thing you want to tag.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[AttributeA, AttributeB(0, 0, "string")]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">function1</span><span style="color:#FFFFFF">()
{
}</span></code></div><div>You can declare multiple usages.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function | AttributeUsage.Struct)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">AttributeD</span><span style="color:#FFFFFF">(x: </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">);

</span><span style="color:#AAAAAA">#[AttributeD(6)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">function2</span><span style="color:#FFFFFF">()
{
}

</span><span style="color:#AAAAAA">#[AttributeD(150)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> struct1
{
}</span></code></div><div>Finaly, attributes can be retrieved at runtime thanks to <b>type reflection</b>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">type := </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(function2)                  </span><span style="color:#6A9955">// Get the type of the function</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(type.attributes) == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)     </span><span style="color:#6A9955">// Check the function has exactly one attribute associated with it</span></code></div>
<h3 id="192__predefined_attributes">Predefined attributes</h3>
<div>This is the list of predefined attributes.</br>
All are located in the reserved <code class="incode">Swag</code> namespace.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#global</span><span style="color:#FFFFFF"> skip

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">ConstExpr</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function|AttributeUsage.Struct|AttributeUsage.File)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">PrintBc</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function|AttributeUsage.GlobalVariable)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Compiler</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Inline</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Macro</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Mixin</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Test</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Implicit</span><span style="color:#FFFFFF">()

</span><span style="color:#6A9955">// Hardcoded also for switch</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Complete</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">NoReturn</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Foreign</span><span style="color:#FFFFFF">(module: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">, function: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> = </span><span style="color:#CE9178">""</span><span style="color:#FFFFFF">);

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Callback</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function|AttributeUsage.Variable)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Discardable</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function|AttributeUsage.Struct|AttributeUsage.Enum|AttributeUsage.EnumValue)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Deprecated</span><span style="color:#FFFFFF">(msg: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF"> = </span><span style="color:#569CD6">null</span><span style="color:#FFFFFF">)

</span><span style="color:#6A9955">// Hardcoded for type alias</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Strict</span><span style="color:#FFFFFF">()

</span><span style="color:#6A9955">// Hardcoded for local variables</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Global</span><span style="color:#FFFFFF">()

</span><span style="color:#6A9955">// Hardcoded for struct and variables</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Align</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Struct)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Pack</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">)

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Struct)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">NoCopy</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.StructVariable)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Offset</span><span style="color:#FFFFFF">(name: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">)

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Enum)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">EnumFlags</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Enum)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">EnumIndex</span><span style="color:#FFFFFF">()

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.All|AttributeUsage.File)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Safety</span><span style="color:#FFFFFF">(what: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">)

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.All)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">SelectIf</span><span style="color:#FFFFFF">(value: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">)

</span><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function|AttributeUsage.File)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Optim</span><span style="color:#FFFFFF">(what: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">, value: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">)</span></code></div>
<h2 id="200_type_reflection">Type reflection</h2>
<div>In Swag, types are also values that can be inspected at compile time or at runtime. The two main intrinsics for this are <code class="incode">@typeof</code> and <code class="incode">@kindof</code>.</br>
</div>
<div>
</br>
 You can get the type of an expression with <code class="incode">@typeof</code>, or just with the type itself (<b>types are also values</b>).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    ptr1 := </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr1.name == </span><span style="color:#CE9178">"s8"</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr1 == </span><span style="color:#F6CC86">s8</span><span style="color:#FFFFFF">)

    ptr2 := </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr2.name == </span><span style="color:#CE9178">"s16"</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr2 == </span><span style="color:#F6CC86">s16</span><span style="color:#FFFFFF">)

    ptr3 := </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr3.name == </span><span style="color:#CE9178">"s32"</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr3 == </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">))

    ptr4 := </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr4.name == </span><span style="color:#CE9178">"s64"</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr4 == </span><span style="color:#F6CC86">s64</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 The return result of <code class="incode">@typeof</code> is a const pointer to a <code class="incode">Swag.TypeInfo</code> kind of structure. This is an alias for the <code class="incode">typeinfo</code> type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    ptr := </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(ptr) == </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">TypeInfoNative</span><span style="color:#FFFFFF">))

    ptr1 := </span><span style="color:#D7BA7D">#type</span><span style="color:#FFFFFF"> [</span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(ptr1) == </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">TypeInfoArray</span><span style="color:#FFFFFF">))
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr1.name == </span><span style="color:#CE9178">"[2] s32"</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 The <code class="incode">TypeInfo</code> structure contains a different enum value for each type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    ptr := </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(ptr.kind).fullname == </span><span style="color:#CE9178">"Swag.TypeInfoKind"</span><span style="color:#FFFFFF">)
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(ptr.sizeof == </span><span style="color:#DCDCAA">@sizeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">))
}</span></code></div><div><h3 id="@decltype">@decltype</br>
</h3></div>
<div>
</br>
 <code class="incode">@decltype</code> can be used to transform a <code class="incode">typeinfo</code> to a real compiler type. This is the opposite of <code class="incode">@typeof</code> or <code class="incode">@kindof</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#DCDCAA">@decltype</span><span style="color:#FFFFFF">(</span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">))
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(x) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
}</span></code></div><div>
</br>
 <code class="incode">@decltype</code> can evaluate a constexpr expression that returns a <code class="incode">typeinfo</code> to determine the real type.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#AAAAAA">#[Swag.ConstExpr]</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">getType</span><span style="color:#FFFFFF">(needAString: </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">)-></span><span style="color:#F6CC86">typeinfo</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> needAString
            </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">else</span><span style="color:#FFFFFF">
            </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x: </span><span style="color:#DCDCAA">@decltype</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">getType</span><span style="color:#FFFFFF">(needAString: </span><span style="color:#569CD6">false</span><span style="color:#FFFFFF">))
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(x) == </span><span style="color:#F6CC86">s32</span><span style="color:#FFFFFF">
    x = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">

    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> x1: </span><span style="color:#DCDCAA">@decltype</span><span style="color:#FFFFFF">(</span><span style="color:#FF7411">getType</span><span style="color:#FFFFFF">(needAString: </span><span style="color:#569CD6">true</span><span style="color:#FFFFFF">))
    </span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(x1) == </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
    x1 = </span><span style="color:#CE9178">"0"</span><span style="color:#FFFFFF">
}</span></code></div>
<h2 id="210_code_inspection">Code inspection</h2>
<div><code class="incode">#message</code> is a special function that will be called by the compiler when something specific occurs during the build. The parameter of <code class="incode">#message</code> is a mask that tells the compiler when to call the function.</br>
</div>
<div>With the <code class="incode">Swag.CompilerMsgMask.SemFunctions</code> flag, for example, <code class="incode">#message</code> will be called each time a function of the module <b>has been typed</b>. You can then use <code class="incode">getMessage()</code> in the <code class="incode">@compiler()</code> interface to retrieve some informations about the reason of the call.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#message</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">CompilerMsgMask</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">SemFunctions</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#6A9955">// Get the interface to communicate with the compiler</span><span style="color:#FFFFFF">
    itf := </span><span style="color:#DCDCAA">@compiler</span><span style="color:#FFFFFF">()

    </span><span style="color:#6A9955">// Get the current message</span><span style="color:#FFFFFF">
    msg := itf.</span><span style="color:#FF7411">getMessage</span><span style="color:#FFFFFF">()

    </span><span style="color:#6A9955">// We know that the type in the message is a function because of the '#message' mask.</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// So we can safely cast.</span><span style="color:#FFFFFF">
    typeFunc := </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">TypeInfoFunc</span><span style="color:#FFFFFF">) msg.type

    </span><span style="color:#6A9955">// The message name, for `Swag.CompilerMsgMask.SemFunctions`, is the name of the function being compiled.</span><span style="color:#FFFFFF">
    nameFunc := msg.name

    </span><span style="color:#6A9955">// As an example, we count that name if it starts with "XX".</span><span style="color:#FFFFFF">
    </span><span style="color:#6A9955">// But we could use custom function attributes instead...</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(nameFunc) > </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> nameFunc[</span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"X"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF"> </span><span style="color:#D8A0DF">and</span><span style="color:#FFFFFF"> nameFunc[</span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">] == </span><span style="color:#CE9178">"X"</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
        </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">XXTestFunc1</span><span style="color:#FFFFFF">() {}
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">XXTestFunc2</span><span style="color:#FFFFFF">() {}
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">XXTestFunc3</span><span style="color:#FFFFFF">() {}</span></code></div><div>The compiler will call the following function after the semantic pass. So after <b>all the functions</b> of the module have been parsed.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#message</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">CompilerMsgMask</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">PassAfterSemantic</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#6A9955">// We should have found 3 functions starting with "XX"</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">G</span><span style="color:#FFFFFF"> == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)
}</span></code></div><div>This will be called for every global variables of the module.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#message</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">CompilerMsgMask</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">SemGlobals</span><span style="color:#FFFFFF">)
{
    itf := </span><span style="color:#DCDCAA">@compiler</span><span style="color:#FFFFFF">()
    msg := itf.</span><span style="color:#FF7411">getMessage</span><span style="color:#FFFFFF">()
}</span></code></div><div>This will be called for every global types of the module (structs, enums, interfaces...).</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#message</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">Swag</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">CompilerMsgMask</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">SemTypes</span><span style="color:#FFFFFF">)
{
    itf := </span><span style="color:#DCDCAA">@compiler</span><span style="color:#FFFFFF">()
    msg := itf.</span><span style="color:#FF7411">getMessage</span><span style="color:#FFFFFF">()
}</span></code></div>
<h2 id="220_meta_programmation">Meta programmation</h2>
<div>In Swag you can construct some source code at compile time, which will then be compiled. The source code you provide in the form of a <b>string</b> must be a valid Swag program.</br>
</div>

<h3 id="221__ast">Ast</h3>
<div>The most simple way to produce a string which contains the Swag code to compile is with an <code class="incode">#ast</code> block. An <code class="incode">#ast</code> block is executed at compile time and the string it returns will be compiled <b>inplace</b>.</br>
</div>
<div>
</br>
 The <code class="incode">#ast</code> can be a simple expression with the string to compile.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    </span><span style="color:#FF7411">#ast</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"x := 666"</span><span style="color:#FFFFFF">
    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(x == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
}</span></code></div><div>
</br>
 Or it can be a block, with an explicit <code class="incode">return</code></br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FFFFFF">{
    cpt := </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">
    </span><span style="color:#FF7411">#ast</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">INC</span><span style="color:#FFFFFF"> = </span><span style="color:#B5CEA8">5</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"cpt += "</span><span style="color:#FFFFFF"> ++ </span><span style="color:#4EC9B0">INC</span><span style="color:#FFFFFF">   </span><span style="color:#6A9955">// Equivalent to 'cpt += 5'</span><span style="color:#FFFFFF">
    }

    </span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(cpt == </span><span style="color:#B5CEA8">7</span><span style="color:#FFFFFF">)
}</span></code></div><div><h4 id="Struct and enums">Struct and enums</br>
</h4><code class="incode">#ast</code> can for example be used to generate the content of a <code class="incode">struct</code> or <code class="incode">enum</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#FF7411">#ast</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"x, y: s32 = 666"</span><span style="color:#FFFFFF">
    }
}

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.x == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">)</span></code></div><div>It works with generics too, and can be mixed with static declarations.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">
{
    </span><span style="color:#FF7411">#ast</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"x, y: "</span><span style="color:#FFFFFF"> ++ </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">).name
    }

    z: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
}

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(v.x) == </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(v.y) == </span><span style="color:#F6CC86">bool</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(v.z) == </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v1: </span><span style="color:#4EC9B0">MyStruct</span><span style="color:#FFFFFF">'</span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(v1.x) == </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(v1.y) == </span><span style="color:#F6CC86">f64</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(v1.z) == </span><span style="color:#F6CC86">string</span></code></div><div><code class="incode">#ast</code> needs to return a <i>string like</i> value, which can of course be dynamically constructed.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[Swag.Compiler]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">append</span><span style="color:#FFFFFF">(buf: ^</span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">, val: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">)
{
    len := </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">while</span><span style="color:#FFFFFF"> buf[len] len += </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">
    </span><span style="color:#F67F56">@memcpy</span><span style="color:#FFFFFF">(buf + len, </span><span style="color:#DCDCAA">@dataof</span><span style="color:#FFFFFF">(val), </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">u64</span><span style="color:#FFFFFF">) </span><span style="color:#DCDCAA">@countof</span><span style="color:#FFFFFF">(val) + </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
}

</span><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">
{
    </span><span style="color:#FF7411">#ast</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#6A9955">// We construct the code to compile in this local array</span><span style="color:#FFFFFF">
        </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> buf: [</span><span style="color:#B5CEA8">256</span><span style="color:#FFFFFF">] </span><span style="color:#F6CC86">u8</span><span style="color:#FFFFFF">
        </span><span style="color:#FF7411">append</span><span style="color:#FFFFFF">(buf, </span><span style="color:#CE9178">"x: f32 = 1\n"</span><span style="color:#FFFFFF">)
        </span><span style="color:#FF7411">append</span><span style="color:#FFFFFF">(buf, </span><span style="color:#CE9178">"y: f32 = 2\n"</span><span style="color:#FFFFFF">)
        </span><span style="color:#FF7411">append</span><span style="color:#FFFFFF">(buf, </span><span style="color:#CE9178">"z: f32 = 3\n"</span><span style="color:#FFFFFF">)

        </span><span style="color:#6A9955">// And returns to the compiler the corresponding *code*</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">) buf
    }
}

</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> v: </span><span style="color:#4EC9B0">Vector3</span><span style="color:#FFFFFF">
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.x == </span><span style="color:#B5CEA8">1</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.y == </span><span style="color:#B5CEA8">2</span><span style="color:#FFFFFF">)
</span><span style="color:#DCDCAA">@assert</span><span style="color:#FFFFFF">(v.z == </span><span style="color:#B5CEA8">3</span><span style="color:#FFFFFF">)</span></code></div><div><h4 id="For example">For example</br>
</h4>This is a real life example of an <code class="incode">#ast</code> usage from the <code class="incode">Std.Core</code> module. Here we generate a structure which contains all the fields of an original other structure, but where the types are forced to be <code class="incode">bool</code>.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">) </span><span style="color:#4EC9B0">IsSet</span><span style="color:#FFFFFF">
{
    </span><span style="color:#FF7411">#ast</span><span style="color:#FFFFFF">
    {
        </span><span style="color:#6A9955">// A `StringBuilder` is used to manipulate dynamic strings.</span><span style="color:#FFFFFF">
        str := </span><span style="color:#4EC9B0">StrConv</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">StringBuilder</span><span style="color:#FFFFFF">{}

        </span><span style="color:#6A9955">// We get the type of the generic parameter `T`</span><span style="color:#FFFFFF">
        typeof := </span><span style="color:#DCDCAA">@typeof</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">T</span><span style="color:#FFFFFF">)

        </span><span style="color:#6A9955">// Then we visit all the fields, assuming the type is a struct (or this will not compile).</span><span style="color:#FFFFFF">
        </span><span style="color:#6A9955">// For each original field, we create one with the same name, but with a `bool` type.</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> f: typeof.fields
            str.</span><span style="color:#FF7411">appendFormat</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"%: bool\n"</span><span style="color:#FFFFFF">, f.name)

        </span><span style="color:#6A9955">// Then we return the constructed source code.</span><span style="color:#FFFFFF">
        </span><span style="color:#6A9955">// It will be used by the compiler to generate the content of the `IsSet` struct.</span><span style="color:#FFFFFF">
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> str.</span><span style="color:#FF7411">toString</span><span style="color:#FFFFFF">()
    }
}</span></code></div><div></div>
<div><h4 id="At global scope">At global scope</br>
</h4><code class="incode">#ast</code> can also be called at the global scope.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#ast</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> value = </span><span style="color:#B5CEA8">666</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF"> </span><span style="color:#CE9178">"const myGeneratedConst = "</span><span style="color:#FFFFFF"> ++ value
}</span></code></div><div>But be aware that you must use <code class="incode">#placeholder</code> in case you are generating global symbols that can be used by something else in the code. This will tell Swag that <i>this symbol</i> will exist at some point, so please wait for it to <i>exist</i> before complaining.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#placeholder</span><span style="color:#FFFFFF"> myGeneratedConst   </span><span style="color:#6A9955">// Symbol `myGeneratedConst` will be generated</span></code></div><div>Here for example, thanks to the <code class="incode">#placeholder</code>, the <code class="incode">#assert</code> will wait for the symbol <code class="incode">myGeneratedConst</code> to be replaced with its real content.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#assert</span><span style="color:#FFFFFF"> myGeneratedConst == </span><span style="color:#B5CEA8">666</span></code></div>
<h3 id="222__compiler_interface">Compiler interface</h3>
<div>The other method to compile generated code is to use the function <code class="incode">compileString()</code> in the <code class="incode">@compiler()</code> interface. Of course this should be called at compile time, and mostly during a <code class="incode">#message</code> call.</br>
</br>
Here is a real life example from the <code class="incode">Std.Ogl</code> module (opengl wrapper), which uses <code class="incode">#message</code> to track functions marked with a specific <b>user attribute</b> <code class="incode">Ogl.Extension</code>, and generates some code for each function that has been found.</br>
</div>
<div>First we declare a new specific attribute, which can then be associated with a function.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#[AttrUsage(AttributeUsage.Function)]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">attr</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">Extension</span><span style="color:#FFFFFF">()

</span><span style="color:#6A9955">// Here is an example of usage of that attribute.</span><span style="color:#FFFFFF">
</span><span style="color:#AAAAAA">#[Extension]</span><span style="color:#FFFFFF">
{
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">glUniformMatrix2x3fv</span><span style="color:#FFFFFF">(location: </span><span style="color:#4EC9B0">GLint</span><span style="color:#FFFFFF">, count: </span><span style="color:#4EC9B0">GLsizei</span><span style="color:#FFFFFF">, transpose: </span><span style="color:#4EC9B0">GLboolean</span><span style="color:#FFFFFF">, value: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">GLfloat</span><span style="color:#FFFFFF">);
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">glUniformMatrix2x4fv</span><span style="color:#FFFFFF">(location: </span><span style="color:#4EC9B0">GLint</span><span style="color:#FFFFFF">, count: </span><span style="color:#4EC9B0">GLsizei</span><span style="color:#FFFFFF">, transpose: </span><span style="color:#4EC9B0">GLboolean</span><span style="color:#FFFFFF">, value: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">GLfloat</span><span style="color:#FFFFFF">);
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">glUniformMatrix3x2fv</span><span style="color:#FFFFFF">(location: </span><span style="color:#4EC9B0">GLint</span><span style="color:#FFFFFF">, count: </span><span style="color:#4EC9B0">GLsizei</span><span style="color:#FFFFFF">, transpose: </span><span style="color:#4EC9B0">GLboolean</span><span style="color:#FFFFFF">, value: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">GLfloat</span><span style="color:#FFFFFF">);
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">glUniformMatrix3x4fv</span><span style="color:#FFFFFF">(location: </span><span style="color:#4EC9B0">GLint</span><span style="color:#FFFFFF">, count: </span><span style="color:#4EC9B0">GLsizei</span><span style="color:#FFFFFF">, transpose: </span><span style="color:#4EC9B0">GLboolean</span><span style="color:#FFFFFF">, value: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">GLfloat</span><span style="color:#FFFFFF">);
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">glUniformMatrix4x2fv</span><span style="color:#FFFFFF">(location: </span><span style="color:#4EC9B0">GLint</span><span style="color:#FFFFFF">, count: </span><span style="color:#4EC9B0">GLsizei</span><span style="color:#FFFFFF">, transpose: </span><span style="color:#4EC9B0">GLboolean</span><span style="color:#FFFFFF">, value: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">GLfloat</span><span style="color:#FFFFFF">);
    </span><span style="color:#569CD6">func</span><span style="color:#FFFFFF"> </span><span style="color:#FF7411">glUniformMatrix4x3fv</span><span style="color:#FFFFFF">(location: </span><span style="color:#4EC9B0">GLint</span><span style="color:#FFFFFF">, count: </span><span style="color:#4EC9B0">GLsizei</span><span style="color:#FFFFFF">, transpose: </span><span style="color:#4EC9B0">GLboolean</span><span style="color:#FFFFFF">, value: </span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">GLfloat</span><span style="color:#FFFFFF">);
}</span></code></div><div>The following will be used to track the functions with that specific attribute.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#569CD6">struct</span><span style="color:#FFFFFF"> </span><span style="color:#4EC9B0">OneFunc</span><span style="color:#FFFFFF">
{
    type: </span><span style="color:#F6CC86">typeinfo</span><span style="color:#FFFFFF">
    name: </span><span style="color:#F6CC86">string</span><span style="color:#FFFFFF">
}

</span><span style="color:#AAAAAA">#[Compiler]</span><span style="color:#FFFFFF">
</span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> g_Functions: </span><span style="color:#4EC9B0">Array</span><span style="color:#FFFFFF">'</span><span style="color:#4EC9B0">OneFunc</span></code></div><div>This <code class="incode">#message</code> will be called for each function of the <code class="incode">Ogl</code> module.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#message</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">CompilerMsgMask</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">SemFunctions</span><span style="color:#FFFFFF">)
{
    itf := </span><span style="color:#DCDCAA">@compiler</span><span style="color:#FFFFFF">()
    msg := itf.</span><span style="color:#FF7411">getMessage</span><span style="color:#FFFFFF">()

    </span><span style="color:#6A9955">// If the function does not have our attribute, forget it</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> !</span><span style="color:#4EC9B0">Reflection</span><span style="color:#FFFFFF">.</span><span style="color:#FF7411">hasAttribute</span><span style="color:#FFFFFF">(msg.type, </span><span style="color:#4EC9B0">Extension</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">return</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// We just track all the functions with the given attribute</span><span style="color:#FFFFFF">
    g_Functions.</span><span style="color:#FF7411">add</span><span style="color:#FFFFFF">({msg.type, msg.name})
}</span></code></div><div>We will generate a <code class="incode">glInitExtensions</code> global function, so we register it as a place holder.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#AAAAAA">#placeholder</span><span style="color:#FFFFFF"> glInitExtensions</span></code></div><div>This is called once all functions of the module have been typed, and this is the main code generation.</br>
</div>
<div class="code"><code style="white-space: break-spaces"><span style="color:#FF7411">#message</span><span style="color:#FFFFFF">(</span><span style="color:#4EC9B0">CompilerMsgMask</span><span style="color:#FFFFFF">.</span><span style="color:#4EC9B0">PassAfterSemantic</span><span style="color:#FFFFFF">)
{
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> builderVars: </span><span style="color:#4EC9B0">StringBuilder</span><span style="color:#FFFFFF">
    </span><span style="color:#569CD6">var</span><span style="color:#FFFFFF"> builderInit: </span><span style="color:#4EC9B0">StringBuilder</span><span style="color:#FFFFFF">

    </span><span style="color:#6A9955">// Generate the `glInitExtensions` function</span><span style="color:#FFFFFF">
    builderInit.</span><span style="color:#FF7411">appendString</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"public func glInitExtensions()\n{\n"</span><span style="color:#FFFFFF">);

    </span><span style="color:#6A9955">// Visit all functions we have registered, i.e. all functions with the `Ogl.Extension` attribute.</span><span style="color:#FFFFFF">
    </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> e: g_Functions
    {
        typeFunc := </span><span style="color:#569CD6">cast</span><span style="color:#FFFFFF">(</span><span style="color:#569CD6">const</span><span style="color:#FFFFFF"> *</span><span style="color:#4EC9B0">TypeInfoFunc</span><span style="color:#FFFFFF">) e.type

        </span><span style="color:#6A9955">// Declare a lambda variable for that extension</span><span style="color:#FFFFFF">
        builderVars.</span><span style="color:#FF7411">appendFormat</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"var ext_%: %\n"</span><span style="color:#FFFFFF">, e.name, typeFunc.name)

        </span><span style="color:#6A9955">// Make a wrapper function</span><span style="color:#FFFFFF">
        builderVars.</span><span style="color:#FF7411">appendFormat</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"public func %("</span><span style="color:#FFFFFF">, e.name)
        </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> p, i: typeFunc.parameters
        {
            </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> i != </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF"> builderVars.</span><span style="color:#FF7411">appendString</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">", "</span><span style="color:#FFFFFF">)
            builderVars.</span><span style="color:#FF7411">appendFormat</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"p%: %"</span><span style="color:#FFFFFF">, i, p.pointedType.name)
        }

        </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> typeFunc.returnType == </span><span style="color:#F6CC86">void</span><span style="color:#FFFFFF">
            builderVars.</span><span style="color:#FF7411">appendFormat</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">")\n{\n"</span><span style="color:#FFFFFF">)
        </span><span style="color:#D8A0DF">else</span><span style="color:#FFFFFF">
            builderVars.</span><span style="color:#FF7411">appendFormat</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">")->%\n{\n"</span><span style="color:#FFFFFF">, typeFunc.returnType.name)
        builderVars.</span><span style="color:#FF7411">appendFormat</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"\treturn ext_%("</span><span style="color:#FFFFFF">, e.name)
        </span><span style="color:#D8A0DF">visit</span><span style="color:#FFFFFF"> p, i: typeFunc.parameters
        {
            </span><span style="color:#D8A0DF">if</span><span style="color:#FFFFFF"> i != </span><span style="color:#B5CEA8">0</span><span style="color:#FFFFFF"> builderVars.</span><span style="color:#FF7411">appendString</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">", "</span><span style="color:#FFFFFF">)
            builderVars.</span><span style="color:#FF7411">appendFormat</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"p%"</span><span style="color:#FFFFFF">, i)
        }

        builderVars.</span><span style="color:#FF7411">appendString</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">");\n}\n\n"</span><span style="color:#FFFFFF">)

        </span><span style="color:#6A9955">// Initialize the variable with the getExtensionAddress</span><span style="color:#FFFFFF">
        builderInit.</span><span style="color:#FF7411">appendFormat</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"\text_% = cast(%) getExtensionAddress(@dataof(\"%\"))\n"</span><span style="color:#FFFFFF">, e.name, typeFunc.name, e.name);
    }

    </span><span style="color:#6A9955">// Compile !!</span><span style="color:#FFFFFF">
    itf := </span><span style="color:#DCDCAA">@compiler</span><span style="color:#FFFFFF">()
    str := builderVars.</span><span style="color:#FF7411">toString</span><span style="color:#FFFFFF">()
    itf.</span><span style="color:#FF7411">compileString</span><span style="color:#FFFFFF">(str.</span><span style="color:#FF7411">toString</span><span style="color:#FFFFFF">())

    builderInit.</span><span style="color:#FF7411">appendString</span><span style="color:#FFFFFF">(</span><span style="color:#CE9178">"}\n"</span><span style="color:#FFFFFF">);
    str = builderInit.</span><span style="color:#FF7411">toString</span><span style="color:#FFFFFF">()
    itf.</span><span style="color:#FF7411">compileString</span><span style="color:#FFFFFF">(str.</span><span style="color:#FF7411">toString</span><span style="color:#FFFFFF">())
}</span></code></div><div></div>

</div>
</div>
</div>
</body>
</html>
